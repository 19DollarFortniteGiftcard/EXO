(function(){var aa=document;var c=Math.random,l=2*Math.PI;function ba(a,b){return function(){a();b()}}function ca(a,b){var d=a.x-b.x;a=a.y-b.y;return Math.sqrt(d*d+a*a)}function da(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ea(a,b,d){var e=0;d.forEach(function(d){d.g.c==b&&(e+=l/a)});if(!(e>=l))return e}function q(a,b,d){return"hsl("+(0>a?360*c():a)+","+(0>b?100*c():b)+"%,"+(0>d?100*c():d)+"%)"}function ka(a,b,d){return a>d?d:a<b?b:a}
function la(a,b,d,e){var h=t-u.width/2,g=v-u.height/2;return h>a-d/2&&h<a+d/2&&g>b-e/2&&g<b+e/2}function ma(){for(var a={x:w,y:x},b=999999,d=y[0],e=y.length;e--;){var h=ca(y[e],a);h<b&&(b=h,d=e)}return y[d]};var na=!1,oa;window.speechSynthesis&&(na=!0,oa=window.speechSynthesis.getVoices(),0>=oa.length&&(window.speechSynthesis.onvoiceschanged=function(){oa=window.speechSynthesis.getVoices()}));function ua(a){na&&(window.speechSynthesis.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=oa[3],window.speechSynthesis.speak(a))};function va(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],d,e,h,g,k;this.A=function(a){d=a;e=a.C;h=0;g=a.u*a.s*(e+1)*2;k=new Int32Array(g)};this.D=function(){var f,fa,L,r,X,M=new Int32Array(g),n=d.K[h],Y=d.u,pa=d.s,Ma=0,qa=0,F;var G=!1;var ra=[];for(fa=0;fa<=e;++fa){var ha=n.p[fa];for(L=0;L<pa;++L){if(X=ha?n.f[ha-1].b[L]:0)n.a[X-1]=n.f[ha-1].b[L+pa]||0,16>X&&(ra=[]);var Jb=b[n.a[15]],Kb=n.a[16]/
512,Lb=Math.pow(2,n.a[17]-9)/Y,Mb=n.a[18],ib=n.a[19],Nb=135.82764118168*n.a[20]/44100,Ob=1-n.a[21]/255,Na=1E-5*n.a[22],Pb=n.a[23]/32,Qb=n.a[24]/512,Rb=6.283184*Math.pow(2,n.a[25]-9)/Y,jb=n.a[26]/255,Oa=n.a[27]*Y&-2;X=(fa*pa+L)*Y;for(r=0;4>r;++r)if(f=ha?n.f[ha-1].n[L+r*pa]:0){if(!ra[f]){var m=ra;var N=f;var kb=F=void 0,sa,H,p=n,lb=f,Sb=b[p.a[0]],Tb=p.a[1],Ub=p.a[3],Vb=b[p.a[4]],Wb=p.a[5],Xb=p.a[8],mb=p.a[9],Z=p.a[10]*p.a[10]*4,ta=p.a[11]*p.a[11]*4,Pa=p.a[12]*p.a[12]*4,Yb=1/Pa,ia=p.a[13],Zb=Y*Math.pow(2,
2-p.a[14]),nb=new Int32Array(Z+ta+Pa),ob=0,pb=0;for(sa=H=0;H<Z+ta+Pa;H++,sa++){0<=sa&&(ia=ia>>8|(ia&255)<<4,sa-=Zb,kb=.003959503758*Math.pow(2,(lb+(ia&15)+p.a[2]-128-128)/12),F=.003959503758*Math.pow(2,(lb+(ia&15)+p.a[6]-128-128)/12)*(1+8E-4*p.a[7]));var O=1;H<Z?O=H/Z:H>=Z+ta&&(O-=(H-Z-ta)*Yb);var ja=kb;Ub&&(ja*=O*O);ob+=ja;var Qa=Sb(ob)*Tb;ja=F;Xb&&(ja*=O*O);pb+=ja;Qa+=Vb(pb)*Wb;mb&&(Qa+=(2*Math.random()-1)*mb);nb[H]=80*Qa*O|0}m[N]=nb}N=ra[f];f=0;for(m=2*X;f<N.length;f++,m+=2)M[m]+=N[f]}for(f=0;f<
Y;f++)r=2*(X+f),(m=M[r])||G?(G=Nb,Mb&&(G*=Jb(Lb*r)*Kb+.5),G=1.5*Math.sin(G),Ma+=G*qa,m=Ob*(m-qa)-Ma,qa+=G*m,m=3==ib?qa:1==ib?m:Ma,Na&&(m*=Na,m=1>m?-1<m?a(.25*m):-1:1,m/=Na),m*=Pb,G=1E-5<m*m,N=Math.sin(Rb*r)*Qb+.5,F=m*(1-N),m*=N):F=0,r>=Oa&&(F+=M[r-Oa+1]*jb,m+=M[r-Oa]*jb),M[r]=F|0,M[r+1]=m|0,k[r]+=F|0,k[r+1]+=m|0}}h++;return h/d.I};this.B=function(){var a=44+2*g-8,b=a-36,d=new Uint8Array(44+2*g);d.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<g;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;d[b++]=e&255;d[b++]=e>>8&255}return d}};var wa={K:[{a:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],b:[]}]}],u:5513,s:1,C:0,I:1};var z=document.createElement("CANVAS"),A=z.getContext("2d");z.width=20;z.height=140;A.fillStyle="#dddddd";A.fillRect(8,50,4,40);A.fillStyle="#639bff";A.fillRect(2,0,15,60);A.fillRect(2,80,15,60);A.fillStyle="#9badb7";A.fillRect(2,65,17,10);A.fillRect(0,66,2,8);var xa=document.createElement("CANVAS"),ya=xa.getContext("2d");xa.width=64;xa.height=64;ya.fillStyle="#ff0000";ya.moveTo(0,32);ya.lineTo(64,0);ya.lineTo(48,32);ya.lineTo(64,64);ya.fill();var za=0,Aa=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function Ba(){for(var a=100;a--;){var b=Math.random()*l;(new Ca(3E3*Math.cos(b),3E3*Math.sin(b))).direction=b}};var Da=!0,Ea=[],Fa=!0,Ga=[],Ha=wa,Ia=new va;Ia.w=new Audio;Ia.A(Ha);Ga.push(Ia);wa=Ia.w;var Ja=new va;Ja.v=!0;
Ja.A({K:[{a:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],b:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,
13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],b:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],b:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,
,,,,,,,111,,,,,,,,99],b:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],b:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],b:[]},{n:[],b:[]}]},{a:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],b:[]},{n:[147],b:[]}]},{a:[0,0,140,0,0,0,140,0,0,
60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,
,147,,147,,,147,,147,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{a:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],b:[]},{n:[114],b:[]},{n:[111],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{a:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],
b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],b:[]},{n:[147],b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],b:[]}]},{a:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],b:[]},{n:[159,
,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{a:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,
2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],b:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],b:[]}]},
{a:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],b:[]}]}],u:5513,s:32,C:26,I:8});Ea.push(Ja);var Ka=0;function La(){for(var a=0;a<Ea.length;a++){var b=Ea[a];b.v&&(b.v=1<=b.D(),Ka+=1,b=b.B(),b=URL.createObjectURL(new Blob([b],{type:"audio/wav"})),b=new Audio(b),b.addEventListener("ended",function(){this.currentTime=0;this.play()},!1),b.play(),b.volume=.5)}Ka>=Ea.length&&(Da=!1)}var Ra=0;
function Sa(){for(var a=0;a<Ga.length;a++){var b=Ga[a];if(1<=b.D()){Ra+=1;var d=b.B();d=URL.createObjectURL(new Blob([d],{type:"audio/wav"}));b.w.src=d}}Ra>=Ga.length&&(Fa=!1)};var t=0,v=0,w=0,x=0,Ta=!1,Ua=!1,Va=!1,Wa=!1,Xa=!1,Ya=null,Za;window.addEventListener("mousemove",function(a){var b=u.getBoundingClientRect();t=a.clientX-b.left;v=a.clientY-b.top;w=(t+B-u.width/2)/C;x=(v+D-u.height/2)*E/C;Za&&(Ua=!0)},!1);window.addEventListener("mousedown",function(){Za=Ta=!0},!1);window.addEventListener("mouseup",function(){Za=!1;Ua||(Va=!0);Ua=!1},!1);window.addEventListener("wheel",function(a){Wa=0<a.deltaY;Xa=0>a.deltaY},!1);var $a=[];function ab(){var a=-u.width/4,b={};$a.push(b);b.x=a;b.y=0;b.m=300;b.i=400;b.cache=null;b.display=!1;b.buttons=[];b.update=function(){b.display&&Ta&&b.J()};b.J=function(){};b.h=function(){};b.show=function(){};return b}function bb(){for(var a=$a.length;a--;)$a[a].update()}function cb(){for(var a=$a.length;a--;)$a[a].display&&$a[a].h()};function db(a,b){var d={};d.x=a.x-0;d.y=a.y-0;d.m=50;d.i=50;d.text="Satellite";d.h=function(){I.fillRect(d.x-25,d.y-25,50,50);z&&I.drawImage(z,d.x-z.width/2,d.y-z.height/2)};d.click=b;return d};var B=0,D=0,eb=0,fb=0,gb=0,hb=0,qb=0,rb=0,C=1,sb=1,E=2;function tb(){if(Xa||Wa)sb=ka(sb+(Xa?.1:-.1),.1,2);E=Math.min(1+(C-.1),2);Ta&&!ub.display&&(vb=!0,gb=B,hb=D,qb=t,rb=v);Ua&&vb?(eb=gb+(qb-t),fb=hb+(rb-v)):Va&&(vb=!1);var a=C;C+=.001>Math.abs(C-sb)?0:(sb-C)/5;a=C-a;.001<Math.abs(a)&&(B+=w*a,D+=x*a,eb+=w*a,fb+=x*a);B+=.001>Math.abs(B-eb)?0:(eb-B)/5;D+=.001>Math.abs(D-fb)?0:(fb-D)/5}function wb(){I.setTransform(1,0,0,1,0,0)}var vb;var xb="",u=aa.getElementById("c"),I=u.getContext("2d",{alpha:!1});yb();window.addEventListener("resize",yb,!1);function yb(){u.width=window.innerWidth;u.height=window.innerHeight;I.clearRect(0,0,u.width,u.height)}
function zb(){I.globalAlpha=1;for(var a=y.length;a--;){var b=y[a];b.g&&Ab(b);var d=Math.floor(4*C);b.l&&b.l[d]&&(d=b.l[d],I.save(),I.translate(b.x,b.y/E),I.scale(1,1/E),I.drawImage(d,0,0,d.width,d.height),I.scale(-1,1),I.drawImage(d,0,0),I.scale(1,-1),I.drawImage(d,0,0),I.scale(-1,1),I.drawImage(d,0,0),I.restore())}}
function Ab(a){var b=a.g;if(b){var d=b.c.l;d||(d=b.c.l=[]);var e=Math.floor(4*C);d=d[e];if(!d){d=document.createElement("CANVAS");var h=0;y.forEach(function(a){a.g&&a.g.c===b.c&&(h=Math.max(h,a.g.j+40))});d.width=h;d.height=h;b.c.l[e]=d;d.F=[]}if(!d.F[a.id]){e=.1+e/4;var g=d.getContext("2d");g.setLineDash([5/e,5/e]);g.beginPath();g.lineWidth=2/e;g.strokeStyle=a.color;g.globalAlpha=.6;g.arc(0,0,b.j,0,l/4,!1);g.stroke();g.setLineDash(Bb);d.F[a.id]=!0}}}var Bb=[];
function Cb(){I.globalAlpha=1;for(var a=y.length;a--;){var b=y[a];if(b.type===Db){var d=da(b,y[0]);I.save();I.translate(b.x,b.y/E);I.rotate(d);I.scale(.2,.2);I.drawImage(z,-z.width/2,-z.height/2)}else{if(!b.cache){var e=b.type===Eb,h=e?"#ffffff":b.color,g=e?50:10;d=b.size+g;var k=0,f=b.cache=document.createElement("CANVAS");f.width=2*d;f.height=2*d;f=b.cache.getContext("2d");e&&(k=1E3,f.shadowOffsetY=k);f.beginPath();f.fillStyle=h;f.shadowColor=b.color;f.shadowBlur=g;f.arc(d,d-k,b.size,0,l,!1);f.fill();
e&&(f.beginPath(),f.shadowColor="#FFF",f.shadowBlur=5,f.arc(d,d-k,b.size-5,0,l,!1),f.fill());if(!e)for(h=e=b.size,f.beginPath(),f.arc(d,d,b.size,0,2*Math.PI,!1),f.clip();e--;)f.beginPath(),f.globalAlpha=.05,f.fillStyle="#000",f.shadowColor="#000",f.shadowBlur=10,f.save(),f.transform(1,0,0,1,d-h/2+(b.size-h)/2,d),f.arc(0,0,2*h--,-l/4,l/4),f.fill(),f.restore()}d=da(b,y[0]);I.save();I.translate(b.x,b.y/E);I.rotate(d);b.H&&(d=1+.01*Math.sin(performance.now()/30),I.scale(d,d));I.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}I.restore()}}function Fb(){I.beginPath();for(var a=75*(E-1),b=0;b<J.length;b++)for(var d=J[b],e=b;e<J.length;e++){var h=J[e];if(h!=d&&ca(h,d)<=K.L){var g=d.y/E,k=h.y/E;I.moveTo(d.x,g);I.bezierCurveTo(d.x,g-a,h.x,k-a,h.x,k)}}I.globalAlpha=ka(.2/C,.2,.8);I.lineWidth=ka(1/C*2,1,4);I.strokeStyle="#0F0";I.stroke();I.globalAlpha=1};var Gb=document.createElement("CANVAS");Gb.width=512;Gb.height=512;var P=Gb.getContext("2d");P.shadowBlur=1;P.globalAlpha=.5;for(var Hb=300;Hb--;){var Ib=512*Math.random(),$b=512*Math.random(),ac=q(-1,100,90);P.fillStyle=ac;P.shadowColor=ac;P.beginPath();P.arc(Ib,$b,.5,0,2*Math.PI);P.fill()}var bc=I.createPattern(Gb,"repeat");
function cc(){var a=performance.now()/2E3;I.beginPath();I.rect(0,0,u.width,u.height);I.fillStyle=bc;I.translate(.5*u.width,.5*u.height);I.scale(.5,.5);I.translate(-B/25,-D/25);I.rotate(a/200);I.fill();I.rotate(-a/200);I.scale(2,2);I.translate(-B/50,-D/50);I.fill()}var dc=document.createElement("CANVAS"),ec=dc.getContext("2d",{alpha:!1});dc.width=512;dc.height=512;ec.beginPath();var fc=ec.createRadialGradient(256,256,0,256,256,256);fc.addColorStop(0,"#141e28");fc.addColorStop(1,"#000000");
ec.fillStyle=fc;ec.fillRect(0,0,512,512);var y=[],J=[],gc=[],Eb=0,Db=2;
function hc(a,b,d,e,h,g){void 0===g&&(g=0);var k={name:"Some Shithole Planet"};k.type=Eb;k.x=0;k.y=0;k.color=a;k.size=b;k.H=!1;k.id=y.length.toString();d&&(k.g={c:d,j:e,speed:h,angle:g});k.update=function(){if(k.g){var a=k.g;a.angle+=a.speed;k.x=a.j*Math.cos(a.angle)+a.c.x;k.y=a.j*Math.sin(a.angle)+a.c.y}};k.h=function(){var a=k.g;if(a){I.beginPath();I.globalAlpha=.4;I.strokeStyle=k.color;I.lineWidth=4/C;I.save();var b=1/E;I.transform(1,0,0,b,a.c.x,a.c.y*b);I.arc(0,0,a.j,a.angle-a.speed*a.j/2,a.angle,
0>a.speed);I.restore();I.stroke()}};y.push(k);return k}function ic(a,b,d,e,h,g){void 0===g&&(g=0);a=hc(a,b,d,e+b/2,h,g);a.name="Planet";a.type=1;a.update=ba(a.update,function(){});return a}function jc(a){void 0!==ea(kc,a,J)&&(a=hc(q(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=3,a.update=ba(a.update,function(){K.o+=K.M}))}var kc=4;function Q(a){var b=ea(lc,a,J);void 0!==b&&(a=hc(q(160,100,50),2,a,5*a.size,.01,b),a.name="Satellite",a.type=Db,a.index=J.length,J.push(a))}
var lc=3;function mc(a){var b=ea(nc,a,gc);void 0!==b&&(a=hc(q(33,100,50),2,a,7*a.size,.005,b),a.name="Defense Platform",a.type=4,a.index=gc.length,gc.push(a))}var nc=2;function Ca(a,b){this.x=a;this.y=b;this.speed=5;this.direction=0;this.target=y[0];R.push(this)}
Ca.prototype={update:function(){var a=da(this,this.target)-this.direction+l/2;this.direction+=.01*(a-Math.floor(a/l)*l-l/2);this.x-=this.speed*Math.cos(this.direction);this.y-=this.speed*Math.sin(this.direction);100>ca(this,this.target)&&R.splice(R.indexOf(this),1)},h:function(){I.save();I.translate(this.x,this.y/E-20*E);I.scale(.2,.2/E);I.rotate(this.direction);I.drawImage(xa,-xa.width/2,-xa.height/2);I.restore()}};var R=[];function oc(){for(var a=R.length;a--;)R[a].update()}
function pc(){for(var a=R.length;a--;)R[a].h()};var qc=!1,rc=60;
function sc(){var a=u.width/2,b=u.height/2;I.fillStyle="#FFF";I.textAlign="center";I.textBaseline="middle";I.shadowColor="#FFF";I.shadowBlur=50+2*Math.sin(performance.now()/100);I.font="small-caps 700 256px monospace";I.fillText("X",a,b-64);I.fillText("e o",a,b-90);I.shadowBlur=0;I.font="small-caps 700 32px monospace";Da?I.fillText("Loading music...",a,b+64):Fa?I.fillText("Loading sounds...",a,b+64):I.fillText("Click to continue!",a,b+64);I.font="small-caps 700 16px monospace";I.fillText("Created by",a,
u.height-68);I.fillText("ai Doge & Jack Oatley",a,u.height-48);I.fillText("for #js13k",a,u.height-28)};var ub=function(){var a=ab();a.buttons.push(db(a,function(){ua("choose a target");a.G()}));a.show=function(b){Ya=a;a.display=!0;a.target=b};a.G=function(){a.target=null;a.display=!1;Ya=null};a.J=function(){Ya==a&&la(a.x,a.y,a.m,a.i)?a.buttons.forEach(function(a){la(a.x,a.y,a.m,a.i)&&a.click()}):a.G()};a.h=function(){I.fillStyle="#141e28";I.fillRect(a.x-a.m/2,a.y-a.i/2,a.m,a.i);I.fillStyle="#ffffff";I.textAlign="center";I.font="24px monospace";I.fillText((K.c===a.target?"Base":"")+" "+a.target.name,
a.x,a.y-a.i/2+20);var b=a.target.cache;I.drawImage(b,a.x-b.width/2,a.y-b.height/2-a.i/4);a.buttons.forEach(function(a){a.h()})};return a}(),K=null,S=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);document.addEventListener("keypress",function(a){console.log(a.key);" "===a.key&&(3===S?S=1:S=3)});var tc=q(60,100,50),T=hc(tc,50,null,null,null,null);T.name="The Sun";T.type=Eb;T.H=!0;var U=ic(q(180,39,62),10,T,500,.003,c()*l),V={};V.c=U;V.M=.01;V.N=300;V.O=0;V.P=0;V.L=500;
V.o=0;K=V;ic(q(-1,60,70),5,U,100,-.002,c()*l);var W=ic(q(-1,60,70),20,T,1123,.0015,c()*l);ic(q(-1,60,70),5,W,8*W.size,.01,c()*l);ic(q(-1,60,70),10,W,9*W.size,.005,null);ic(q(-1,60,70),30,T,2532,-.001,c()*l);jc(U);jc(W);Q(U);Q(T);Q(T);Q(T);Q(W);Q(W);Q(W);mc(U);mc(U);mc(U);mc(W);var uc=performance.now(),vc=1E3/60,wc=0,xc=0,yc=[];
(function zc(a){requestAnimationFrame(zc);var d=uc+vc;yc.push(1/((a-wc)/1E3));wc=a;if(60<yc.length){var e=0,h=1E3,g=0;yc.shift();yc.forEach(function(a){e+=a;h=Math.min(h,a);g=Math.max(g,a)});xc=Math.floor(e/60)+", "+~~h+" - "+~~g}a>d&&(Ac(Math.min(Math.floor((a-uc)/vc),60)),Bc(),uc=a)})(uc);
function Ac(a){if(0===S)0<rc--||(Da?La():Fa?Sa():(qc||(qc=!0,ua("Welcum to Exo")),Ta&&(S=1)));else{xb="";tb();bb();1===S&&(y.forEach(function(a){a.update()}),za--||(Ba(),za=300,ua(Aa[Math.floor(Math.random()*Aa.length)])),oc());var b=ma();64>ca(b,{x:w,y:x})&&(xb=b.name,Ya||!Va||Ua||1!=b.type||(ua("selected "+b.name),ub.show(b),wa.play()))}Wa=Xa=Va=Ta=!1;--a&&Ac(a)}
function Bc(){wb();I.clearRect(0,0,u.width,u.height);I.drawImage(dc,Math.floor(.5*u.width-B-2048),Math.floor(.5*u.height-D-2048),4096,4096);cc();if(0===S)wb(),sc();else{I.setTransform(C,0,0,C,-B+u.width/2,-D+u.height/2);y.forEach(function(a){a.h()});I.globalAlpha=1;zb();Cb();pc();Fb();var a=ma();64>ca(a,{x:w,y:x})&&(I.beginPath(),I.moveTo(a.x,a.y/E),I.lineTo(w,x/E),I.strokeStyle="#ffffff",I.stroke());I.setTransform(1,0,0,1,u.width/2,u.height/2);wb();cb();I.fillStyle="#FFF";I.textAlign="center";I.textBaseline=
"middle";I.font="small-caps 700 32px monospace";I.fillText("next wave in",u.width/2,32);I.font="700 64px monospace";I.fillText(~~(za/60),u.width/2,96);I.font="small-caps 700 32px monospace";I.fillText("minerals",u.width/2+300,48);I.fillText(~~K.o,u.width/2+300,80);I.font="14px monospace";I.textBaseline="top";I.textAlign="left";I.fillStyle="#fff";I.fillText("#js13k tower defense prototype",20,20);I.fillText("https://github.com/scorp200/td13k",20,40);I.fillText("framerate: "+xc,20,60);I.fillText("mouse (gui): "+
t+", "+v,20,80);I.fillText("mouse (view): "+w+", "+x,20,100);I.fillText("planet name: "+xb,20,120);I.fillText("view x: "+B,20,160);I.fillText("view y: "+D,20,180);I.fillText("view zoom: "+C,20,200);I.fillText("view tilt: "+E,20,220)}};}).call(this);
