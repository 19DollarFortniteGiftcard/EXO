(function(){var aa=document;var c=Math.random,l=2*Math.PI;function ba(a,b){return function(){a();b()}}function ca(a,b){var d=a.x-b.x;a=a.y-b.y;return Math.sqrt(d*d+a*a)}function ia(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ja(a,b,d){var e=0;d.forEach(function(d){d.g.c==b&&(e+=l/a)});if(!(e>=l))return e}function q(a,b,d){return"hsl("+(0>a?360*c():a)+","+(0>b?100*c():b)+"%,"+(0>d?100*c():d)+"%)"}function ka(a,b,d){return a>d?d:a<b?b:a}
function la(a,b,d,e){var h=t-u.width/2,g=v-u.height/2;return h>a-d/2&&h<a+d/2&&g>b-e/2&&g<b+e/2}function ra(){for(var a={x:w,y:x},b=999999,d=y[0],e=y.length;e--;){var h=ca(y[e],a);h<b&&(b=h,d=e)}return y[d]};var sa=!1,ta;window.speechSynthesis&&(sa=!0,ta=window.speechSynthesis.getVoices(),0>=ta.length&&(window.speechSynthesis.onvoiceschanged=function(){ta=window.speechSynthesis.getVoices()}));function ua(a){sa&&(window.speechSynthesis.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=ta[3],window.speechSynthesis.speak(a))};function va(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],d,e,h,g,k;this.A=function(a){d=a;e=a.C;h=0;g=a.u*a.s*(e+1)*2;k=new Int32Array(g)};this.D=function(){var f,da,L,r,V,M=new Int32Array(g),n=d.K[h],W=d.u,ma=d.s,La=0,na=0,F;var G=!1;var oa=[];for(da=0;da<=e;++da){var ea=n.p[da];for(L=0;L<ma;++L){if(V=ea?n.f[ea-1].b[L]:0)n.a[V-1]=n.f[ea-1].b[L+ma]||0,16>V&&(oa=[]);var Ib=b[n.a[15]],Jb=n.a[16]/
512,Kb=Math.pow(2,n.a[17]-9)/W,Lb=n.a[18],hb=n.a[19],Mb=135.82764118168*n.a[20]/44100,Nb=1-n.a[21]/255,Ma=1E-5*n.a[22],Ob=n.a[23]/32,Pb=n.a[24]/512,Qb=6.283184*Math.pow(2,n.a[25]-9)/W,ib=n.a[26]/255,Na=n.a[27]*W&-2;V=(da*ma+L)*W;for(r=0;4>r;++r)if(f=ea?n.f[ea-1].n[L+r*ma]:0){if(!oa[f]){var m=oa;var N=f;var jb=F=void 0,pa,H,p=n,kb=f,Rb=b[p.a[0]],Sb=p.a[1],Tb=p.a[3],Ub=b[p.a[4]],Vb=p.a[5],Wb=p.a[8],lb=p.a[9],X=p.a[10]*p.a[10]*4,qa=p.a[11]*p.a[11]*4,Oa=p.a[12]*p.a[12]*4,Xb=1/Oa,fa=p.a[13],Yb=W*Math.pow(2,
2-p.a[14]),mb=new Int32Array(X+qa+Oa),nb=0,ob=0;for(pa=H=0;H<X+qa+Oa;H++,pa++){0<=pa&&(fa=fa>>8|(fa&255)<<4,pa-=Yb,jb=.003959503758*Math.pow(2,(kb+(fa&15)+p.a[2]-128-128)/12),F=.003959503758*Math.pow(2,(kb+(fa&15)+p.a[6]-128-128)/12)*(1+8E-4*p.a[7]));var O=1;H<X?O=H/X:H>=X+qa&&(O-=(H-X-qa)*Xb);var ha=jb;Tb&&(ha*=O*O);nb+=ha;var Pa=Rb(nb)*Sb;ha=F;Wb&&(ha*=O*O);ob+=ha;Pa+=Ub(ob)*Vb;lb&&(Pa+=(2*Math.random()-1)*lb);mb[H]=80*Pa*O|0}m[N]=mb}N=oa[f];f=0;for(m=2*V;f<N.length;f++,m+=2)M[m]+=N[f]}for(f=0;f<
W;f++)r=2*(V+f),(m=M[r])||G?(G=Mb,Lb&&(G*=Ib(Kb*r)*Jb+.5),G=1.5*Math.sin(G),La+=G*na,m=Nb*(m-na)-La,na+=G*m,m=3==hb?na:1==hb?m:La,Ma&&(m*=Ma,m=1>m?-1<m?a(.25*m):-1:1,m/=Ma),m*=Ob,G=1E-5<m*m,N=Math.sin(Qb*r)*Pb+.5,F=m*(1-N),m*=N):F=0,r>=Na&&(F+=M[r-Na+1]*ib,m+=M[r-Na]*ib),M[r]=F|0,M[r+1]=m|0,k[r]+=F|0,k[r+1]+=m|0}}h++;return h/d.I};this.B=function(){var a=44+2*g-8,b=a-36,d=new Uint8Array(44+2*g);d.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<g;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;d[b++]=e&255;d[b++]=e>>8&255}return d}};var wa={K:[{a:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],b:[]}]}],u:5513,s:1,C:0,I:1};var z=document.createElement("CANVAS"),A=z.getContext("2d");z.width=20;z.height=140;A.fillStyle="#dddddd";A.fillRect(8,50,4,40);A.fillStyle="#639bff";A.fillRect(2,0,15,60);A.fillRect(2,80,15,60);A.fillStyle="#9badb7";A.fillRect(2,65,17,10);A.fillRect(0,66,2,8);var B=document.createElement("CANVAS"),C=B.getContext("2d");B.width=64;B.height=64;C.fillStyle="#ff0000";C.moveTo(0,32);C.lineTo(64,0);C.lineTo(48,32);C.lineTo(64,64);C.fill();var xa=0;function ya(){for(var a=100;a--;){var b=Math.random()*l;(new za(3E3*Math.cos(b),3E3*Math.sin(b))).direction=b}};var Aa=!0,Ba=[],Ca=!0,Da=[],Ea=wa,Fa=new va;Fa.w=new Audio;Fa.A(Ea);Da.push(Fa);wa=Fa.w;var Ga=new va;Ga.v=!0;
Ga.A({K:[{a:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],b:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,
13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],b:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],b:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,
,,,,,,,111,,,,,,,,99],b:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],b:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],b:[]},{n:[],b:[]}]},{a:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],b:[]},{n:[147],b:[]}]},{a:[0,0,140,0,0,0,140,0,0,
60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,
,147,,147,,,147,,147,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{a:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],b:[]},{n:[114],b:[]},{n:[111],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{a:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],
b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],b:[]},{n:[147],b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],b:[]}]},{a:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],b:[]},{n:[159,
,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{a:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,
2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],b:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],b:[]}]},
{a:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],b:[]}]}],u:5513,s:32,C:26,I:8});Ba.push(Ga);var Ha=0;function Ia(){for(var a=0;a<Ba.length;a++){var b=Ba[a];b.v&&(b.v=1<=b.D(),Ha+=1,b=b.B(),b=URL.createObjectURL(new Blob([b],{type:"audio/wav"})),b=new Audio(b),b.addEventListener("ended",function(){this.currentTime=0;this.play()},!1),b.play(),b.volume=.5)}Ha>=Ba.length&&(Aa=!1)}var Ja=0;
function Ka(){for(var a=0;a<Da.length;a++){var b=Da[a];if(1<=b.D()){Ja+=1;var d=b.B();d=URL.createObjectURL(new Blob([d],{type:"audio/wav"}));b.w.src=d}}Ja>=Da.length&&(Ca=!1)};var t=0,v=0,w=0,x=0,Qa=!1,Ra=!1,Sa=!1,Ta=!1,Ua=!1,Va=null,Wa;window.addEventListener("mousemove",function(a){var b=u.getBoundingClientRect();t=a.clientX-b.left;v=a.clientY-b.top;w=(t+D-u.width/2)/E;x=(v+I-u.height/2)*J/E;Wa&&(Ra=!0)},!1);window.addEventListener("mousedown",function(){Wa=Qa=!0},!1);window.addEventListener("mouseup",function(){Wa=!1;Ra||(Sa=!0);Ra=!1},!1);window.addEventListener("wheel",function(a){Ta=0<a.deltaY;Ua=0>a.deltaY},!1);var Xa=[];function Ya(){var a=-u.width/4,b={};Xa.push(b);b.x=a;b.y=0;b.m=300;b.i=400;b.cache=null;b.display=!1;b.buttons=[];b.update=function(){Qa&&b.J()};b.J=function(){};b.h=function(){};b.show=function(){};return b};function Za(a,b){var d={};d.x=a.x-0;d.y=a.y-0;d.m=50;d.i=50;d.text="Satellite";d.h=function(){K.fillRect(d.x-25,d.y-25,50,50);z&&K.drawImage(z,d.x-z.width/2,d.y-z.height/2)};d.click=b;return d};var D=0,I=0,$a=0,ab=0,bb=0,cb=0,db=0,eb=0,E=1,fb=1,J=2;function gb(){if(Ua||Ta)fb=ka(fb+(Ua?.1:-.1),.1,2);J=Math.min(1+(E-.1),2);Qa&&!pb.display&&(qb=!0,bb=D,cb=I,db=t,eb=v);Ra&&qb?($a=bb+(db-t),ab=cb+(eb-v)):Sa&&(qb=!1);var a=E;E+=.001>Math.abs(E-fb)?0:(fb-E)/5;a=E-a;.001<Math.abs(a)&&(D+=w*a,I+=x*a,$a+=w*a,ab+=x*a);D+=.001>Math.abs(D-$a)?0:($a-D)/5;I+=.001>Math.abs(I-ab)?0:(ab-I)/5}function rb(){K.setTransform(1,0,0,1,0,0)}var qb;var sb="",u=aa.getElementById("c"),K=u.getContext("2d",{alpha:!1});tb();window.addEventListener("resize",tb,!1);function tb(){u.width=window.innerWidth;u.height=window.innerHeight;K.clearRect(0,0,u.width,u.height)}
function ub(){K.globalAlpha=1;for(var a=y.length;a--;){var b=y[a];b.g&&vb(b);var d=Math.floor(4*E);b.l&&b.l[d]&&(d=b.l[d],K.save(),K.translate(b.x,b.y/J),K.scale(1,1/J),K.drawImage(d,0,0,d.width,d.height),K.scale(-1,1),K.drawImage(d,0,0),K.scale(1,-1),K.drawImage(d,0,0),K.scale(-1,1),K.drawImage(d,0,0),K.restore())}}
function vb(a){var b=a.g;if(b){var d=b.c.l;d||(d=b.c.l=[]);var e=Math.floor(4*E);d=d[e];if(!d){d=document.createElement("CANVAS");var h=0;y.forEach(function(a){a.g&&a.g.c===b.c&&(h=Math.max(h,a.g.j+40))});d.width=h;d.height=h;b.c.l[e]=d;d.F=[]}if(!d.F[a.id]){e=.1+e/4;var g=d.getContext("2d");g.setLineDash([5/e,5/e]);g.beginPath();g.lineWidth=2/e;g.strokeStyle=a.color;g.globalAlpha=.6;g.arc(0,0,b.j,0,l/4,!1);g.stroke();g.setLineDash(wb);d.F[a.id]=!0}}}var wb=[];
function xb(){K.globalAlpha=1;for(var a=y.length;a--;){var b=y[a];if(b.type===yb){var d=ia(b,y[0]);K.save();K.translate(b.x,b.y/J);K.rotate(d);K.scale(.2,.2);K.drawImage(z,-z.width/2,-z.height/2)}else{if(!b.cache){var e=b.type===zb,h=e?"#ffffff":b.color,g=e?50:10;d=b.size+g;var k=0,f=b.cache=document.createElement("CANVAS");f.width=2*d;f.height=2*d;f=b.cache.getContext("2d");e&&(k=1E3,f.shadowOffsetY=k);f.beginPath();f.fillStyle=h;f.shadowColor=b.color;f.shadowBlur=g;f.arc(d,d-k,b.size,0,l,!1);f.fill();
e&&(f.beginPath(),f.shadowColor="#FFF",f.shadowBlur=5,f.arc(d,d-k,b.size-5,0,l,!1),f.fill());if(!e)for(h=e=b.size,f.beginPath(),f.arc(d,d,b.size,0,2*Math.PI,!1),f.clip();e--;)f.beginPath(),f.globalAlpha=.05,f.fillStyle="#000",f.shadowColor="#000",f.shadowBlur=10,f.save(),f.transform(1,0,0,1,d-h/2+(b.size-h)/2,d),f.arc(0,0,2*h--,-l/4,l/4),f.fill(),f.restore()}d=ia(b,y[0]);K.save();K.translate(b.x,b.y/J);K.rotate(d);b.H&&(d=1+.01*Math.sin(performance.now()/30),K.scale(d,d));K.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}K.restore()}}function Ab(){K.beginPath();for(var a=75*(J-1),b=0;b<P.length;b++)for(var d=P[b],e=b;e<P.length;e++){var h=P[e];if(h!=d&&ca(h,d)<=Q.L){var g=d.y/J,k=h.y/J;K.moveTo(d.x,g);K.bezierCurveTo(d.x,g-a,h.x,k-a,h.x,k)}}K.globalAlpha=ka(.2/E,.2,.8);K.lineWidth=ka(1/E*2,1,4);K.strokeStyle="#0F0";K.stroke();K.globalAlpha=1};var Bb=document.createElement("CANVAS");Bb.width=512;Bb.height=512;var R=Bb.getContext("2d");R.shadowBlur=1;R.globalAlpha=.5;for(var Cb=300;Cb--;){var Db=512*Math.random(),Eb=512*Math.random(),Fb=q(-1,100,90);R.fillStyle=Fb;R.shadowColor=Fb;R.beginPath();R.arc(Db,Eb,.5,0,2*Math.PI);R.fill()}var Gb=K.createPattern(Bb,"repeat");
function Hb(){var a=performance.now()/2E3;K.beginPath();K.rect(0,0,u.width,u.height);K.fillStyle=Gb;K.translate(.5*u.width,.5*u.height);K.scale(.5,.5);K.translate(-D/25,-I/25);K.rotate(a/200);K.fill();K.rotate(-a/200);K.scale(2,2);K.translate(-D/50,-I/50);K.fill()}var Zb=document.createElement("CANVAS"),$b=Zb.getContext("2d",{alpha:!1});Zb.width=512;Zb.height=512;$b.beginPath();var ac=$b.createRadialGradient(256,256,0,256,256,256);ac.addColorStop(0,"#141e28");ac.addColorStop(1,"#000000");
$b.fillStyle=ac;$b.fillRect(0,0,512,512);var y=[],P=[],bc=[],zb=0,yb=2;
function cc(a,b,d,e,h,g){void 0===g&&(g=0);var k={name:"Some Shithole Planet"};k.type=zb;k.x=0;k.y=0;k.color=a;k.size=b;k.H=!1;k.id=y.length.toString();d&&(k.g={c:d,j:e,speed:h,angle:g});k.update=function(){if(k.g){var a=k.g;a.angle+=a.speed;k.x=a.j*Math.cos(a.angle)+a.c.x;k.y=a.j*Math.sin(a.angle)+a.c.y}};k.h=function(){var a=k.g;if(a){K.beginPath();K.globalAlpha=.4;K.strokeStyle=k.color;K.lineWidth=4/E;K.save();var b=1/J;K.transform(1,0,0,b,a.c.x,a.c.y*b);K.arc(0,0,a.j,a.angle-a.speed*a.j/2,a.angle,
0>a.speed);K.restore();K.stroke()}};y.push(k);return k}function dc(a,b,d,e,h,g){void 0===g&&(g=0);a=cc(a,b,d,e+b/2,h,g);a.name="Planet";a.type=1;a.update=ba(a.update,function(){});return a}function ec(a){void 0!==ja(fc,a,P)&&(a=cc(q(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=3,a.update=ba(a.update,function(){Q.o+=Q.M}))}var fc=4;function S(a){var b=ja(gc,a,P);void 0!==b&&(a=cc(q(160,100,50),2,a,5*a.size,.01,b),a.name="Satellite",a.type=yb,a.index=P.length,P.push(a))}
var gc=3;function hc(a){var b=ja(ic,a,bc);void 0!==b&&(a=cc(q(33,100,50),2,a,7*a.size,.005,b),a.name="Defense Platform",a.type=4,a.index=bc.length,bc.push(a))}var ic=2;function za(a,b){this.x=a;this.y=b;this.speed=5;this.direction=0;this.target=y[0];jc.push(this)}
za.prototype={update:function(){var a=ia(this,this.target)-this.direction+l/2;this.direction+=.01*(a-Math.floor(a/l)*l-l/2);this.x-=this.speed*Math.cos(this.direction);this.y-=this.speed*Math.sin(this.direction);100>ca(this,this.target)&&jc.splice(jc.indexOf(this),1)},h:function(){K.save();K.translate(this.x,this.y/J-20*J);K.scale(.2,.2/J);K.rotate(this.direction);K.drawImage(B,-B.width/2,-B.height/2);K.restore()}};var jc=[];function kc(){for(var a=jc.length;a--;)jc[a].update()};var lc=!1,mc=60;
function nc(){var a=u.width/2,b=u.height/2;K.fillStyle="#FFFFFF";K.textAlign="center";K.textBaseline="middle";K.shadowColor="#FFFFFF";K.shadowBlur=50+2*Math.sin(performance.now()/100);K.font="small-caps 700 256px monospace";K.fillText("X",a,b-64);K.fillText("e o",a,b-90);K.shadowBlur=0;K.font="small-caps 700 32px monospace";Aa?K.fillText("Loading music...",a,b+64):Ca?K.fillText("Loading sounds...",a,b+64):K.fillText("Click to continue!",a,b+64);K.font="small-caps 700 16px monospace";K.fillText("Created by",
a,u.height-68);K.fillText("ai Doge & Jack Oatley",a,u.height-48);K.fillText("for #js13k",a,u.height-28)};var pb=function(){var a=Ya();a.buttons.push(Za(a,function(){ua("choose a target");a.G()}));a.show=function(b){Va=a;a.display=!0;a.target=b};a.G=function(){a.target=null;a.display=!1;Va=null};a.J=function(){Va==a&&la(a.x,a.y,a.m,a.i)?a.buttons.forEach(function(a){la(a.x,a.y,a.m,a.i)&&a.click()}):a.G()};a.h=function(){K.fillStyle="#141e28";K.fillRect(a.x-a.m/2,a.y-a.i/2,a.m,a.i);K.fillStyle="#ffffff";K.textAlign="center";K.font="24px monospace";K.fillText((Q.c===a.target?"Base":"")+" "+a.target.name,
a.x,a.y-a.i/2+20);var b=a.target.cache;K.drawImage(b,a.x-b.width/2,a.y-b.height/2-a.i/4);a.buttons.forEach(function(a){a.h()})};return a}(),Q=null,oc=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var pc=q(60,100,50),T=cc(pc,50,null,null,null,null);T.name="The Sun";T.type=zb;T.H=!0;var U=dc(q(180,39,62),10,T,500,.003,c()*l),Y={};Y.c=U;Y.M=.01;Y.N=300;Y.O=0;Y.P=0;Y.L=500;Y.o=0;Q=Y;dc(q(-1,60,70),5,U,100,-.002,c()*l);var Z=dc(q(-1,60,70),20,T,1123,.0015,c()*l);
dc(q(-1,60,70),5,Z,8*Z.size,.01,c()*l);dc(q(-1,60,70),10,Z,9*Z.size,.005,null);dc(q(-1,60,70),30,T,2532,-.001,c()*l);ec(U);ec(Z);S(U);S(T);S(T);S(T);S(Z);S(Z);S(Z);hc(U);hc(U);hc(U);hc(Z);var qc=performance.now(),rc=1E3/60,sc=0,tc=0,uc=[];
(function vc(a){requestAnimationFrame(vc);var d=qc+rc;uc.push(1/((a-sc)/1E3));sc=a;if(60<uc.length){var e=0,h=1E3,g=0;uc.shift();uc.forEach(function(a){e+=a;h=Math.min(h,a);g=Math.max(g,a)});tc=Math.floor(e/60)+", "+~~h+" - "+~~g}a>d&&(wc(Math.min(Math.floor((a-qc)/rc),60)),xc(),qc=a)})(qc);
function wc(a){if(0===oc)0<mc--||(Aa?Ia():Ca?Ka():(lc||(lc=!0,ua("Welcum to Exo")),Qa&&(oc=1)));else if(1===oc){sb="";gb();Xa.forEach(function(a){a.display&&a.update()});y.forEach(function(a){a.update()});xa--||(ya(),xa=300);kc();var b=ra();64>ca(b,{x:w,y:x})&&(sb=b.name,Va||!Sa||Ra||1!=b.type||(ua("selected "+b.name),pb.show(b),wa.play()))}Ta=Ua=Sa=Qa=!1;--a&&wc(a)}
function xc(){rb();K.clearRect(0,0,u.width,u.height);K.drawImage(Zb,Math.floor(.5*u.width-D-2048),Math.floor(.5*u.height-I-2048),4096,4096);Hb();if(0===oc)rb(),nc();else{K.setTransform(E,0,0,E,-D+u.width/2,-I+u.height/2);y.forEach(function(a){a.h()});K.globalAlpha=1;ub();xb();jc.forEach(function(a){a.h()});Ab();var a=ra();64>ca(a,{x:w,y:x})&&(K.beginPath(),K.moveTo(a.x,a.y/J),K.lineTo(w,x/J),K.strokeStyle="#ffffff",K.stroke());K.setTransform(1,0,0,1,u.width/2,u.height/2);Xa.forEach(function(a){a.display&&
a.h()});rb();K.font="14px monospace";K.textBaseline="top";K.textAlign="left";K.fillStyle="#fff";K.fillText("#js13k tower defense prototype",20,20);K.fillText("https://github.com/scorp200/td13k",20,40);K.fillText("framerate: "+tc,20,60);K.fillText("mouse (gui): "+t+", "+v,20,80);K.fillText("mouse (view): "+w+", "+x,20,100);K.fillText("planet name: "+sb,20,120);K.fillText("view x: "+D,20,160);K.fillText("view y: "+I,20,180);K.fillText("view zoom: "+E,20,200);K.fillText("view tilt: "+J,20,220);K.fillText("minerals: "+
Math.floor(100*Q.o)/100,20,260)}};}).call(this);
