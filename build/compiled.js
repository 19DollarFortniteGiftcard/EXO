var d=document,g=d.addEventListener,k=d.getElementById("c"),n=k.getContext("2d");p();g("resize",p);function p(){k.width=window.innerWidth;k.height=window.innerHeight;n.clearRect(0,0,k.width,k.height)}function q(c,f,e,l,m,t,u,h,b,a,v,w,x,y,z){void 0===h&&(h="ff");void 0===w&&(w=0);void 0===x&&(x=r);void 0===y&&(y=0);void 0===z&&(z=!1);void 0===v&&(v=0);c.beginPath();c[f+"Style"]=u+h;c.lineWidth=b;c.shadowColor=a;c.shadowBlur=v;c.ellipse(e,l,m,m*(t?.5:1),y,w,x,z);c[f]()};var A=[];
function B(c,f,e,l,m,t,u,h){h=void 0===h?0:h;var b={};b.x=e;b.y=l;b.color=c;b.size=f;b.c=!1;m&&(b.f={a:m,b:t,speed:u,angle:h});b.update=function(){if(b.f){var a=b.f;a.angle+=a.speed;b.x=a.b*Math.cos(a.angle)+a.a.x;b.y=.5*a.b*Math.sin(a.angle)+a.a.y}};b.g=function(){var a=b.f;a&&(n.setLineDash([5,5]),q(n,"stroke",a.a.x,a.a.y,a.b,!0,b.color,"33",1),n.setLineDash([]));(a=b.f)&&q(n,"stroke",a.a.x,a.a.y,a.b,!0,b.color,"33",3,b.color,5,a.angle-a.speed*a.b,a.angle,0,0>a.speed);if(!b.cache){a=document.createElement("CANVAS");a.width=
256;a.height=256;b.cache=a;a=b.cache.getContext("2d");var c=b.c?"#ffffff":b.color,f=b.c?50:b.size/10;b.c&&(a.filter="blur(4px)");q(a,"fill",128,128,b.size,!1,c,"ff",0,b.color,f);b.f&&(a.filter="blur(3px)",q(a,"fill",128,128,b.size,!1,"#000000","88",0,b.color,2,-r/4,r/4));a.filter="none"}a=A[0];a=Math.atan2(2*(b.y-a.y),b.x-a.x);n.translate(b.x,b.y);n.rotate(a);b.c&&(a=1+.03*C(),n.scale(a,a));n.drawImage(b.cache,-128,-128);n.setTransform(1,0,0,1,0,0)};A.push(b);return b};var C=Math.random,r=2*Math.PI,D=k.width,E=k.height;g("contextmenu",function(c){c.preventDefault()});var F=function(c,f,e,l){c=B(c,f,e,l,null,null,null);c.c=!0;c.update=function(){};return c}("#ffe200",38,D/2,E/2),G=B("#77c3c3",10,0,0,F,200,.005,0);B("#666666",5,0,0,G,50,-.01,0);var H=B("#f64749",20,0,0,F,500,.0025,0);B("#ff0055",5,0,0,H,80,.05,0);var I=B("#77ff55",10,0,0,H,150,.005,0);B("#666666",5,0,0,I,50,-.01,0);
(function(){var c={x:0,y:0};g("mousemove",function(f){var e=k.getBoundingClientRect();c.x=f.clientX-e.left;c.y=f.clientY-e.top});g("mousedown",function(c){c.preventDefault()});return c})();var J=performance.now(),K=1E3/60,L=0;(function M(c){requestAnimationFrame(M);var e=J+K;L=~~(1/((c-J)/1E3));c>e&&(e=Math.floor((c-J)/K),N(Math.min(e,60)),J=c);O()})();function N(c){A.forEach(function(c){c.update()});--c&&N(c)}
function O(){n.clearRect(0,0,D,E);A.forEach(function(c){c.g()});n.font="14px monospace";n.textBaseline="top";n.fillStyle="#ffffff";n.fillText("#js13k tower defense prototype",20,20);n.fillText("framerate: "+L,20,40)};
