(function() {var ba=aa(),c=null,ha=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var ia=h(60,100,50),t=r(ia,50,null,null,null);t.name=t.type="the sun";t.j=!0;var x=u(h(180,39,62),10,t,500,.003,v()*w),y={};y.c=x;y.L=.01;y.M=300;y.N=0;y.O=0;y.K=1E3;y.s=0;c=y;u(h(-1,60,70),5,x,100,-.002,v()*w);var z=u(h(-1,60,70),20,t,1123,.0015,v()*w);u(h(-1,60,70),5,z,8*z.size,.01,v()*w);u(h(-1,60,70),10,z,9*z.size,.005);u(h(-1,60,70),30,t,2532,-.001,v()*w);ja(x);ja(z);A(x);A(t);A(t);A(t);A(z);A(z);
A(z);ka(x);ka(x);ka(x);ka(z);var la=performance.now(),ma=1E3/60,na=0,oa=0,pa=[];(function qa(a){requestAnimationFrame(qa);var d=la+ma;pa.push(1/((a-na)/1E3));na=a;if(60<pa.length){var g=0,f=1E3,e=0;pa.shift();pa.forEach(function(a){g+=a;f=Math.min(f,a);e=Math.max(e,a)});oa=Math.floor(g/60)+", "+~~f+" - "+~~e}a>d&&(ra(Math.min(Math.floor((a-la)/ma),60)),sa(),la=a)})(la);
function ra(a){0===ha?0<ta--||(za?Aa():Ba?Ca():(Da||(Da=!0,Ea("Welcum to Exo")),Fa&&(ha=1))):(Ga="",Ha(),Ia.forEach(function(a){a.display&&a.update()}),B.forEach(function(a){a.update()}));var b=Ja();64>Ka(b,{x:C,y:D})&&(Ga=b.name,La&&(Ea("selected "+b.name),ba.show(b),Ma.play()));Na=Oa=La=Fa=!1;--a&&ra(a)}
function sa(){Pa();E.clearRect(0,0,F.width,F.height);E.drawImage(Va,Math.floor(.5*F.width-J-2048),Math.floor(.5*F.height-K-2048),4096,4096);Wa();if(0===ha)Pa(),Xa();else{E.setTransform(L,0,0,L,-J+F.width/2,-K+F.height/2);B.forEach(function(a){a.l()});Ya();Za();$a();var a=Ja();64>Ka(a,{x:C,y:D})&&(E.beginPath(),E.moveTo(a.x,a.y),E.lineTo(C,D),E.strokeStyle="#ffffff",E.stroke());E.setTransform(1,0,0,1,F.width/2,F.height/2);Ia.forEach(function(a){a.display&&a.l()});Pa();E.font="14px monospace";E.textBaseline=
"top";E.textAlign="left";E.fillStyle="#ffffff";E.fillText("#js13k tower defense prototype",20,20);E.fillText("https://github.com/scorp200/td13k",20,40);E.fillText("framerate: "+oa,20,60);E.fillText("mouse (gui): "+M+", "+N,20,80);E.fillText("mouse (view): "+C+", "+D,20,100);E.fillText("planet name: "+Ga,20,120);E.fillText("view x: "+J,20,160);E.fillText("view y: "+K,20,180);E.fillText("view zoom: "+L,20,200);E.fillText("view tilt: "+S,20,220);E.fillText("minerals: "+Math.floor(100*c.s)/100,20,260)}}
;var J=0,K=0,ab=0,bb=0,cb=0,db=0,eb=0,fb=0,L=1,gb=1,S=2;function Ha(){if(Oa||Na)gb=hb(gb+(Oa?.1:-.1),.1,2);S=Math.min(1+(L-.1),2);Fa&&!ba.display&&(ib=!0,cb=J,db=K,eb=M,fb=N);jb&&ib?(ab=cb+(eb-M),bb=db+(fb-N)):La&&(ib=!1);var a=L;L+=.001>Math.abs(L-gb)?0:(gb-L)/5;a=L-a;.001<Math.abs(a)&&(J+=C*a,K+=D*a,ab+=C*a,bb+=D*a);J+=.001>Math.abs(J-ab)?0:(ab-J)/5;K+=.001>Math.abs(K-bb)?0:(bb-K)/5}function Pa(){E.setTransform(1,0,0,1,0,0)}var ib;var kb=document.createElement("CANVAS");kb.width=512;kb.height=512;var T=kb.getContext("2d");T.shadowBlur=1;T.globalAlpha=.5;for(var lb=300;lb--;){var mb=512*Math.random(),nb=512*Math.random(),ob=h(-1,100,90);T.fillStyle=ob;T.shadowColor=ob;T.beginPath();T.arc(mb,nb,.5,0,2*Math.PI);T.fill()}var pb=E.createPattern(kb,"repeat");
function Wa(){var a=performance.now()/2E3;E.beginPath();E.rect(0,0,F.width,F.height);E.fillStyle=pb;E.translate(.5*F.width,.5*F.height);E.scale(.5,.5);E.translate(-J/25,-K/25);E.rotate(a/200);E.fill();E.rotate(-a/200);E.scale(2,2);E.translate(-J/50,-K/50);E.fill()}var Va=document.createElement(yb),zb=Va.getContext("2d",{alpha:!1});Va.width=512;Va.height=512;zb.beginPath();var Ab=zb.createRadialGradient(256,256,0,256,256,256);Ab.addColorStop(0,"#141e28");Ab.addColorStop(1,"#000000");zb.fillStyle=Ab;
zb.fillRect(0,0,512,512);var Ga="",F=Bb.getElementById("c"),E=F.getContext("2d",{alpha:!1});Cb();window.addEventListener("resize",Cb,!1);function Cb(){F.width=window.innerWidth;F.height=window.innerHeight;E.clearRect(0,0,F.width,F.height)}
function Ya(){E.globalAlpha=1;for(var a=0;a<B.length;a++){var b=B[a];b.g&&Db(b);var d=Math.floor(4*L);b.m&&b.m[d]&&(d=b.m[d],E.save(),E.translate(b.x,b.y),E.scale(1,1/S),E.drawImage(d,0,0,d.width,d.height),E.scale(-1,1),E.drawImage(d,0,0),E.scale(1,-1),E.drawImage(d,0,0),E.scale(-1,1),E.drawImage(d,0,0),E.restore())}}
function Db(a){var b=a.g;if(b){var d=b.c.m;d||(d=b.c.m=[]);var g=Math.floor(4*L);d=d[g];if(!d){d=document.createElement("CANVAS");var f=0;B.forEach(function(a){a.g&&a.g.c===b.c&&(f=Math.max(f,a.g.i+40))});d.width=f;d.height=f;b.c.m[g]=d;d.F=[]}if(!d.F[a.id]){g=.1+g/4;var e=d.getContext("2d");e.setLineDash([5/g,5/g]);e.beginPath();e.lineWidth=2/g;e.strokeStyle=a.color;e.globalAlpha=.6;e.arc(0,0,b.i,0,w/4,!1);e.stroke();e.setLineDash(Eb);d.F[a.id]=!0}}}var Eb=[];
function Za(){E.globalAlpha=1;for(var a=0;a<B.length;a++){var b=B[a];if("satellite"===b.type){var d=Fb(b);E.save();E.translate(b.x,b.y);E.rotate(d);E.scale(.2,.2);E.drawImage(Gb,-Gb.width/2,-Gb.height/2)}else{if(!b.cache){var g=b.j?Hb:b.color,f=b.j?50:10;d=b.size+f;var e=b,k=2*d,p=Bb.createElement(yb);p.width=2*d;p.height=k;e.cache=p;e=b.cache.getContext("2d");b.j&&(e.filter="blur(4px)");e.beginPath();e.fillStyle=g;e.shadowColor=b.color;e.shadowBlur=f;e.arc(d,d,b.size,0,w,!1);e.fill();if(!b.j)for(f=
g=b.size,e.beginPath(),e.arc(d,d,b.size,0,2*Math.PI,!1),e.clip();g--;)e.beginPath(),e.globalAlpha=.05,e.fillStyle="#000000",e.shadowColor="#000000",e.shadowBlur=10,e.save(),e.transform(1,0,0,1,d-f/2+(b.size-f)/2,d),e.arc(0,0,2*f--,-w/4,w/4),e.fill(),e.restore()}d=Fb(b);E.save();E.translate(b.x,b.y);E.rotate(d);b.j&&(d=1+.01*Math.sin(performance.now()/30),E.scale(d,d));E.drawImage(b.cache,-b.cache.width/2,-b.cache.height/2)}E.restore()}}
function $a(){E.beginPath();for(var a=75*(S-1),b=0;b<U.length;b++)for(var d=U[b],g=b;g<U.length;g++){var f=U[g];f!=d&&Ka(f,d)<=c.K&&(E.moveTo(d.x,d.y),E.bezierCurveTo(d.x,d.y-a,f.x,f.y-a,f.x,f.y))}E.globalAlpha=hb(.2/L,.2,.8);E.lineWidth=hb(1/L*2,1,4);E.strokeStyle="#00FF00";E.stroke();E.globalAlpha=1};function Ib(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],d,g,f,e,k;this.G=function(a){d=a;g=a.C;f=0;e=a.v*a.u*(g+1)*2;k=new Int32Array(e)};this.D=function(){var p,ca,O,q,V,P=new Int32Array(e),m=d.J[f],W=d.v,ua=d.u,Qa=0,va=0,G;var H=!1;var wa=[];for(ca=0;ca<=g;++ca){var da=m.p[ca];for(O=0;O<ua;++O){if(V=da?m.f[da-1].b[O]:0)m.a[V-1]=m.f[da-1].b[O+ua]||0,16>V&&(wa=[]);var Xb=b[m.a[15]],Yb=m.a[16]/
512,Zb=Math.pow(2,m.a[17]-9)/W,$b=m.a[18],qb=m.a[19],ac=135.82764118168*m.a[20]/44100,bc=1-m.a[21]/255,Ra=1E-5*m.a[22],cc=m.a[23]/32,dc=m.a[24]/512,ec=6.283184*Math.pow(2,m.a[25]-9)/W,rb=m.a[26]/255,Sa=m.a[27]*W&-2;V=(ca*ua+O)*W;for(q=0;4>q;++q)if(p=da?m.f[da-1].n[O+q*ua]:0){if(!wa[p]){var l=wa;var Q=p;var sb=G=void 0,xa,I,n=m,tb=p,fc=b[n.a[0]],gc=n.a[1],hc=n.a[3],ic=b[n.a[4]],jc=n.a[5],kc=n.a[8],ub=n.a[9],X=n.a[10]*n.a[10]*4,ya=n.a[11]*n.a[11]*4,Ta=n.a[12]*n.a[12]*4,lc=1/Ta,ea=n.a[13],mc=W*Math.pow(2,
2-n.a[14]),vb=new Int32Array(X+ya+Ta),wb=0,xb=0;for(xa=I=0;I<X+ya+Ta;I++,xa++){0<=xa&&(ea=ea>>8|(ea&255)<<4,xa-=mc,sb=.003959503758*Math.pow(2,(tb+(ea&15)+n.a[2]-128-128)/12),G=.003959503758*Math.pow(2,(tb+(ea&15)+n.a[6]-128-128)/12)*(1+8E-4*n.a[7]));var R=1;I<X?R=I/X:I>=X+ya&&(R-=(I-X-ya)*lc);var fa=sb;hc&&(fa*=R*R);wb+=fa;var Ua=fc(wb)*gc;fa=G;kc&&(fa*=R*R);xb+=fa;Ua+=ic(xb)*jc;ub&&(Ua+=(2*Math.random()-1)*ub);vb[I]=80*Ua*R|0}l[Q]=vb}Q=wa[p];p=0;for(l=2*V;p<Q.length;p++,l+=2)P[l]+=Q[p]}for(p=0;p<
W;p++)q=2*(V+p),(l=P[q])||H?(H=ac,$b&&(H*=Xb(Zb*q)*Yb+.5),H=1.5*Math.sin(H),Qa+=H*va,l=bc*(l-va)-Qa,va+=H*l,l=3==qb?va:1==qb?l:Qa,Ra&&(l*=Ra,l=1>l?-1<l?a(.25*l):-1:1,l/=Ra),l*=cc,H=1E-5<l*l,Q=Math.sin(ec*q)*dc+.5,G=l*(1-Q),l*=Q):G=0,q>=Sa&&(G+=P[q-Sa+1]*rb,l+=P[q-Sa]*rb),P[q]=G|0,P[q+1]=l|0,k[q]+=G|0,k[q+1]+=l|0}}f++;return f/d.H};this.B=function(){var a=44+2*e-8,b=a-36,d=new Uint8Array(44+2*e);d.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<e;++a){var f=k[a];f=-32767>f?-32767:32767<f?32767:f;d[b++]=f&255;d[b++]=f>>8&255}return d};this.getData=function(a,b){for(var d=2*Math.floor(44100*a),e=Array(b),f=0;f<2*b;f+=1){var g=d+f;e[f]=0<a&&g<k.length?k[g]/32768:0}return e}};var Bb=document,Y=void 0,Hb="#ffffff",yb="CANVAS";var Jb=!1,Kb,Lb=3;window.speechSynthesis&&(Jb=!0,Kb=window.speechSynthesis.getVoices(),0>=Kb.length&&(window.speechSynthesis.onvoiceschanged=function(){Kb=window.speechSynthesis.getVoices()}));function Ea(a){Jb&&(window.speechSynthesis.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=Kb[Lb],window.speechSynthesis.speak(a))};var za=!0,Mb=[],Ba=!0,Nb=[],Ob=Ma,Pb=new Ib;Pb.A=new Audio;Pb.G(Ob);Nb.push(Pb);Ma=Pb.A;var Rb=Qb,Sb=new Ib;Sb.w=!0;Sb.G(Rb);Mb.push(Sb);var Tb=0;function Aa(){for(var a=0;a<Mb.length;a++){var b=Mb[a];b.w&&(b.w=1<=b.D(),Tb+=1,b=b.B(),b=URL.createObjectURL(new Blob([b],{type:"audio/wav"})),b=new Audio(b),b.addEventListener("ended",function(){this.currentTime=0;this.play()},!1),b.play(),b.volume=.5)}Tb>=Mb.length&&(za=!1)}var Ub=0;
function Ca(){for(var a=0;a<Nb.length;a++){var b=Nb[a];if(1<=b.D()){Ub+=1;var d=b.B();d=URL.createObjectURL(new Blob([d],{type:"audio/wav"}));b.A.src=d}}Ub>=Nb.length&&(Ba=!1)};var Gb,Vb=document.createElement("CANVAS"),Z=Vb.getContext("2d");Vb.width=20;Vb.height=140;Z.fillStyle="#dddddd";Z.fillRect(8,50,4,40);Z.fillStyle="#639bff";Z.fillRect(2,0,15,60);Z.fillRect(2,80,15,60);Z.fillStyle="#9badb7";Z.fillRect(2,65,17,10);Z.fillRect(0,66,2,8);Gb=Vb;var Qb={J:[{a:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],b:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,
11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],b:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],b:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,
123,,,,,,,,111,,,,,,,,99],b:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],b:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],b:[]},{n:[],b:[]}]},{a:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],b:[]},{n:[147],b:[]}]},{a:[0,0,140,0,0,0,140,
0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,
,,147,,147,,,147,,147,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{a:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],b:[]},{n:[114],b:[]},{n:[111],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{a:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,
147],b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],b:[]},{n:[147],b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],b:[]}]},{a:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],b:[]},{n:[159,
,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{a:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,
2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],b:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],b:[]}]},
{a:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],b:[]}]}],v:5513,u:32,C:26,H:8};var Ma={J:[{a:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],b:[]}]}],v:5513,u:1,C:0,H:1};var M=0,N=0,C=0,D=0,Fa=!1,jb=!1,La=!1,Na=!1,Oa=!1,Wb;window.addEventListener("mousemove",function(a){var b=F.getBoundingClientRect();M=a.clientX-b.left;N=a.clientY-b.top;C=(M+J-F.width/2)/L;D=(N+K-F.height/2)/L;Wb&&(jb=!0)},!1);window.addEventListener("mousedown",function(){Wb=Fa=!0},!1);window.addEventListener("mouseup",function(){Wb=!1;jb||(La=!0);jb=!1},!1);window.addEventListener("wheel",function(a){Na=0<a.deltaY;Oa=0>a.deltaY},!1);var B=[],U=[],nc=[];
function r(a,b,d,g,f,e){e===Y&&(e=0);var k={name:"Some Shithole Planet",type:"orbital",x:0,y:0};k.color=a;k.size=b;k.j=!1;k.id=B.length.toString();d&&(k.g={c:d,i:g,speed:f,angle:e});k.update=function(){if(k.g){var a=k.g;a.angle+=a.speed;k.x=a.i*Math.cos(a.angle)+a.c.x;k.y=a.i/S*Math.sin(a.angle)+a.c.y}};k.l=function(){var a=k.g;a&&(E.beginPath(),E.globalAlpha=.4,E.strokeStyle=k.color,E.lineWidth=4/L,E.save(),E.transform(1,0,0,1/S,a.c.x,a.c.y),E.arc(0,0,a.i,a.angle-a.speed*a.i/2,a.angle,0>a.speed),
E.restore(),E.stroke())};B.push(k);return k}function u(a,b,d,g,f,e){e===Y&&(e=0);a=r(a,b,d,g+b/2,f,e);a.name=a.type="planet";a.update=oc(a.update,function(){});return a}function ja(a){pc(qc,a,U)!==Y&&(a=r(h(212,100,97),2,a,3*a.size,-.005),a.name=a.type="mining station",a.update=oc(a.update,function(){c.s+=c.L}))}var qc=4;function A(a){var b=pc(rc,a,U);b!==Y&&(a=r(h(160,100,50),2,a,5*a.size,.01,b),a.name=a.type="satellite",a.index=U.length,U.push(a))}var rc=3;
function ka(a){var b=pc(sc,a,nc);b!==Y&&(a=r(h(33,100,50),2,a,7*a.size,.005,b),a.name=a.type="defense platform",a.index=nc.length,nc.push(a))}var sc=2;var tc=console.log.bind(console),v=Math.random,w=2*Math.PI;function oc(a,b){return function(){a();b()}}function Ka(a,b){var d=a.x-b.x;a=(a.y-b.y)*S;return Math.sqrt(d*d+a*a)}function Fb(a){var b=B[0];return Math.atan2((a.y-b.y)*S,a.x-b.x)}function pc(a,b,d){var g=0;d.forEach(function(d){d.g.c==b&&(g+=w/a)});return g>=w?Y:g}function h(a,b,d){return"hsl("+(0>a?360*v():a)+","+(0>b?100*v():b)+"%,"+(0>d?100*v():d)+"%)"}function hb(a,b,d){return a>d?d:a<b?b:a}
function uc(a,b,d,g){var f=M-F.width/2,e=N-F.height/2;return f>a-d/2&&f<a+d/2&&e>b-g/2&&e<b+g/2}function Ja(){for(var a={x:C,y:D},b=999999,d=B[0],g=B.length;g--;){var f=Ka(B[g],a);f<b&&(b=f,d=g)}return B[d]};var Da=!1,ta=60;
function Xa(){var a=F.width/2,b=F.height/2;E.fillStyle="#FFFFFF";E.textAlign="center";E.textBaseline="middle";E.shadowColor="#FFFFFF";E.shadowBlur=50+2*Math.sin(performance.now()/100);E.font="small-caps 700 256px monospace";E.fillText("X",a,b-64);E.fillText("e o",a,b-90);E.shadowBlur=0;E.font="small-caps 700 32px monospace";za?E.fillText("Loading music...",a,b+64):Ba?E.fillText("Loading sounds...",a,b+64):E.fillText("Click to continue!",a,b+64);E.font="small-caps 700 16px monospace";E.fillText("Created by",
a,F.height-68);E.fillText("ai Doge & Jack Oatley",a,F.height-48);E.fillText("for #js13k",a,F.height-28)};var Ia=[];function vc(){var a={};Ia.push(a);a.x=0;a.y=0;a.o=300;a.h=400;a.cache=void 0;a.display=!1;a.buttons=[];a.update=function(){Fa&&a.I()};a.I=function(){};a.l=function(){};a.show=function(){};return a}
function aa(){var a=vc();a.buttons.push(wc(a));a.show=function(b){jb||ba.display||"planet"!=b.type||(a.display=!0,a.target=b)};a.I=function(){uc(a.x,a.y,a.o,a.h)?a.buttons.forEach(function(a){uc(a.x,a.y,a.o,a.h)&&a.click()}):(a.target=null,a.display=!1)};a.l=function(){E.fillStyle="#141e28";E.fillRect(-a.o/2,-a.h/2,a.o,a.h);E.fillStyle="#ffffff";E.textAlign="center";E.font="24px monospace";E.fillText((c.c===a.target?"Base":"")+" "+a.target.name,0,-a.h/2+20);var b=a.target.cache;E.drawImage(b,a.x-
b.width/2,a.y-b.height/2-a.h/4);a.buttons.forEach(function(a){a.l()})};return a};function wc(a){var b={};b.x=a.x+0;b.y=a.y+0;b.o=50;b.h=50;b.text="Satellite";b.l=function(){E.fillRect(-25,-25,50,50)};b.click=function(){tc("this button has been pressed")};return b};})();
