(function(){var aa=document;var c=Math.random,h=2*Math.PI;function ba(a,b){return function(){a();b()}}function ha(a,b){var d=a.x-b.x;a=a.y-b.y;return Math.sqrt(d*d+a*a)}function ia(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ja(a,b,d){var f=0;d.forEach(function(d){d.g.c==b&&(f+=h/a)});if(!(f>=h))return f}function r(a,b,d){return"hsl("+(0>a?360*c():a)+","+(0>b?100*c():b)+"%,"+(0>d?100*c():d)+"%)"}function ka(a,b,d){return a>d?d:a<b?b:a}
function qa(a,b,d,f){var g=t-u.width/2,e=v-u.height/2;return g>a-d/2&&g<a+d/2&&e>b-f/2&&e<b+f/2}function ra(){for(var a={x:w,y:x},b=999999,d=y[0],f=y.length;f--;){var g=ha(y[f],a);g<b&&(b=g,d=f)}return y[d]};function sa(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],d,f,g,e,l;this.B=function(a){d=a;f=a.D;g=0;e=a.v*a.u*(f+1)*2;l=new Int32Array(e)};this.F=function(){var p,ca,L,q,V,M=new Int32Array(e),m=d.K[g],W=d.v,la=d.u,Ka=0,ma=0,F;var G=!1;var na=[];for(ca=0;ca<=f;++ca){var da=m.p[ca];for(L=0;L<la;++L){if(V=da?m.f[da-1].b[L]:0)m.a[V-1]=m.f[da-1].b[L+la]||0,16>V&&(na=[]);var Fb=b[m.a[15]],Gb=m.a[16]/
512,Hb=Math.pow(2,m.a[17]-9)/W,Ib=m.a[18],gb=m.a[19],Jb=135.82764118168*m.a[20]/44100,Kb=1-m.a[21]/255,La=1E-5*m.a[22],Lb=m.a[23]/32,Mb=m.a[24]/512,Nb=6.283184*Math.pow(2,m.a[25]-9)/W,hb=m.a[26]/255,Ma=m.a[27]*W&-2;V=(ca*la+L)*W;for(q=0;4>q;++q)if(p=da?m.f[da-1].n[L+q*la]:0){if(!na[p]){var k=na;var N=p;var ib=F=void 0,oa,H,n=m,jb=p,Ob=b[n.a[0]],Pb=n.a[1],Qb=n.a[3],Rb=b[n.a[4]],Sb=n.a[5],Tb=n.a[8],kb=n.a[9],X=n.a[10]*n.a[10]*4,pa=n.a[11]*n.a[11]*4,Na=n.a[12]*n.a[12]*4,Ub=1/Na,ea=n.a[13],Vb=W*Math.pow(2,
2-n.a[14]),lb=new Int32Array(X+pa+Na),mb=0,nb=0;for(oa=H=0;H<X+pa+Na;H++,oa++){0<=oa&&(ea=ea>>8|(ea&255)<<4,oa-=Vb,ib=.003959503758*Math.pow(2,(jb+(ea&15)+n.a[2]-128-128)/12),F=.003959503758*Math.pow(2,(jb+(ea&15)+n.a[6]-128-128)/12)*(1+8E-4*n.a[7]));var O=1;H<X?O=H/X:H>=X+pa&&(O-=(H-X-pa)*Ub);var fa=ib;Qb&&(fa*=O*O);mb+=fa;var Oa=Ob(mb)*Pb;fa=F;Tb&&(fa*=O*O);nb+=fa;Oa+=Rb(nb)*Sb;kb&&(Oa+=(2*Math.random()-1)*kb);lb[H]=80*Oa*O|0}k[N]=lb}N=na[p];p=0;for(k=2*V;p<N.length;p++,k+=2)M[k]+=N[p]}for(p=0;p<
W;p++)q=2*(V+p),(k=M[q])||G?(G=Jb,Ib&&(G*=Fb(Hb*q)*Gb+.5),G=1.5*Math.sin(G),Ka+=G*ma,k=Kb*(k-ma)-Ka,ma+=G*k,k=3==gb?ma:1==gb?k:Ka,La&&(k*=La,k=1>k?-1<k?a(.25*k):-1:1,k/=La),k*=Lb,G=1E-5<k*k,N=Math.sin(Nb*q)*Mb+.5,F=k*(1-N),k*=N):F=0,q>=Ma&&(F+=M[q-Ma+1]*hb,k+=M[q-Ma]*hb),M[q]=F|0,M[q+1]=k|0,l[q]+=F|0,l[q+1]+=k|0}}g++;return g/d.I};this.C=function(){var a=44+2*e-8,b=a-36,d=new Uint8Array(44+2*e);d.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<e;++a){var f=l[a];f=-32767>f?-32767:32767<f?32767:f;d[b++]=f&255;d[b++]=f>>8&255}return d}};var ta={K:[{a:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],b:[]}]}],v:5513,u:1,D:0,I:1};var z=document.createElement("CANVAS"),A=z.getContext("2d");z.width=20;z.height=140;A.fillStyle="#dddddd";A.fillRect(8,50,4,40);A.fillStyle="#639bff";A.fillRect(2,0,15,60);A.fillRect(2,80,15,60);A.fillStyle="#9badb7";A.fillRect(2,65,17,10);A.fillRect(0,66,2,8);var B=document.createElement("CANVAS"),C=B.getContext("2d");B.width=64;B.height=64;C.fillStyle="#ff0000";C.moveTo(0,32);C.lineTo(64,0);C.lineTo(48,32);C.lineTo(64,64);C.fill();var ua=!1,va;window.speechSynthesis&&(ua=!0,va=window.speechSynthesis.getVoices(),0>=va.length&&(window.speechSynthesis.onvoiceschanged=function(){va=window.speechSynthesis.getVoices()}));function wa(a){ua&&(window.speechSynthesis.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=va[3],window.speechSynthesis.speak(a))};var xa=!0,ya=[],za=!0,Aa=[],Ba=ta,Ca=new sa;Ca.A=new Audio;Ca.B(Ba);Aa.push(Ca);ta=Ca.A;var Da=new sa;Da.w=!0;
Da.B({K:[{a:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],b:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,
13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],b:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],b:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,
,,,,,,,111,,,,,,,,99],b:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],b:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],b:[]},{n:[],b:[]}]},{a:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],b:[]},{n:[147],b:[]}]},{a:[0,0,140,0,0,0,140,0,0,
60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,
,147,,147,,,147,,147,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{a:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],b:[]},{n:[114],b:[]},{n:[111],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{a:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],
b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],b:[]},{n:[147],b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],b:[]}]},{a:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],b:[]},{n:[159,
,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{a:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,
2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],b:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],b:[]}]},
{a:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],b:[]}]}],v:5513,u:32,D:26,I:8});ya.push(Da);var Ea=0;function Fa(){for(var a=0;a<ya.length;a++){var b=ya[a];b.w&&(b.w=1<=b.F(),Ea+=1,b=b.C(),b=URL.createObjectURL(new Blob([b],{type:"audio/wav"})),b=new Audio(b),b.addEventListener("ended",function(){this.currentTime=0;this.play()},!1),b.play(),b.volume=.5)}Ea>=ya.length&&(xa=!1)}var Ga=0;
function Ha(){for(var a=0;a<Aa.length;a++){var b=Aa[a];if(1<=b.F()){Ga+=1;var d=b.C();d=URL.createObjectURL(new Blob([d],{type:"audio/wav"}));b.A.src=d}}Ga>=Aa.length&&(za=!1)};var t=0,v=0,w=0,x=0,Ia=!1,Ja=!1,Pa=!1,Qa=!1,Ra=!1,Sa=null,Ta;window.addEventListener("mousemove",function(a){var b=u.getBoundingClientRect();t=a.clientX-b.left;v=a.clientY-b.top;w=(t+D-u.width/2)/E;x=(v+I-u.height/2)/E;Ta&&(Ja=!0)},!1);window.addEventListener("mousedown",function(){Ta=Ia=!0},!1);window.addEventListener("mouseup",function(){Ta=!1;Ja||(Pa=!0);Ja=!1},!1);window.addEventListener("wheel",function(a){Qa=0<a.deltaY;Ra=0>a.deltaY},!1);var Ua=[];function Va(){var a=-u.width/4,b={};Ua.push(b);b.x=a;b.y=0;b.o=300;b.i=400;b.cache=null;b.display=!1;b.buttons=[];b.update=function(){Ia&&b.J()};b.J=function(){};b.h=function(){};b.show=function(){};return b};function Wa(a,b){var d={};d.x=a.x-0;d.y=a.y-0;d.o=50;d.i=50;d.text="Satellite";d.h=function(){J.fillRect(d.x-25,d.y-25,50,50);z&&J.drawImage(z,d.x-z.width/2,d.y-z.height/2)};d.click=b;return d};var D=0,I=0,Xa=0,Ya=0,Za=0,$a=0,ab=0,bb=0,E=1,cb=1,K=2;function db(){if(Ra||Qa)cb=ka(cb+(Ra?.1:-.1),.1,2);K=Math.min(1+(E-.1),2);Ia&&!eb.display&&(fb=!0,Za=D,$a=I,ab=t,bb=v);Ja&&fb?(Xa=Za+(ab-t),Ya=$a+(bb-v)):Pa&&(fb=!1);var a=E;E+=.001>Math.abs(E-cb)?0:(cb-E)/5;a=E-a;.001<Math.abs(a)&&(D+=w*a,I+=x*a,Xa+=w*a,Ya+=x*a);D+=.001>Math.abs(D-Xa)?0:(Xa-D)/5;I+=.001>Math.abs(I-Ya)?0:(Ya-I)/5}function ob(){J.setTransform(1,0,0,1,0,0)}var fb;var pb="",u=aa.getElementById("c"),J=u.getContext("2d",{alpha:!1});qb();window.addEventListener("resize",qb,!1);function qb(){u.width=window.innerWidth;u.height=window.innerHeight;J.clearRect(0,0,u.width,u.height)}
function rb(){J.globalAlpha=1;for(var a=0;a<y.length;a++){var b=y[a];b.g&&sb(b);var d=Math.floor(4*E);b.m&&b.m[d]&&(d=b.m[d],J.save(),J.translate(b.x,b.y),J.scale(1,1/K),J.drawImage(d,0,0,d.width,d.height),J.scale(-1,1),J.drawImage(d,0,0),J.scale(1,-1),J.drawImage(d,0,0),J.scale(-1,1),J.drawImage(d,0,0),J.restore())}}
function sb(a){var b=a.g;if(b){var d=b.c.m;d||(d=b.c.m=[]);var f=Math.floor(4*E);d=d[f];if(!d){d=document.createElement("CANVAS");var g=0;y.forEach(function(a){a.g&&a.g.c===b.c&&(g=Math.max(g,a.g.j+40))});d.width=g;d.height=g;b.c.m[f]=d;d.G=[]}if(!d.G[a.id]){f=.1+f/4;var e=d.getContext("2d");e.setLineDash([5/f,5/f]);e.beginPath();e.lineWidth=2/f;e.strokeStyle=a.color;e.globalAlpha=.6;e.arc(0,0,b.j,0,h/4,!1);e.stroke();e.setLineDash(tb);d.G[a.id]=!0}}}var tb=[];
function ub(){J.globalAlpha=1;for(var a=0;a<y.length;a++){var b=y[a];if("satellite"===b.type){var d=ia(b,y[0]);J.save();J.translate(b.x,b.y);J.rotate(d);J.scale(.2,.2);J.drawImage(z,-z.width/2,-z.height/2)}else{if(!b.cache){var f=b.l?"#ffffff":b.color,g=b.l?50:10;d=b.size+g;var e=b,l=2*d,p=aa.createElement("CANVAS");p.width=2*d;p.height=l;e.cache=p;e=b.cache.getContext("2d");b.l&&(e.filter="blur(4px)");e.beginPath();e.fillStyle=f;e.shadowColor=b.color;e.shadowBlur=g;e.arc(d,d,b.size,0,h,!1);e.fill();
if(!b.l)for(g=f=b.size,e.beginPath(),e.arc(d,d,b.size,0,2*Math.PI,!1),e.clip();f--;)e.beginPath(),e.globalAlpha=.05,e.fillStyle="#000000",e.shadowColor="#000000",e.shadowBlur=10,e.save(),e.transform(1,0,0,1,d-g/2+(b.size-g)/2,d),e.arc(0,0,2*g--,-h/4,h/4),e.fill(),e.restore()}d=ia(b,y[0]);J.save();J.translate(b.x,b.y);J.rotate(d);b.l&&(d=1+.01*Math.sin(performance.now()/30),J.scale(d,d));J.drawImage(b.cache,-b.cache.width/2,-b.cache.height/2)}J.restore()}}
function vb(){J.beginPath();for(var a=75*(K-1),b=0;b<P.length;b++)for(var d=P[b],f=b;f<P.length;f++){var g=P[f];g!=d&&ha(g,d)<=Q.L&&(J.moveTo(d.x,d.y),J.bezierCurveTo(d.x,d.y-a,g.x,g.y-a,g.x,g.y))}J.globalAlpha=ka(.2/E,.2,.8);J.lineWidth=ka(1/E*2,1,4);J.strokeStyle="#00FF00";J.stroke();J.globalAlpha=1};var wb=document.createElement("CANVAS");wb.width=512;wb.height=512;var R=wb.getContext("2d");R.shadowBlur=1;R.globalAlpha=.5;for(var xb=300;xb--;){var yb=512*Math.random(),zb=512*Math.random(),Ab=r(-1,100,90);R.fillStyle=Ab;R.shadowColor=Ab;R.beginPath();R.arc(yb,zb,.5,0,2*Math.PI);R.fill()}var Bb=J.createPattern(wb,"repeat");
function Cb(){var a=performance.now()/2E3;J.beginPath();J.rect(0,0,u.width,u.height);J.fillStyle=Bb;J.translate(.5*u.width,.5*u.height);J.scale(.5,.5);J.translate(-D/25,-I/25);J.rotate(a/200);J.fill();J.rotate(-a/200);J.scale(2,2);J.translate(-D/50,-I/50);J.fill()}var Db=document.createElement("CANVAS"),Eb=Db.getContext("2d",{alpha:!1});Db.width=512;Db.height=512;Eb.beginPath();var Wb=Eb.createRadialGradient(256,256,0,256,256,256);Wb.addColorStop(0,"#141e28");Wb.addColorStop(1,"#000000");
Eb.fillStyle=Wb;Eb.fillRect(0,0,512,512);var y=[],P=[],Xb=[];
function Yb(a,b,d,f,g,e){void 0===e&&(e=0);var l={name:"Some Shithole Planet",type:"orbital",x:0,y:0};l.color=a;l.size=b;l.l=!1;l.id=y.length.toString();d&&(l.g={c:d,j:f,speed:g,angle:e});l.update=function(){if(l.g){var a=l.g;a.angle+=a.speed;l.x=a.j*Math.cos(a.angle)+a.c.x;l.y=a.j/K*Math.sin(a.angle)+a.c.y}};l.h=function(){var a=l.g;a&&(J.beginPath(),J.globalAlpha=.4,J.strokeStyle=l.color,J.lineWidth=4/E,J.save(),J.transform(1,0,0,1/K,a.c.x,a.c.y),J.arc(0,0,a.j,a.angle-a.speed*a.j/2,a.angle,0>a.speed),
J.restore(),J.stroke())};y.push(l);return l}function Zb(a,b,d,f,g,e){void 0===e&&(e=0);a=Yb(a,b,d,f+b/2,g,e);a.name=a.type="planet";a.update=ba(a.update,function(){});return a}function $b(a){void 0!==ja(ac,a,P)&&(a=Yb(r(212,100,97),2,a,3*a.size,-.005,null),a.name=a.type="mining station",a.update=ba(a.update,function(){Q.s+=Q.M}))}var ac=4;function S(a){var b=ja(bc,a,P);void 0!==b&&(a=Yb(r(160,100,50),2,a,5*a.size,.01,b),a.name=a.type="satellite",a.index=P.length,P.push(a))}var bc=3;
function cc(a){var b=ja(dc,a,Xb);void 0!==b&&(a=Yb(r(33,100,50),2,a,7*a.size,.005,b),a.name=a.type="defense platform",a.index=Xb.length,Xb.push(a))}var dc=2;function ec(a,b){this.x=a;this.y=b;this.speed=5;this.direction=0;this.target=y[0];fc.push(this)}
ec.prototype={update:function(){var a=ia(this,this.target)-this.direction+h/2;this.direction+=.01*(a-Math.floor(a/h)*h-h/2);this.x-=this.speed*Math.cos(this.direction);this.y-=this.speed*Math.sin(this.direction);100>ha(this,this.target)&&fc.splice(fc.indexOf(this),1)},h:function(){J.save();J.translate(this.x,this.y/K-20*K);J.scale(.2,.2/K);J.rotate(this.direction);J.drawImage(B,-B.width/2,-B.height/2);J.restore()}};var fc=[];var gc=!1,hc=60;
function ic(){var a=u.width/2,b=u.height/2;J.fillStyle="#FFFFFF";J.textAlign="center";J.textBaseline="middle";J.shadowColor="#FFFFFF";J.shadowBlur=50+2*Math.sin(performance.now()/100);J.font="small-caps 700 256px monospace";J.fillText("X",a,b-64);J.fillText("e o",a,b-90);J.shadowBlur=0;J.font="small-caps 700 32px monospace";xa?J.fillText("Loading music...",a,b+64):za?J.fillText("Loading sounds...",a,b+64):J.fillText("Click to continue!",a,b+64);J.font="small-caps 700 16px monospace";J.fillText("Created by",
a,u.height-68);J.fillText("ai Doge & Jack Oatley",a,u.height-48);J.fillText("for #js13k",a,u.height-28)};var eb=function(){var a=Va();a.buttons.push(Wa(a,function(){wa("choose a target");a.H()}));a.show=function(b){Sa=a;a.display=!0;a.target=b};a.H=function(){a.target=null;a.display=!1;Sa=null};a.J=function(){Sa==a&&qa(a.x,a.y,a.o,a.i)?a.buttons.forEach(function(a){qa(a.x,a.y,a.o,a.i)&&a.click()}):a.H()};a.h=function(){J.fillStyle="#141e28";J.fillRect(a.x-a.o/2,a.y-a.i/2,a.o,a.i);J.fillStyle="#ffffff";J.textAlign="center";J.font="24px monospace";J.fillText((Q.c===a.target?"Base":"")+" "+a.target.name,
a.x,a.y-a.i/2+20);var b=a.target.cache;J.drawImage(b,a.x-b.width/2,a.y-b.height/2-a.i/4);a.buttons.forEach(function(a){a.h()})};return a}(),Q=null,jc=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var kc=r(60,100,50),T=Yb(kc,50,null,null,null,null);T.name=T.type="the sun";T.l=!0;var U=Zb(r(180,39,62),10,T,500,.003,c()*h),Y={};Y.c=U;Y.M=.01;Y.N=300;Y.O=0;Y.P=0;Y.L=500;Y.s=0;Q=Y;Zb(r(-1,60,70),5,U,100,-.002,c()*h);var Z=Zb(r(-1,60,70),20,T,1123,.0015,c()*h);
Zb(r(-1,60,70),5,Z,8*Z.size,.01,c()*h);Zb(r(-1,60,70),10,Z,9*Z.size,.005,null);Zb(r(-1,60,70),30,T,2532,-.001,c()*h);$b(U);$b(Z);S(U);S(T);S(T);S(T);S(Z);S(Z);S(Z);cc(U);cc(U);cc(U);cc(Z);var lc=performance.now(),mc=1E3/60,nc=0,oc=0,pc=[];
(function qc(a){requestAnimationFrame(qc);var d=lc+mc;pc.push(1/((a-nc)/1E3));nc=a;if(60<pc.length){var f=0,g=1E3,e=0;pc.shift();pc.forEach(function(a){f+=a;g=Math.min(g,a);e=Math.max(e,a)});oc=Math.floor(f/60)+", "+~~g+" - "+~~e}a>d&&(rc(Math.min(Math.floor((a-lc)/mc),60)),sc(),lc=a)})(lc);
function rc(a){if(0===jc)0<hc--||(xa?Fa():za?Ha():(gc||(gc=!0,wa("Welcum to Exo")),Ia&&(jc=1)));else if(1===jc){pb="";db();Ua.forEach(function(a){a.display&&a.update()});y.forEach(function(a){a.update()});fc.forEach(function(a){a.update()});var b=Math.random()*h;new ec(3E3*Math.cos(b),3E3*Math.sin(b));b=ra();64>ha(b,{x:w,y:x})&&(pb=b.name,Sa||!Pa||Ja||"planet"!=b.type||(wa("selected "+b.name),eb.show(b),ta.play()))}Qa=Ra=Pa=Ia=!1;--a&&rc(a)}
function sc(){ob();J.clearRect(0,0,u.width,u.height);J.drawImage(Db,Math.floor(.5*u.width-D-2048),Math.floor(.5*u.height-I-2048),4096,4096);Cb();if(0===jc)ob(),ic();else{J.setTransform(E,0,0,E,-D+u.width/2,-I+u.height/2);y.forEach(function(a){a.h()});J.globalAlpha=1;rb();ub();fc.forEach(function(a){a.h()});vb();var a=ra();64>ha(a,{x:w,y:x})&&(J.beginPath(),J.moveTo(a.x,a.y),J.lineTo(w,x),J.strokeStyle="#ffffff",J.stroke());J.setTransform(1,0,0,1,u.width/2,u.height/2);Ua.forEach(function(a){a.display&&
a.h()});ob();J.font="14px monospace";J.textBaseline="top";J.textAlign="left";J.fillStyle="#ffffff";J.fillText("#js13k tower defense prototype",20,20);J.fillText("https://github.com/scorp200/td13k",20,40);J.fillText("framerate: "+oc,20,60);J.fillText("mouse (gui): "+t+", "+v,20,80);J.fillText("mouse (view): "+w+", "+x,20,100);J.fillText("planet name: "+pb,20,120);J.fillText("view x: "+D,20,160);J.fillText("view y: "+I,20,180);J.fillText("view zoom: "+E,20,200);J.fillText("view tilt: "+K,20,220);J.fillText("minerals: "+
Math.floor(100*Q.s)/100,20,260)}};}).call(this);
