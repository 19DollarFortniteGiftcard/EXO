var d="function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,c){a!=Array.prototype&&a!=Object.prototype&&(a[f]=c.value)},g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function l(a){if(a){for(var f=g,c=["Array","prototype","fill"],e=0;e<c.length-1;e++){var h=c[e];h in f||(f[h]={});f=f[h]}c=c[c.length-1];e=f[c];a=a(e);a!=e&&null!=a&&d(f,c,{configurable:!0,writable:!0,value:a})}}
l(function(a){return a?a:function(a,c,e){var f=this.length||0;0>c&&(c=Math.max(0,f+c));if(null==e||e>f)e=f;e=Number(e);0>e&&(e=Math.max(0,f+e));for(c=Number(c||0);c<e;c++)this[c]=a;return this}});var m=document;var n="",p=m.addEventListener,q=m.getElementById("c"),r=q.getContext("2d");function t(){r.setTransform(1,0,0,1,q.width/2,q.height/2)}u();p("resize",u);function u(){q.width=window.innerWidth;q.height=window.innerHeight;r.clearRect(0,0,q.width,q.height)}
function v(a,f,c,e,h,k,b,B,W,X,C,D,E,F,G){void 0===B&&(B=1);void 0===D&&(D=0);void 0===E&&(E=w);void 0===F&&(F=0);void 0===G&&(G=!1);void 0===C&&(C=0);a.beginPath();a.globalAlpha=B;a[f+"Style"]=b;a.lineWidth=W;a.shadowColor=X;a.shadowBlur=C;a.ellipse(c,e,h,h*(k?.5:1),F,D,E,G);a[f]()};var x=m.createElement("CANVAS");x.width=q.width;x.height=q.height;var y=x.getContext("2d");y.fillStyle="#ffffff";y.shadowColor="#ffffff";y.shadowBlur=1;y.globalAlpha=.5;function z(){var a=Math.random()*q.height;this.x=Math.random()*q.width;this.y=a;A.push(this)}for(var aa=1E3,A=[];aa--;){var H=new z;y.beginPath();y.ellipse(H.x,H.y,.5,.5,0,0,2*Math.PI);y.fill()};var I=[];
function J(a,f,c,e,h,k){k=void 0===k?0:k;void 0===k&&(k=0);var b={name:"Some Shithole Planet",x:0,y:0};b.color=a;b.size=f;b.f=!1;c&&(b.a={b:c,c:e,speed:h,angle:k});b.update=function(){var a=K.x-q.width/2-b.x,c=K.y-q.height/2-b.y;Math.sqrt(a*a+c*c)<b.size+5&&(n=b.name,console.log("mouse over"));b.a&&(a=b.a,a.angle+=a.speed,b.x=a.c*Math.cos(a.angle)+a.b.x,b.y=.5*a.c*Math.sin(a.angle)+a.b.y)};b.g=function(){var a=b.a;a&&(r.setLineDash([5,5]),v(r,"stroke",a.b.x,a.b.y,a.c,!0,b.color,.3,1),r.setLineDash([]));(a=
b.a)&&v(r,"stroke",a.b.x,a.b.y,a.c,!0,b.color,.3,3,b.color,5,a.angle-a.speed*a.c,a.angle,0,0>a.speed);if(!b.cache){a=document.createElement("CANVAS");a.width=256;a.height=256;b.cache=a;a=b.cache.getContext("2d");var c=b.f?"#ffffff":b.color,e=b.f?50:b.size/10;b.f&&(a.filter="blur(4px)");v(a,"fill",128,128,b.size,!1,c,1,0,b.color,e);b.a&&(a.filter="blur(3px)",v(a,"fill",128,128,b.size,!1,"#000000",.8,0,b.color,2,-w/4,w/4));a.filter="none"}a=I[0];a=Math.atan2(2*(b.y-a.y),b.x-a.x);r.globalAlpha=1;r.shadowBlur=
0;r.translate(b.x,b.y);r.rotate(a);b.f&&(a=1+.03*ba(),r.scale(a,a));r.drawImage(b.cache,-128,-128);t()};I.push(b);return b}function L(a,f){return function(){a();f()}}function M(a,f,c,e,h){a=J(a,f,c,e,h,0);a.update=L(a.update,function(){});return a}
function N(a){var f=0;I.forEach(function(e){"satellite"==e.name&&e!=c&&e.a.b==a&&(f=e.a.angle+w/3)});var c=J("#00ffab",2,a,3*a.size,.005,f);c.name="satellite";c.index=I.length-1;c.g=L(c.g,function(){for(var a=c.index;a<I.length;a++);I.forEach(function(a){if("satellite"==a.name&&a!=c){var f=c;r.beginPath();r.globalAlpha=.2;r.moveTo(f.x,f.y);r.lineTo(a.x,a.y);r.lineWidth=.5;r.strokeStyle="#f0f7ff";r.stroke();r.globalAlpha=1}})})};var ba=Math.random,w=2*Math.PI,O=0;p("contextmenu",function(a){a.preventDefault()});var P=J("#ffe200",38,null,null,null);P.f=!0;var Q=M("#77c3c3",10,P,200,.005);M("#666666",5,Q,50,-.01);var R=M("#f64749",20,P,500,.0025);M("#ff0055",5,R,80,.05);var ca=M("#77ff55",10,R,150,.005);M("#666666",5,ca,50,-.01);(function(a){a=J("#f0f7ff",2,a,30,.005);a.update=L(a.update,function(){O+=.01});return a})(Q);N(P);N(P);N(P);N(R);
var K=function(){var a={x:0,y:0};p("mousemove",function(f){var c=q.getBoundingClientRect();a.x=f.clientX-c.left;a.y=f.clientY-c.top});p("mousedown",function(a){a.preventDefault()});return a}(),S=performance.now(),T=1E3/60,U=0,V=0,Y=[];
(function da(a){requestAnimationFrame(da);var c=S+T,e=0;Y.push(1/((a-U)/1E3));U=a;if(60<Y.length){var h=0,k=1E3,b=0;Y.shift();Y.forEach(function(a){h+=a;k=Math.min(k,a);b=Math.max(b,a)});V=Math.floor(h/60)+", "+~~k+" - "+~~b}a>c&&(e=Math.floor((a-S)/T),Z(Math.min(e,60)),S=a);ea()})();function Z(a){n="";I.forEach(function(a){a.update()});--a&&Z(a)}
function ea(){r.setTransform(1,0,0,1,0,0);r.clearRect(0,0,q.width,q.height);r.drawImage(x,0,0);t();I.forEach(function(a){a.g()});r.setTransform(1,0,0,1,0,0);r.font="14px monospace";r.textBaseline="top";r.fillStyle="#ffffff";r.fillText("#js13k tower defense prototype",20,20);r.fillText("https://github.com/scorp200/td13k",20,40);r.fillText("framerate: "+V,20,60);r.fillText("mouse (gui): "+K.x+", "+K.y,20,80);r.fillText("mouse (view): "+(K.x-q.width/2)+", "+(K.y-q.height/2),20,100);r.fillText("planet name: "+
n,20,120);r.fillText("Minerals: "+Math.floor(100*O)/100,20,140)};
