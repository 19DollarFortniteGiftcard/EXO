(function(){var aa=document;var c=Math.random,h=2*Math.PI;function ba(a,b){return function(){a();b()}}function ha(a,b){var d=a.x-b.x;a=a.y-b.y;return Math.sqrt(d*d+a*a)}function ia(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ja(a,b,d){var f=0;d.forEach(function(d){d.g.c==b&&(f+=h/a)});if(!(f>=h))return f}function r(a,b,d){return"hsl("+(0>a?360*c():a)+","+(0>b?100*c():b)+"%,"+(0>d?100*c():d)+"%)"}function ka(a,b,d){return a>d?d:a<b?b:a}
function qa(a,b,d,f){var g=t-u.width/2,e=v-u.height/2;return g>a-d/2&&g<a+d/2&&e>b-f/2&&e<b+f/2}function ra(){for(var a={x:w,y:x},b=999999,d=y[0],f=y.length;f--;){var g=ha(y[f],a);g<b&&(b=g,d=f)}return y[d]};function sa(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],d,f,g,e,k;this.B=function(a){d=a;f=a.D;g=0;e=a.v*a.u*(f+1)*2;k=new Int32Array(e)};this.F=function(){var p,ca,L,q,V,M=new Int32Array(e),m=d.K[g],W=d.v,la=d.u,Ka=0,ma=0,F;var G=!1;var na=[];for(ca=0;ca<=f;++ca){var da=m.p[ca];for(L=0;L<la;++L){if(V=da?m.f[da-1].b[L]:0)m.a[V-1]=m.f[da-1].b[L+la]||0,16>V&&(na=[]);var Gb=b[m.a[15]],Hb=m.a[16]/
512,Ib=Math.pow(2,m.a[17]-9)/W,Jb=m.a[18],gb=m.a[19],Kb=135.82764118168*m.a[20]/44100,Lb=1-m.a[21]/255,La=1E-5*m.a[22],Mb=m.a[23]/32,Nb=m.a[24]/512,Ob=6.283184*Math.pow(2,m.a[25]-9)/W,hb=m.a[26]/255,Ma=m.a[27]*W&-2;V=(ca*la+L)*W;for(q=0;4>q;++q)if(p=da?m.f[da-1].n[L+q*la]:0){if(!na[p]){var l=na;var N=p;var ib=F=void 0,oa,H,n=m,jb=p,Pb=b[n.a[0]],Qb=n.a[1],Rb=n.a[3],Sb=b[n.a[4]],Tb=n.a[5],Ub=n.a[8],kb=n.a[9],X=n.a[10]*n.a[10]*4,pa=n.a[11]*n.a[11]*4,Na=n.a[12]*n.a[12]*4,Vb=1/Na,ea=n.a[13],Wb=W*Math.pow(2,
2-n.a[14]),lb=new Int32Array(X+pa+Na),mb=0,nb=0;for(oa=H=0;H<X+pa+Na;H++,oa++){0<=oa&&(ea=ea>>8|(ea&255)<<4,oa-=Wb,ib=.003959503758*Math.pow(2,(jb+(ea&15)+n.a[2]-128-128)/12),F=.003959503758*Math.pow(2,(jb+(ea&15)+n.a[6]-128-128)/12)*(1+8E-4*n.a[7]));var O=1;H<X?O=H/X:H>=X+pa&&(O-=(H-X-pa)*Vb);var fa=ib;Rb&&(fa*=O*O);mb+=fa;var Oa=Pb(mb)*Qb;fa=F;Ub&&(fa*=O*O);nb+=fa;Oa+=Sb(nb)*Tb;kb&&(Oa+=(2*Math.random()-1)*kb);lb[H]=80*Oa*O|0}l[N]=lb}N=na[p];p=0;for(l=2*V;p<N.length;p++,l+=2)M[l]+=N[p]}for(p=0;p<
W;p++)q=2*(V+p),(l=M[q])||G?(G=Kb,Jb&&(G*=Gb(Ib*q)*Hb+.5),G=1.5*Math.sin(G),Ka+=G*ma,l=Lb*(l-ma)-Ka,ma+=G*l,l=3==gb?ma:1==gb?l:Ka,La&&(l*=La,l=1>l?-1<l?a(.25*l):-1:1,l/=La),l*=Mb,G=1E-5<l*l,N=Math.sin(Ob*q)*Nb+.5,F=l*(1-N),l*=N):F=0,q>=Ma&&(F+=M[q-Ma+1]*hb,l+=M[q-Ma]*hb),M[q]=F|0,M[q+1]=l|0,k[q]+=F|0,k[q+1]+=l|0}}g++;return g/d.I};this.C=function(){var a=44+2*e-8,b=a-36,d=new Uint8Array(44+2*e);d.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<e;++a){var f=k[a];f=-32767>f?-32767:32767<f?32767:f;d[b++]=f&255;d[b++]=f>>8&255}return d}};var ta={K:[{a:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],b:[]}]}],v:5513,u:1,D:0,I:1};var z=document.createElement("CANVAS"),A=z.getContext("2d");z.width=20;z.height=140;A.fillStyle="#dddddd";A.fillRect(8,50,4,40);A.fillStyle="#639bff";A.fillRect(2,0,15,60);A.fillRect(2,80,15,60);A.fillStyle="#9badb7";A.fillRect(2,65,17,10);A.fillRect(0,66,2,8);var B=document.createElement("CANVAS"),C=B.getContext("2d");B.width=64;B.height=64;C.fillStyle="#ff0000";C.moveTo(0,32);C.lineTo(64,0);C.lineTo(48,32);C.lineTo(64,64);C.fill();var ua=!1,va;window.speechSynthesis&&(ua=!0,va=window.speechSynthesis.getVoices(),0>=va.length&&(window.speechSynthesis.onvoiceschanged=function(){va=window.speechSynthesis.getVoices()}));function wa(a){ua&&(window.speechSynthesis.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=va[3],window.speechSynthesis.speak(a))};var xa=!0,ya=[],za=!0,Aa=[],Ba=ta,Ca=new sa;Ca.A=new Audio;Ca.B(Ba);Aa.push(Ca);ta=Ca.A;var Da=new sa;Da.w=!0;
Da.B({K:[{a:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],b:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,
13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],b:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],b:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,
,,,,,,,111,,,,,,,,99],b:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],b:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],b:[]},{n:[],b:[]}]},{a:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],b:[]},{n:[147],b:[]}]},{a:[0,0,140,0,0,0,140,0,0,
60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,
,147,,147,,,147,,147,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{a:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],b:[]},{n:[114],b:[]},{n:[111],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{a:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],
b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],b:[]},{n:[147],b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],b:[]}]},{a:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],b:[]},{n:[159,
,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{a:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,
2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],b:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],b:[]}]},
{a:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],b:[]}]}],v:5513,u:32,D:26,I:8});ya.push(Da);var Ea=0;function Fa(){for(var a=0;a<ya.length;a++){var b=ya[a];b.w&&(b.w=1<=b.F(),Ea+=1,b=b.C(),b=URL.createObjectURL(new Blob([b],{type:"audio/wav"})),b=new Audio(b),b.addEventListener("ended",function(){this.currentTime=0;this.play()},!1),b.play(),b.volume=.5)}Ea>=ya.length&&(xa=!1)}var Ga=0;
function Ha(){for(var a=0;a<Aa.length;a++){var b=Aa[a];if(1<=b.F()){Ga+=1;var d=b.C();d=URL.createObjectURL(new Blob([d],{type:"audio/wav"}));b.A.src=d}}Ga>=Aa.length&&(za=!1)};var t=0,v=0,w=0,x=0,Ia=!1,Ja=!1,Pa=!1,Qa=!1,Ra=!1,Sa=null,Ta;window.addEventListener("mousemove",function(a){var b=u.getBoundingClientRect();t=a.clientX-b.left;v=a.clientY-b.top;w=(t+D-u.width/2)/E;x=(v+I-u.height/2)*J/E;Ta&&(Ja=!0)},!1);window.addEventListener("mousedown",function(){Ta=Ia=!0},!1);window.addEventListener("mouseup",function(){Ta=!1;Ja||(Pa=!0);Ja=!1},!1);window.addEventListener("wheel",function(a){Qa=0<a.deltaY;Ra=0>a.deltaY},!1);var Ua=[];function Va(){var a=-u.width/4,b={};Ua.push(b);b.x=a;b.y=0;b.o=300;b.i=400;b.cache=null;b.display=!1;b.buttons=[];b.update=function(){Ia&&b.J()};b.J=function(){};b.h=function(){};b.show=function(){};return b};function Wa(a,b){var d={};d.x=a.x-0;d.y=a.y-0;d.o=50;d.i=50;d.text="Satellite";d.h=function(){K.fillRect(d.x-25,d.y-25,50,50);z&&K.drawImage(z,d.x-z.width/2,d.y-z.height/2)};d.click=b;return d};var D=0,I=0,Xa=0,Ya=0,Za=0,$a=0,ab=0,bb=0,E=1,cb=1,J=2;function db(){if(Ra||Qa)cb=ka(cb+(Ra?.1:-.1),.1,2);J=Math.min(1+(E-.1),2);Ia&&!eb.display&&(fb=!0,Za=D,$a=I,ab=t,bb=v);Ja&&fb?(Xa=Za+(ab-t),Ya=$a+(bb-v)):Pa&&(fb=!1);var a=E;E+=.001>Math.abs(E-cb)?0:(cb-E)/5;a=E-a;.001<Math.abs(a)&&(D+=w*a,I+=x*a,Xa+=w*a,Ya+=x*a);D+=.001>Math.abs(D-Xa)?0:(Xa-D)/5;I+=.001>Math.abs(I-Ya)?0:(Ya-I)/5}function ob(){K.setTransform(1,0,0,1,0,0)}var fb;var pb="",u=aa.getElementById("c"),K=u.getContext("2d",{alpha:!1});qb();window.addEventListener("resize",qb,!1);function qb(){u.width=window.innerWidth;u.height=window.innerHeight;K.clearRect(0,0,u.width,u.height)}
function rb(){K.globalAlpha=1;for(var a=0;a<y.length;a++){var b=y[a];b.g&&sb(b);var d=Math.floor(4*E);b.m&&b.m[d]&&(d=b.m[d],K.save(),K.translate(b.x,b.y/J),K.scale(1,1/J),K.drawImage(d,0,0,d.width,d.height),K.scale(-1,1),K.drawImage(d,0,0),K.scale(1,-1),K.drawImage(d,0,0),K.scale(-1,1),K.drawImage(d,0,0),K.restore())}}
function sb(a){var b=a.g;if(b){var d=b.c.m;d||(d=b.c.m=[]);var f=Math.floor(4*E);d=d[f];if(!d){d=document.createElement("CANVAS");var g=0;y.forEach(function(a){a.g&&a.g.c===b.c&&(g=Math.max(g,a.g.j+40))});d.width=g;d.height=g;b.c.m[f]=d;d.G=[]}if(!d.G[a.id]){f=.1+f/4;var e=d.getContext("2d");e.setLineDash([5/f,5/f]);e.beginPath();e.lineWidth=2/f;e.strokeStyle=a.color;e.globalAlpha=.6;e.arc(0,0,b.j,0,h/4,!1);e.stroke();e.setLineDash(tb);d.G[a.id]=!0}}}var tb=[];
function ub(){K.globalAlpha=1;for(var a=0;a<y.length;a++){var b=y[a];if(b.type===vb){var d=ia(b,y[0]);K.save();K.translate(b.x,b.y/J);K.rotate(d);K.scale(.2,.2);K.drawImage(z,-z.width/2,-z.height/2)}else{if(!b.cache){var f=b.l?"#ffffff":b.color,g=b.l?50:10;d=b.size+g;var e=b,k=2*d,p=aa.createElement("CANVAS");p.width=2*d;p.height=k;e.cache=p;e=b.cache.getContext("2d");b.l&&(e.filter="blur(4px)");e.beginPath();e.fillStyle=f;e.shadowColor=b.color;e.shadowBlur=g;e.arc(d,d,b.size,0,h,!1);e.fill();if(!b.l)for(g=
f=b.size,e.beginPath(),e.arc(d,d,b.size,0,2*Math.PI,!1),e.clip();f--;)e.beginPath(),e.globalAlpha=.05,e.fillStyle="#000000",e.shadowColor="#000000",e.shadowBlur=10,e.save(),e.transform(1,0,0,1,d-g/2+(b.size-g)/2,d),e.arc(0,0,2*g--,-h/4,h/4),e.fill(),e.restore()}d=ia(b,y[0]);K.save();K.translate(b.x,b.y/J);K.rotate(d);b.l&&(d=1+.01*Math.sin(performance.now()/30),K.scale(d,d));K.drawImage(b.cache,-b.cache.width/2,-b.cache.height/2)}K.restore()}}
function wb(){K.beginPath();for(var a=75*(J-1),b=0;b<P.length;b++)for(var d=P[b],f=b;f<P.length;f++){var g=P[f];if(g!=d&&ha(g,d)<=Q.L){var e=d.y/J,k=g.y/J;K.moveTo(d.x,e);K.bezierCurveTo(d.x,e-a,g.x,k-a,g.x,k)}}K.globalAlpha=ka(.2/E,.2,.8);K.lineWidth=ka(1/E*2,1,4);K.strokeStyle="#00FF00";K.stroke();K.globalAlpha=1};var xb=document.createElement("CANVAS");xb.width=512;xb.height=512;var R=xb.getContext("2d");R.shadowBlur=1;R.globalAlpha=.5;for(var yb=300;yb--;){var zb=512*Math.random(),Ab=512*Math.random(),Bb=r(-1,100,90);R.fillStyle=Bb;R.shadowColor=Bb;R.beginPath();R.arc(zb,Ab,.5,0,2*Math.PI);R.fill()}var Cb=K.createPattern(xb,"repeat");
function Db(){var a=performance.now()/2E3;K.beginPath();K.rect(0,0,u.width,u.height);K.fillStyle=Cb;K.translate(.5*u.width,.5*u.height);K.scale(.5,.5);K.translate(-D/25,-I/25);K.rotate(a/200);K.fill();K.rotate(-a/200);K.scale(2,2);K.translate(-D/50,-I/50);K.fill()}var Eb=document.createElement("CANVAS"),Fb=Eb.getContext("2d",{alpha:!1});Eb.width=512;Eb.height=512;Fb.beginPath();var Xb=Fb.createRadialGradient(256,256,0,256,256,256);Xb.addColorStop(0,"#141e28");Xb.addColorStop(1,"#000000");
Fb.fillStyle=Xb;Fb.fillRect(0,0,512,512);var y=[],P=[],Yb=[],vb=2;
function Zb(a,b,d,f,g,e){void 0===e&&(e=0);var k={name:"Some Shithole Planet",type:0,x:0,y:0};k.color=a;k.size=b;k.l=!1;k.id=y.length.toString();d&&(k.g={c:d,j:f,speed:g,angle:e});k.update=function(){if(k.g){var a=k.g;a.angle+=a.speed;k.x=a.j*Math.cos(a.angle)+a.c.x;k.y=a.j*Math.sin(a.angle)+a.c.y}};k.h=function(){var a=k.g;if(a){K.beginPath();K.globalAlpha=.4;K.strokeStyle=k.color;K.lineWidth=4/E;K.save();var b=1/J;K.transform(1,0,0,b,a.c.x,a.c.y*b);K.arc(0,0,a.j,a.angle-a.speed*a.j/2,a.angle,0>
a.speed);K.restore();K.stroke()}};y.push(k);return k}function $b(a,b,d,f,g,e){void 0===e&&(e=0);a=Zb(a,b,d,f+b/2,g,e);a.name="Planet";a.type=1;a.update=ba(a.update,function(){});return a}function ac(a){void 0!==ja(bc,a,P)&&(a=Zb(r(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=3,a.update=ba(a.update,function(){Q.s+=Q.M}))}var bc=4;function S(a){var b=ja(cc,a,P);void 0!==b&&(a=Zb(r(160,100,50),2,a,5*a.size,.01,b),a.name="Satellite",a.type=vb,a.index=P.length,P.push(a))}
var cc=3;function dc(a){var b=ja(ec,a,Yb);void 0!==b&&(a=Zb(r(33,100,50),2,a,7*a.size,.005,b),a.name="Defense Platform",a.type=4,a.index=Yb.length,Yb.push(a))}var ec=2;function fc(a,b){this.x=a;this.y=b;this.speed=5;this.direction=0;this.target=y[0];gc.push(this)}
fc.prototype={update:function(){var a=ia(this,this.target)-this.direction+h/2;this.direction+=.01*(a-Math.floor(a/h)*h-h/2);this.x-=this.speed*Math.cos(this.direction);this.y-=this.speed*Math.sin(this.direction);100>ha(this,this.target)&&gc.splice(gc.indexOf(this),1)},h:function(){K.save();K.translate(this.x,this.y/J-20*J);K.scale(.2,.2/J);K.rotate(this.direction);K.drawImage(B,-B.width/2,-B.height/2);K.restore()}};var gc=[];var hc=!1,ic=60;
function jc(){var a=u.width/2,b=u.height/2;K.fillStyle="#FFFFFF";K.textAlign="center";K.textBaseline="middle";K.shadowColor="#FFFFFF";K.shadowBlur=50+2*Math.sin(performance.now()/100);K.font="small-caps 700 256px monospace";K.fillText("X",a,b-64);K.fillText("e o",a,b-90);K.shadowBlur=0;K.font="small-caps 700 32px monospace";xa?K.fillText("Loading music...",a,b+64):za?K.fillText("Loading sounds...",a,b+64):K.fillText("Click to continue!",a,b+64);K.font="small-caps 700 16px monospace";K.fillText("Created by",
a,u.height-68);K.fillText("ai Doge & Jack Oatley",a,u.height-48);K.fillText("for #js13k",a,u.height-28)};var eb=function(){var a=Va();a.buttons.push(Wa(a,function(){wa("choose a target");a.H()}));a.show=function(b){Sa=a;a.display=!0;a.target=b};a.H=function(){a.target=null;a.display=!1;Sa=null};a.J=function(){Sa==a&&qa(a.x,a.y,a.o,a.i)?a.buttons.forEach(function(a){qa(a.x,a.y,a.o,a.i)&&a.click()}):a.H()};a.h=function(){K.fillStyle="#141e28";K.fillRect(a.x-a.o/2,a.y-a.i/2,a.o,a.i);K.fillStyle="#ffffff";K.textAlign="center";K.font="24px monospace";K.fillText((Q.c===a.target?"Base":"")+" "+a.target.name,
a.x,a.y-a.i/2+20);var b=a.target.cache;K.drawImage(b,a.x-b.width/2,a.y-b.height/2-a.i/4);a.buttons.forEach(function(a){a.h()})};return a}(),Q=null,kc=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var lc=r(60,100,50),T=Zb(lc,50,null,null,null,null);T.name="The Sun";T.type=0;T.l=!0;var U=$b(r(180,39,62),10,T,500,.003,c()*h),Y={};Y.c=U;Y.M=.01;Y.N=300;Y.O=0;Y.P=0;Y.L=500;Y.s=0;Q=Y;$b(r(-1,60,70),5,U,100,-.002,c()*h);var Z=$b(r(-1,60,70),20,T,1123,.0015,c()*h);
$b(r(-1,60,70),5,Z,8*Z.size,.01,c()*h);$b(r(-1,60,70),10,Z,9*Z.size,.005,null);$b(r(-1,60,70),30,T,2532,-.001,c()*h);ac(U);ac(Z);S(U);S(T);S(T);S(T);S(Z);S(Z);S(Z);dc(U);dc(U);dc(U);dc(Z);var mc=performance.now(),nc=1E3/60,oc=0,pc=0,qc=[];
(function rc(a){requestAnimationFrame(rc);var d=mc+nc;qc.push(1/((a-oc)/1E3));oc=a;if(60<qc.length){var f=0,g=1E3,e=0;qc.shift();qc.forEach(function(a){f+=a;g=Math.min(g,a);e=Math.max(e,a)});pc=Math.floor(f/60)+", "+~~g+" - "+~~e}a>d&&(sc(Math.min(Math.floor((a-mc)/nc),60)),tc(),mc=a)})(mc);
function sc(a){if(0===kc)0<ic--||(xa?Fa():za?Ha():(hc||(hc=!0,wa("Welcum to Exo")),Ia&&(kc=1)));else if(1===kc){pb="";db();Ua.forEach(function(a){a.display&&a.update()});y.forEach(function(a){a.update()});gc.forEach(function(a){a.update()});var b=Math.random()*h;new fc(3E3*Math.cos(b),3E3*Math.sin(b));b=ra();64>ha(b,{x:w,y:x})&&(pb=b.name,Sa||!Pa||Ja||1!=b.type||(wa("selected "+b.name),eb.show(b),ta.play()))}Qa=Ra=Pa=Ia=!1;--a&&sc(a)}
function tc(){ob();K.clearRect(0,0,u.width,u.height);K.drawImage(Eb,Math.floor(.5*u.width-D-2048),Math.floor(.5*u.height-I-2048),4096,4096);Db();if(0===kc)ob(),jc();else{K.setTransform(E,0,0,E,-D+u.width/2,-I+u.height/2);y.forEach(function(a){a.h()});K.globalAlpha=1;rb();ub();gc.forEach(function(a){a.h()});wb();var a=ra();64>ha(a,{x:w,y:x})&&(K.beginPath(),K.moveTo(a.x,a.y/J),K.lineTo(w,x/J),K.strokeStyle="#ffffff",K.stroke());K.setTransform(1,0,0,1,u.width/2,u.height/2);Ua.forEach(function(a){a.display&&
a.h()});ob();K.font="14px monospace";K.textBaseline="top";K.textAlign="left";K.fillStyle="#ffffff";K.fillText("#js13k tower defense prototype",20,20);K.fillText("https://github.com/scorp200/td13k",20,40);K.fillText("framerate: "+pc,20,60);K.fillText("mouse (gui): "+t+", "+v,20,80);K.fillText("mouse (view): "+w+", "+x,20,100);K.fillText("planet name: "+pb,20,120);K.fillText("view x: "+D,20,160);K.fillText("view y: "+I,20,180);K.fillText("view zoom: "+E,20,200);K.fillText("view tilt: "+J,20,220);K.fillText("minerals: "+
Math.floor(100*Q.s)/100,20,260)}};}).call(this);
