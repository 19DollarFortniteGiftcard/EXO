<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),l=d.getContext("2d",{alpha:!1});var n=Math.random,r=2*Math.PI;function aa(a,c){return function(){a();c()}}function t(a,c){var b=a.x-c.x;a=a.y-c.y;return Math.sqrt(b*b+a*a)}function ea(a,c){return Math.atan2(a.y-c.y,a.x-c.x)}function fa(a,c,b){var e=0;b.forEach(function(b){b.g.f==c&&(e+=r/a)});if(!(e>=r))return e}function v(a,c,b){return"hsl("+(0>a?360*n():a)+","+(0>c?100*n():c)+"%,"+(0>b?100*n():b)+"%)"}function ha(a,c,b){return a>b?b:a<c?c:a}function ia(a,c,b,e){var f=w,g=x;return f>a&&f<a+b&&g>c&&g<c+e}
function ja(){for(var a={x:y,y:z},c=999999,b=A[0],e=A.length;e--;){var f=t(A[e],a);f<c&&(c=f,b=e)}return A[b]};var ka=speechSynthesis,la=!1,qa;ka&&(la=!0,qa=ka.getVoices(),0>=qa.length&&(ka.onvoiceschanged=function(){qa=ka.getVoices()}));function B(a){la&&(ka.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=qa[3],ka.speak(a))};function ra(){function a(a){return Math.sin(6.283184*a)}var c=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],b,e,f,g,k;this.I=function(a){b=a;e=a.B;f=0;g=a.w*a.v*(e+1)*2;k=new Int32Array(g)};this.K=function(){var h,ma,R,u,ba,S=new Int32Array(g),p=b.F[f],ca=b.w,ua=b.v,Ra=0,va=0,J;var K=!1;var wa=[];for(ma=0;ma<=e;++ma){var na=p.p[ma];for(R=0;R<ua;++R){if(ba=na?p.c[na-1].a[R]:0)p.b[ba-1]=p.c[na-1].a[R+ua]||0,16>ba&&(wa=[]);var Pb=c[p.b[15]],Qb=
p.b[16]/512,Rb=Math.pow(2,p.b[17]-9)/ca,Sb=p.b[18],lb=p.b[19],Tb=135.82764118168*p.b[20]/44100,Ub=1-p.b[21]/255,Sa=1E-5*p.b[22],Vb=p.b[23]/32,Wb=p.b[24]/512,Xb=6.283184*Math.pow(2,p.b[25]-9)/ca,mb=p.b[26]/255,Ta=p.b[27]*ca&-2;ba=(ma*ua+R)*ca;for(u=0;4>u;++u)if(h=na?p.c[na-1].n[R+u*ua]:0){if(!wa[h]){var m=wa;var T=h;var nb=J=void 0,xa,L,q=p,ob=h,Yb=c[q.b[0]],Zb=q.b[1],$b=q.b[3],ac=c[q.b[4]],bc=q.b[5],cc=q.b[8],pb=q.b[9],da=q.b[10]*q.b[10]*4,ya=q.b[11]*q.b[11]*4,Ua=q.b[12]*q.b[12]*4,dc=1/Ua,oa=q.b[13],
ec=ca*Math.pow(2,2-q.b[14]),qb=new Int32Array(da+ya+Ua),rb=0,sb=0;for(xa=L=0;L<da+ya+Ua;L++,xa++){0<=xa&&(oa=oa>>8|(oa&255)<<4,xa-=ec,nb=.003959503758*Math.pow(2,(ob+(oa&15)+q.b[2]-128-128)/12),J=.003959503758*Math.pow(2,(ob+(oa&15)+q.b[6]-128-128)/12)*(1+8E-4*q.b[7]));var U=1;L<da?U=L/da:L>=da+ya&&(U-=(L-da-ya)*dc);var pa=nb;$b&&(pa*=U*U);rb+=pa;var Va=Yb(rb)*Zb;pa=J;cc&&(pa*=U*U);sb+=pa;Va+=ac(sb)*bc;pb&&(Va+=(2*Math.random()-1)*pb);qb[L]=80*Va*U|0}m[T]=qb}T=wa[h];h=0;for(m=2*ba;h<T.length;h++,
m+=2)S[m]+=T[h]}for(h=0;h<ca;h++)u=2*(ba+h),(m=S[u])||K?(K=Tb,Sb&&(K*=Pb(Rb*u)*Qb+.5),K=1.5*Math.sin(K),Ra+=K*va,m=Ub*(m-va)-Ra,va+=K*m,m=3==lb?va:1==lb?m:Ra,Sa&&(m*=Sa,m=1>m?-1<m?a(.25*m):-1:1,m/=Sa),m*=Vb,K=1E-5<m*m,T=Math.sin(Xb*u)*Wb+.5,J=m*(1-T),m*=T):J=0,u>=Ta&&(J+=S[u-Ta+1]*mb,m+=S[u-Ta]*mb),S[u]=J|0,S[u+1]=m|0,k[u]+=J|0,k[u+1]+=m|0}}f++;return f/b.D};this.J=function(){var a=44+2*g-8,b=a-36,c=new Uint8Array(44+2*g);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,
32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<g;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var sa={F:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],c:[{n:[163],a:[]}]}],w:5513,v:1,B:0,D:1};var C=document.createElement("CANVAS"),D=C.getContext("2d");C.width=20;C.height=140;D.fillStyle="#dddddd";D.fillRect(8,50,4,40);D.fillStyle="#639bff";D.fillRect(2,0,15,60);D.fillRect(2,80,15,60);D.fillStyle="#9badb7";D.fillRect(2,65,17,10);D.fillRect(0,66,2,8);var ta=document.createElement("CANVAS"),za=ta.getContext("2d");ta.width=32;ta.height=32;za.fillStyle="#ff0000";za.moveTo(0,16);za.lineTo(32,0);za.lineTo(24,16);za.lineTo(32,32);za.fill();var Aa=0,Ba=0,Ca=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function Da(){for(var a=100;a--;){var c=Math.random()*r;(new Ea(3E3*Math.cos(c),3E3*Math.sin(c))).direction=c}};var Fa=!0,Ga=0,Ha=[],Ia=!0,Ja=[],Ka=sa,La=new ra;La.i=new Audio;La.I(Ka);Ja.push(La);sa=La.i;
var Na=Ma({F:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],c:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],c:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],c:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],c:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],c:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],c:[{n:[147],a:[]}]}],w:5513,v:32,B:26,D:8}),Oa=Ma({F:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],c:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],c:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],c:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],c:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],c:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],c:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],w:6300,v:32,B:30,D:8});function Ma(a){var c=new ra;c.i=new Audio;c.H=!0;c.I(a);Ha.push(c);return c.i}var Pa=0;
function Qa(){for(var a=0;a<Ha.length;a++){var c=Ha[a];if(c.H){c.H=1<=c.K();Pa+=1;var b=c.J();b=URL.createObjectURL(new Blob([b],{type:"audio/wav"}));c.i.src=b}}Pa>=Ha.length&&(Fa=!1)}var Wa=0;function Xa(){for(var a=0;a<Ja.length;a++){var c=Ja[a];if(1<=c.K()){Wa+=1;var b=c.J();b=URL.createObjectURL(new Blob([b],{type:"audio/wav"}));c.i.src=b}}Wa>=Ja.length&&(Ia=!1)}
function Ya(a){a.W||(a.W=!0,a.addEventListener("ended",function(){this.currentTime=0;Ga+=1;Ga%=Ha.length;console.log(Ga);Ya(Ha[Ga].i)},!1),a.play());a.play();a.volume=.5};var w=0,x=0,y=0,z=0,Za=!1,$a=!1,ab=!1,bb=!1,cb=!1,db=null,eb;window.addEventListener("mousemove",function(a){var c=d.getBoundingClientRect();w=a.clientX-c.left;x=a.clientY-c.top;y=(w+E-d.width/2)/F;z=(x+G-d.height/2)*H/F;eb&&($a=!0)},!1);window.addEventListener("mousedown",function(){eb=Za=!0},!1);window.addEventListener("mouseup",function(){eb=!1;$a||(ab=!0);$a=!1},!1);window.addEventListener("wheel",function(a){bb=0<a.deltaY;cb=0>a.deltaY},!1);var I={x:0,y:0,elements:[],G:"",S:function(){var a=d.width/2,c=d.height;I.elements=[fb(I,a-24-60,c-64,48,48,"Build Satellite",null,gb),fb(I,a-24,c-64,48,48,"Build Mining Station",null,hb),fb(I,a+36,c-64,48,48,"Build Defense Platform",null,ib)]},update:function(){I.G="";jb();I.elements.forEach(function(a){a.update()})},h:function(){kb();I.elements.forEach(function(a){a.h()});l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.font="small-caps 700 32px monospace";l.fillText("next wave in",
d.width/2,32);l.font="700 64px monospace";l.fillText(~~(Ba/60),d.width/2,96);l.font="small-caps 700 32px monospace";l.fillText("minerals",d.width/2+300,48);l.fillText(~~M.C,d.width/2+300,80);l.font="small-caps 700 32px monospace";l.fillText("energy",d.width/2+600,48);l.fillText(~~M.l,d.width/2+600,80);l.font="small-caps 700 32px monospace";l.fillText("survived",d.width/2-300,48);l.fillText(Aa+" waves",d.width/2-300,80);l.font="small-caps 700 32px monospace";l.fillText("base status",d.width/2-600,
48);l.fillText(~~M.m+"%",d.width/2-600,80);l.font="small-caps 700 24px monospace";l.fillText(I.G,d.width/2,d.height-96)}};function gb(){B("Select an area to build the satellite")}function hb(){B("Select an area to build the mining station")}function ib(){B("Select an area to build the defense platform")}I.S();var tb=[];
function ub(){var a=d.width/2-150,c=d.height/2-200,b={};tb.push(b);b.x=a;b.y=c;b.A=300;b.L=400;b.cache=null;b.display=!1;b.buttons=[];b.update=function(){b.display&&Za&&b.R()};b.R=function(){};b.h=function(){};b.show=function(){};return b}function jb(){for(var a=tb.length;a--;)tb[a].update()}function kb(){for(var a=tb.length;a--;)tb[a].display&&tb[a].h()};function fb(a,c,b,e,f,g,k,h){c=a.x+c;b=a.y+b;return{update:function(){var a=w,k=x;a>c&&a<c+e&&k>b&&k<b+f&&(I.G=g,Za&&h())},h:function(){l.fillStyle="#FFF";l.fillRect(c,b,e,f);k&&l.drawImage(k,c,b,e,f)}}};var E=0,G=0,vb=0,wb=0,xb=0,yb=0,zb=0,Ab=0,F=1,Bb=1,H=2;function Cb(){if(cb||bb)Bb=ha(Bb+(cb?.1:-.1),.1,2);H=Math.min(1+(F-.1),2);Za&&!Db.display&&(Eb=!0,xb=E,yb=G,zb=w,Ab=x);$a&&Eb?(vb=xb+(zb-w),wb=yb+(Ab-x)):ab&&(Eb=!1);var a=F;F+=.001>Math.abs(F-Bb)?0:(Bb-F)/5;a=F-a;.001<Math.abs(a)&&(E+=y*a,G+=z*a,vb+=y*a,wb+=z*a);E+=.001>Math.abs(E-vb)?0:(vb-E)/5;G+=.001>Math.abs(G-wb)?0:(wb-G)/5}function Fb(){l.setTransform(1,0,0,1,0,0)}var Eb;var Gb="";Hb();window.addEventListener("resize",Hb,!1);function Hb(){d.width=window.innerWidth;d.height=window.innerHeight;l.clearRect(0,0,d.width,d.height);I.S()}function Ib(){l.globalAlpha=1;for(var a=A.length;a--;){var c=A[a];c.g&&Jb(c);var b=Math.floor(4*F);c.o&&c.o[b]&&(b=c.o[b],l.save(),l.translate(c.x,c.y/H),l.scale(1,1/H),l.drawImage(b,0,0,b.width,b.height),l.scale(-1,1),l.drawImage(b,0,0),l.scale(1,-1),l.drawImage(b,0,0),l.scale(-1,1),l.drawImage(b,0,0),l.restore())}}
function Jb(a){var c=a.g;if(c){var b=c.f.o;b||(b=c.f.o=[]);var e=Math.floor(4*F);b=b[e];if(!b){b=document.createElement("CANVAS");var f=0;A.forEach(function(a){a.g&&a.g.f===c.f&&(f=Math.max(f,a.g.j+40))});b.width=f;b.height=f;c.f.o[e]=b;b.M=[]}if(!b.M[a.id]){e=.1+e/4;var g=b.getContext("2d");g.setLineDash([5/e,5/e]);g.beginPath();g.lineWidth=2/e;g.strokeStyle=a.color;g.globalAlpha=.6;g.arc(0,0,c.j,0,r/4,!1);g.stroke();g.setLineDash(Kb);b.M[a.id]=!0}}}var Kb=[];
function Lb(){l.globalAlpha=1;for(var a=A.length;a--;){var c=A[a];if(c.type===Mb){var b=ea(c,A[0]);l.save();l.translate(c.x,c.y/H);l.rotate(b);l.scale(.2,.2);l.drawImage(C,-C.width/2,-C.height/2)}else{if(!c.cache){var e=c.type===Nb,f=e?"#ffffff":c.color,g=e?50:10;b=c.size+g;var k=0,h=c.cache=document.createElement("CANVAS");h.width=2*b;h.height=2*b;h=c.cache.getContext("2d");e&&(k=1E3,h.shadowOffsetY=k);h.beginPath();h.fillStyle=f;h.shadowColor=c.color;h.shadowBlur=g;h.arc(b,b-k,c.size,0,r,!1);h.fill();
e&&(h.beginPath(),h.shadowColor="#FFF",h.shadowBlur=5,h.arc(b,b-k,c.size-5,0,r,!1),h.fill());if(!e)for(f=e=c.size,h.beginPath(),h.arc(b,b,c.size,0,2*Math.PI,!1),h.clip();e--;)h.beginPath(),h.globalAlpha=.05,h.fillStyle="#000",h.shadowColor="#000",h.shadowBlur=10,h.save(),h.transform(1,0,0,1,b-f/2+(c.size-f)/2,b),h.arc(0,0,2*f--,-r/4,r/4),h.fill(),h.restore()}b=ea(c,A[0]);l.save();l.translate(c.x,c.y/H);l.rotate(b);c.O&&(b=1+.01*Math.sin(performance.now()/30),l.scale(b,b));l.drawImage(c.cache,-c.cache.width/
2,-c.cache.height/2)}l.restore()}}function Ob(){l.beginPath();for(var a=75*(H-1),c=0;c<N.length;c++)for(var b=N[c],e=c;e<N.length;e++){var f=N[e];if(f!=b&&t(f,b)<=M.U){var g=b.y/H,k=f.y/H;l.moveTo(b.x,g);l.bezierCurveTo(b.x,g-a,f.x,k-a,f.x,k)}}l.globalAlpha=ha(.2/F,.2,.8);l.lineWidth=ha(1/F*2,1,4);l.strokeStyle="#0F0";l.stroke();l.globalAlpha=1};var fc=document.createElement("CANVAS");fc.width=512;fc.height=512;var O=fc.getContext("2d");O.shadowBlur=1;O.globalAlpha=.5;for(var gc=300;gc--;){var hc=512*Math.random(),ic=512*Math.random(),jc=v(-1,100,90);O.fillStyle=jc;O.shadowColor=jc;O.beginPath();O.arc(hc,ic,.5,0,2*Math.PI);O.fill()}var kc=l.createPattern(fc,"repeat");
function lc(){var a=performance.now()/2E3;l.beginPath();l.rect(0,0,d.width,d.height);l.fillStyle=kc;l.translate(.5*d.width,.5*d.height);l.scale(.5,.5);l.translate(-E/25,-G/25);l.rotate(a/200);l.fill();l.rotate(-a/200);l.scale(2,2);l.translate(-E/50,-G/50);l.fill()}var mc=document.createElement("CANVAS"),nc=mc.getContext("2d",{alpha:!1});mc.width=512;mc.height=512;nc.beginPath();var oc=nc.createRadialGradient(256,256,0,256,256,256);oc.addColorStop(0,"#141e28");oc.addColorStop(1,"#000000");
nc.fillStyle=oc;nc.fillRect(0,0,512,512);var A=[],N=[],pc=[],Nb=0,Mb=2;
function qc(a,c,b,e,f,g){void 0===g&&(g=0);var k={name:"Some Shithole Planet"};k.type=Nb;k.x=0;k.y=0;k.color=a;k.size=c;k.O=!1;k.id=A.length.toString();k.m=100;b&&(k.g={f:b,j:e,speed:f,angle:g});k.update=function(){if(k.g){var a=k.g;a.angle+=a.speed;k.x=a.j*Math.cos(a.angle)+a.f.x;k.y=a.j*Math.sin(a.angle)+a.f.y}};k.h=function(){var a=k.g;if(a){l.beginPath();l.globalAlpha=.4;l.strokeStyle=k.color;l.lineWidth=4/F;l.save();var b=1/H;l.transform(1,0,0,b,a.f.x,a.f.y*b);l.arc(0,0,a.j,a.angle-a.speed*a.j/
2,a.angle,0>a.speed);l.restore();l.stroke()}};A.push(k);return k}function rc(a,c,b,e,f,g){void 0===g&&(g=0);a=qc(a,c,b,e+c/2,f,g);a.name="Planet";a.type=1;a.update=aa(a.update,function(){});return a}function sc(a){void 0!==fa(tc,a,N)&&(a=qc(v(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=3,a.update=aa(a.update,function(){M.C+=M.X}))}var tc=4;
function P(a){var c=fa(uc,a,N);void 0!==c&&(a=qc(v(160,100,50),2,a,5*a.size,.01,c),a.name="Satellite",a.type=Mb,a.index=N.length,a.update=aa(a.update,function(){M.l+=M.V}),N.push(a))}var uc=3;
function vc(a){var c=fa(wc,a,pc);if(void 0!==c){var b=qc(v(33,100,50),2,a,7*a.size,.005,c);b.name="Defense Platform";b.type=4;b.index=pc.length;b.target=null;b.Y=1E3;b.s=0;b.T=.2;b.P=!1;pc.push(b);b.update=aa(b.update,function(){if(0>=b.s--){for(var a=null,c=b.Y,g=Q.length;g--;){var k=Q[g],h=t(b,k);h<c&&(a=k,c=h)}b.target=a;b.P=.5<Math.random()?!0:!1;b.target&&M.l>=b.T&&(b.target.m-=2,b.s=2,M.l-=b.T,a=b.x,c=b.y,g=ea(b,b.target),k=b.P?2E3:t(b,b.target),V["#FF0"]||(V["#FF0"]=[]),V["#FF0"].push({x:a,
y:c,angle:g,u:k-50}))}else b.target=null})}}var wc=2;var V={};function xc(){for(var a in V)for(var c=V[a].length;c--;){var b=V[a][c];b.u-=50;0>=b.u?V[a].splice(c,1):(b.x-=50*Math.cos(b.angle),b.y-=50*Math.sin(b.angle))}}function yc(){l.lineWidth=1;for(var a in V){l.strokeStyle=a;l.beginPath();for(var c=V[a].length;c--;){var b=V[a][c],e=b.x+10*Math.cos(b.angle),f=b.y/H+10*Math.sin(b.angle);l.moveTo(b.x,b.y/H);l.lineTo(e,f)}l.stroke()}};function Ea(a,c){this.x=a;this.y=c;this.z=Math.floor(20*Math.random());this.direction=0;this.m=10;this.target=M.f;this.s=10*Math.random();Q.push(this)}
Ea.prototype={update:function(){for(var a={x:this.x,y:this.y},c=999999,b=A[0],e=A.length;e--;)if(1<A[e].type){var f=t(A[e],a);f<c&&(c=f,b=e)}this.target=A[b];a=ea(this,this.target)-this.direction+r/2;this.direction+=.01*(a-Math.floor(a/r)*r-r/2);this.x-=5*Math.cos(this.direction);this.y-=5*Math.sin(this.direction);0>=this.s--&&(this.s=10,e=t(this,this.target),500>e&&(a=this.x,c=this.y,b=ea(this,this.target),e=.5<Math.random()?2E3:e,V["#F00"]||(V["#F00"]=[]),V["#F00"].push({x:a,y:c,angle:b,u:e-50})));
0>=this.m&&Q.splice(Q.indexOf(this),1)}};var Q=[];function zc(){for(var a=Q.length;a--;)for(var c=Q[a],b=a;0<b--;){var e=Q[b],f=c.x-e.x,g=c.y-e.y;200>f*f+g*g&&(f=.25*(c.x-e.x),g=.25*(c.y-e.y),c.x+=f,c.y+=g,e.x-=f,e.y-=g)}for(a=Q.length;a--;)Q[a].update()}function Ac(){for(var a=-ta.width/2,c=-ta.height/2,b=Q.length;b--;){var e=Q[b];l.save();l.translate(e.x,e.y/H-e.z*H);l.scale(.3,.3/H);l.rotate(e.direction);l.drawImage(ta,a,c);l.restore()}};var Bc=!1,Cc=60;
function Dc(){var a=d.width/2,c=d.height/2;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.shadowColor="#FFF";l.shadowBlur=50+2*Math.sin(performance.now()/100);l.font="small-caps 700 256px monospace";l.fillText("X",a,c-64);l.fillText("e o",a,c-90);l.shadowBlur=0;l.font="small-caps 700 32px monospace";Fa?l.fillText("Loading music...",a,c+64):Ia?l.fillText("Loading sounds...",a,c+64):l.fillText("Click to continue!",a,c+64);l.font="small-caps 700 16px monospace";l.fillText("Created by",a,
d.height-68);l.fillText("ai Doge & Jack Oatley",a,d.height-48);l.fillText("for #js13k",a,d.height-28)};var Db=function(){var a=ub();a.buttons.push(fb(a,125,175,50,50,"Satellite",C,function(){B("choose a target");a.N()}));a.show=function(c){db=a;a.display=!0;a.target=c};a.N=function(){a.target=null;a.display=!1;db=null};a.R=function(){db==a&&ia(a.x,a.y,a.A,a.L)?a.buttons.forEach(function(a){a.update()}):a.N()};a.h=function(){l.fillStyle="#141e28";l.fillRect(a.x,a.y,a.A,a.L);l.fillStyle="#fff";l.textAlign="center";l.font="24px monospace";l.fillText((M.f===a.target?"Base":"")+" "+a.target.name,a.x+a.A/
2,a.y+20);var c=a.target.cache;l.drawImage(c,a.x+a.A/2-c.width/2,a.y+100-c.height/2);a.buttons.forEach(function(a){a.h()})};return a}(),M=null,W=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);document.addEventListener("keypress",function(a){console.log(a.key);" "===a.key&&(3===W?W=1:W=3)});var Ec=v(60,100,50),X=qc(Ec,50,null,null,null,null);X.name="The Sun";X.type=Nb;X.O=!0;var Y=rc(v(180,39,62),10,X,500,.003,n()*r);M={f:Y,m:100,X:.01,V:.02,Z:300,$:0,aa:0,U:500,C:0,l:0};
rc(v(-1,60,70),5,Y,100,-.002,n()*r);var Z=rc(v(-1,60,70),20,X,1123,.0015,n()*r);rc(v(-1,60,70),5,Z,8*Z.size,.01,n()*r);rc(v(-1,60,70),10,Z,9*Z.size,.005,null);rc(v(-1,60,70),30,X,2532,-.001,n()*r);sc(Y);sc(Z);P(Y);P(X);P(X);P(X);P(Z);P(Z);P(Z);vc(Y);vc(Y);vc(Y);vc(Z);var Fc=performance.now(),Gc=1E3/60,Hc=0,Ic=0,Jc=[];
(function Kc(a){requestAnimationFrame(Kc);var b=Fc+Gc;Jc.push(1/((a-Hc)/1E3));Hc=a;if(60<Jc.length){var e=0,f=1E3,g=0;Jc.shift();Jc.forEach(function(a){e+=a;f=Math.min(f,a);g=Math.max(g,a)});Ic=Math.floor(e/60)+", "+~~f+" - "+~~g}a>b&&(Lc(Math.min(Math.floor((a-Fc)/Gc),60)),Mc(),Fc=a)})(Fc);
function Lc(a){if(0===W)0<Cc--||(Fa?Qa():Ia?Xa():(Bc||(Bc=!0,Ya(Oa),B("Welcum to Exo")),Za&&(W=1,Na.pause&&Ya(Oa))));else{Gb="";Cb();I.update();1===W&&(A.forEach(function(a){a.update()}),Ba--||(Da(),Ba=600,Aa++,B(Ca[~~(Math.random()*Ca.length)])),zc(),xc());var c=ja();64>t(c,{x:y,y:z})&&(Gb=c.name,db||!ab||$a||1!=c.type||(B("selected "+c.name),Db.show(c),sa.play()))}bb=cb=ab=Za=!1;--a&&Lc(a)}
function Mc(){Fb();l.clearRect(0,0,d.width,d.height);l.drawImage(mc,Math.floor(.5*d.width-E-2048),Math.floor(.5*d.height-G-2048),4096,4096);lc();if(0===W)Fb(),Dc();else{l.setTransform(F,0,0,F,-E+d.width/2,-G+d.height/2);A.forEach(function(a){a.h()});l.globalAlpha=1;Ib();Lb();Ac();Ob();yc();var a=ja();64>t(a,{x:y,y:z})&&(l.beginPath(),l.moveTo(a.x,a.y/H),l.lineTo(y,z/H),l.strokeStyle="#ffffff",l.stroke());l.setTransform(1,0,0,1,d.width/2,d.height/2);Fb();I.h();l.font="14px monospace";l.textBaseline=
"top";l.textAlign="left";l.fillStyle="#fff";l.fillText("#js13k tower defense prototype",20,220);l.fillText("https://github.com/scorp200/td13k",20,240);l.fillText("framerate: "+Ic,20,260);l.fillText("mouse (gui): "+w+", "+x,20,280);l.fillText("mouse (view): "+y+", "+z,20,300);l.fillText("planet name: "+Gb,20,320);l.fillText("view x: "+E,20,360);l.fillText("view y: "+G,20,380);l.fillText("view zoom: "+F,20,400);l.fillText("view tilt: "+H,20,420)}};})();</script></body></html>

