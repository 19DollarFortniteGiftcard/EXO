<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),l=d.getContext("2d",{alpha:!1}),n=Math.PI,aa=2*n;var p=Math.random,u=2*Math.PI;function ba(a,b){return function(){a();b()}}function v(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function w(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ca(a){return a-Math.floor(a/aa)*aa}function ha(a,b,c){var e=0;c.forEach(function(c){c.h.f==b&&(e+=aa/a)});if(!(e>=aa))return e}function x(a,b,c){return"hsl("+(0>a?360*p():a)+","+(0>b?100*p():b)+"%,"+(0>c?100*p():c)+"%)"}function ia(a,b,c){return a>c?c:a<b?b:a}
function ja(a,b,c,e){var g=ka,f=la;return g>a&&g<a+c&&f>b&&f<b+e}function ma(){for(var a={x:y,y:z},b=999999,c=A[0],e=A.length;e--;){var g=v(A[e],a);g<b&&(b=g,c=e)}return A[c]};var na=speechSynthesis,oa=!1,sa;na&&(oa=!0,sa=na.getVoices(),0>=sa.length&&(na.onvoiceschanged=function(){sa=na.getVoices()}));function B(a){oa&&(na.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=sa[3%sa.length],na.speak(a))};function ta(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,e,g,f,k;this.o=function(a){c=a;e=a.A;g=0;f=a.v*a.u*(e+1)*2;k=new Int32Array(f)};this.K=function(){var h,E,R,t,da,S=new Int32Array(f),q=c.G[g],ea=c.v,xa=c.u,Va=0,ya=0,I;var J=!1;var za=[];for(E=0;E<=e;++E){var pa=q.p[E];for(R=0;R<xa;++R){if(da=pa?q.c[pa-1].a[R]:0)q.b[da-1]=q.c[pa-1].a[R+xa]||0,16>da&&(za=[]);var Tb=b[q.b[15]],Ub=q.b[16]/
512,Vb=Math.pow(2,q.b[17]-9)/ea,Wb=q.b[18],ob=q.b[19],Xb=135.82764118168*q.b[20]/44100,Yb=1-q.b[21]/255,Wa=1E-5*q.b[22],Zb=q.b[23]/32,$b=q.b[24]/512,ac=6.283184*Math.pow(2,q.b[25]-9)/ea,pb=q.b[26]/255,Xa=q.b[27]*ea&-2;da=(E*xa+R)*ea;for(t=0;4>t;++t)if(h=pa?q.c[pa-1].n[R+t*xa]:0){if(!za[h]){var m=za;var T=h;var qb=I=void 0,Aa,K,r=q,rb=h,bc=b[r.b[0]],cc=r.b[1],dc=r.b[3],ec=b[r.b[4]],fc=r.b[5],gc=r.b[8],sb=r.b[9],fa=r.b[10]*r.b[10]*4,Ba=r.b[11]*r.b[11]*4,Ya=r.b[12]*r.b[12]*4,hc=1/Ya,qa=r.b[13],ic=ea*
Math.pow(2,2-r.b[14]),tb=new Int32Array(fa+Ba+Ya),ub=0,vb=0;for(Aa=K=0;K<fa+Ba+Ya;K++,Aa++){0<=Aa&&(qa=qa>>8|(qa&255)<<4,Aa-=ic,qb=.003959503758*Math.pow(2,(rb+(qa&15)+r.b[2]-128-128)/12),I=.003959503758*Math.pow(2,(rb+(qa&15)+r.b[6]-128-128)/12)*(1+8E-4*r.b[7]));var U=1;K<fa?U=K/fa:K>=fa+Ba&&(U-=(K-fa-Ba)*hc);var ra=qb;dc&&(ra*=U*U);ub+=ra;var Za=bc(ub)*cc;ra=I;gc&&(ra*=U*U);vb+=ra;Za+=ec(vb)*fc;sb&&(Za+=(2*Math.random()-1)*sb);tb[K]=80*Za*U|0}m[T]=tb}T=za[h];h=0;for(m=2*da;h<T.length;h++,m+=2)S[m]+=
T[h]}for(h=0;h<ea;h++)t=2*(da+h),(m=S[t])||J?(J=Xb,Wb&&(J*=Tb(Vb*t)*Ub+.5),J=1.5*Math.sin(J),Va+=J*ya,m=Yb*(m-ya)-Va,ya+=J*m,m=3==ob?ya:1==ob?m:Va,Wa&&(m*=Wa,m=1>m?-1<m?a(.25*m):-1:1,m/=Wa),m*=Zb,J=1E-5<m*m,T=Math.sin(ac*t)*$b+.5,I=m*(1-T),m*=T):I=0,t>=Xa&&(I+=S[t-Xa+1]*pb,m+=S[t-Xa]*pb),S[t]=I|0,S[t+1]=m|0,k[t]+=I|0,k[t+1]+=m|0}}g++;return g/c.F};this.J=function(){var a=44+2*f-8,b=a-36,c=new Uint8Array(44+2*f);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,
0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<f;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var ua={G:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],c:[{n:[163],a:[]}]}],v:5513,u:1,A:0,F:1};var C=document.createElement("CANVAS"),D=C.getContext("2d");C.width=20;C.height=140;D.fillStyle="#dddddd";D.fillRect(8,50,4,40);D.fillStyle="#639bff";D.fillRect(2,0,15,60);D.fillRect(2,80,15,60);D.fillStyle="#9badb7";D.fillRect(2,65,17,10);D.fillRect(0,66,2,8);var va=document.createElement("CANVAS"),wa=va.getContext("2d");va.width=32;va.height=32;wa.fillStyle="#ff0000";wa.moveTo(0,16);wa.lineTo(32,0);wa.lineTo(24,16);wa.lineTo(32,32);wa.fill();var Ca=0,Da=0,Ea=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function Fa(){for(var a=100;a--;){var b=Math.random()*u;(new Ga(3E3*Math.cos(b),3E3*Math.sin(b))).direction=b}};var Ha=!0,Ia=0,Ja=[],Ka=!0,La=[],Ma=ua,Na=new ta;Na.i=new Audio;Na.m=!0;Na.o(Ma);La.push(Na);ua=Na.i;
var Pa=Oa({G:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],c:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],c:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],c:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],c:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],c:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],c:[{n:[147],a:[]}]}],v:5513,u:32,A:26,F:8}),Qa=Oa({G:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],c:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],c:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],c:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],c:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],c:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],c:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],v:6300,u:32,A:30,F:8});function Oa(a){var b=new ta;b.i=new Audio;b.m=!0;b.o(a);Ja.push(b);return b.i}var Ra=0;
function Sa(){for(var a=0;a<Ja.length;a++){var b=Ja[a];if(b.m){b.m=1<=b.K();Ra+=1;var c=b.J();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.i.src=c}}Ra>=Ja.length&&(Ha=!1)}var Ta=0;function Ua(){for(var a=0;a<La.length;a++){var b=La[a];if(b.m){b.m=1<=b.K();Ta+=1;var c=b.J();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.i.src=c}}Ta>=La.length&&(Ka=!1)}
function $a(a){a.U||(a.U=!0,a.addEventListener("ended",function(){this.currentTime=0;Ia+=1;Ia%=Ja.length;console.log(Ia);$a(Ja[Ia].i)},!1));a.play();a.volume=.5};var ka=0,la=0,y=0,z=0,ab=!1,bb=!1,cb=!1,db=!1,eb=!1,fb=null,gb;window.addEventListener("mousemove",function(a){var b=d.getBoundingClientRect();ka=a.clientX-b.left;la=a.clientY-b.top;y=(ka+F-d.width/2)/G;z=(la+H-d.height/2)*L/G;gb&&(bb=!0)},!1);window.addEventListener("mousedown",function(){gb=ab=!0},!1);window.addEventListener("mouseup",function(){gb=!1;bb||(cb=!0);bb=!1},!1);window.addEventListener("wheel",function(a){db=0<a.deltaY;eb=0>a.deltaY},!1);var M={x:0,y:0,elements:[],H:"",S:function(){var a=d.width/2,b=d.height;M.elements=[hb(M,a-24-60,b-64,48,48,"Build Satellite",null,ib),hb(M,a-24,b-64,48,48,"Build Mining Station",null,jb),hb(M,a+36,b-64,48,48,"Build Defense Platform",null,kb)]},update:function(){M.H="";lb();M.elements.forEach(function(a){a.update()})},g:function(){mb();M.elements.forEach(function(a){a.g()});l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.font="small-caps 700 32px monospace";l.fillText("next wave in",
d.width/2,32);l.font="700 64px monospace";l.fillText(~~(Da/60),d.width/2,96);l.font="small-caps 700 32px monospace";l.fillText("minerals",d.width/2+300,48);l.fillText(~~N.D,d.width/2+300,80);l.font="small-caps 700 32px monospace";l.fillText("energy",d.width/2+600,48);l.fillText(~~N.B,d.width/2+600,80);l.font="small-caps 700 32px monospace";l.fillText("survived",d.width/2-300,48);l.fillText(Ca+" waves",d.width/2-300,80);l.font="small-caps 700 32px monospace";l.fillText("base status",d.width/2-600,
48);l.fillText(~~N.l+"%",d.width/2-600,80);l.font="small-caps 700 24px monospace";l.fillText(M.H,d.width/2,d.height-96)}};function ib(){B("Select an area to build the satellite")}function jb(){B("Select an area to build the mining station")}function kb(){B("Select an area to build the defense platform")}M.S();var nb=[];
function wb(){var a=d.width/2-150,b=d.height/2-200,c={};nb.push(c);c.x=a;c.y=b;c.w=300;c.L=400;c.cache=null;c.display=!1;c.buttons=[];c.update=function(){c.display&&ab&&c.R()};c.R=function(){};c.g=function(){};c.show=function(){};return c}function lb(){for(var a=nb.length;a--;)nb[a].update()}function mb(){for(var a=nb.length;a--;)nb[a].display&&nb[a].g()};function hb(a,b,c,e,g,f,k,h){b=a.x+b;c=a.y+c;return{update:function(){var a=ka,k=la;a>b&&a<b+e&&k>c&&k<c+g&&(M.H=f,ab&&h())},g:function(){l.fillStyle="#FFF";l.fillRect(b,c,e,g);k&&l.drawImage(k,b,c,e,g)}}};var F=0,H=0,xb=0,yb=0,zb=0,Ab=0,Bb=0,Cb=0,G=1,Db=1,L=2;function Eb(){if(eb||db)Db=ia(Db+(eb?.1:-.1),.1,2);L=Math.min(1+(G-.1),2);ab&&!Fb.display&&(Gb=!0,zb=F,Ab=H,Bb=ka,Cb=la);bb&&Gb?(xb=zb+(Bb-ka),yb=Ab+(Cb-la)):cb&&(Gb=!1);var a=G;G+=.001>Math.abs(G-Db)?0:(Db-G)/5;a=G-a;.001<Math.abs(a)&&(F+=y*a,H+=z*a,xb+=y*a,yb+=z*a);F+=.001>Math.abs(F-xb)?0:(xb-F)/5;H+=.001>Math.abs(H-yb)?0:(yb-H)/5}function Hb(){l.setTransform(1,0,0,1,0,0)}var Gb;Ib();window.addEventListener("resize",Ib,!1);function Ib(){d.width=window.innerWidth;d.height=window.innerHeight;l.clearRect(0,0,d.width,d.height);M.S()}function Jb(){l.globalAlpha=1;for(var a=A.length;a--;){var b=A[a];b.h&&Kb(b);var c=Math.floor(4*G);b.s&&b.s[c]&&(c=b.s[c],l.save(),l.translate(b.x,b.y/L),l.scale(1,1/L),l.drawImage(c,0,0,c.width,c.height),l.scale(-1,1),l.drawImage(c,0,0),l.scale(1,-1),l.drawImage(c,0,0),l.scale(-1,1),l.drawImage(c,0,0),l.restore())}}
function Kb(a){var b=a.h;if(b){var c=b.f.s;c||(c=b.f.s=[]);var e=Math.floor(4*G);c=c[e];if(!c){c=document.createElement("CANVAS");var g=0;A.forEach(function(a){a.h&&a.h.f===b.f&&(g=Math.max(g,a.h.j+40))});c.width=g;c.height=g;b.f.s[e]=c;c.M=[]}if(!c.M[a.id]){e=.1+e/4;var f=c.getContext("2d");f.setLineDash([5/e,5/e]);f.beginPath();f.lineWidth=2/e;f.strokeStyle=a.color;f.globalAlpha=.6;f.arc(0,0,b.j,0,u/4,!1);f.stroke();f.setLineDash(Lb);c.M[a.id]=!0}}}var Lb=[];
function Mb(){l.globalAlpha=1;for(var a=A.length;a--;){var b=A[a];if(b.type===Nb){var c=w(b,A[0]);l.save();l.translate(b.x,b.y/L);l.rotate(c);l.scale(.2,.2);l.drawImage(C,-C.width/2,-C.height/2)}else{if(!b.cache){var e=b.type===Ob,g=e?"#FFF":b.color,f=e?50:10;c=b.size+f;var k=0,h=b.cache=document.createElement("CANVAS");h.width=2*c;h.height=2*c;h=b.cache.getContext("2d");e&&(k=1E3,h.shadowOffsetY=k);h.beginPath();h.fillStyle=g;h.shadowColor=b.color;h.shadowBlur=f;h.arc(c,c-k,b.size,0,u,!1);h.fill();
e&&(h.beginPath(),h.shadowColor="#FFF",h.shadowBlur=5,h.arc(c,c-k,b.size-5,0,u,!1),h.fill());if(!e)for(g=e=b.size,h.beginPath(),h.arc(c,c,b.size,0,2*Math.PI,!1),h.clip();e--;)h.beginPath(),h.globalAlpha=.05,h.fillStyle="#000",h.shadowColor="#000",h.shadowBlur=10,h.save(),h.transform(1,0,0,1,c-g/2+(b.size-g)/2,c),h.arc(0,0,2*g--,-u/4,u/4),h.fill(),h.restore()}c=w(b,A[0]);l.save();l.translate(b.x,b.y/L);l.rotate(c);b.O&&(c=1+.01*Math.sin(performance.now()/30),l.scale(c,c));l.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}l.restore()}}function Pb(a,b){b=b||[];b.push(a);for(var c=A.length;c--;){var e=A[c],g=0<=b.indexOf(e);a!==e&&!g&&(a===N.f||a.type===Nb)&&v(a,e)<=N.I&&Pb(e,b)}return b}
function Qb(){var a=Pb(N.f);l.beginPath();for(var b=75*(L-1),c=0;c<a.length;c++)for(var e=a[c],g=c;g<a.length;g++){var f=a[g];if(f!=e&&v(f,e)<=N.I&&(e===N.f||e.type===Nb)&&(f.type===Nb||f.type===Rb||f.type===Sb)){var k=e.y/L,h=f.y/L;l.moveTo(e.x,k);l.bezierCurveTo(e.x,k-b,f.x,h-b,f.x,h)}}l.globalAlpha=ia(.2/G,.2,.8);l.lineWidth=ia(1/G*2,1,4);l.strokeStyle="#0F0";l.stroke();l.globalAlpha=1};var jc=document.createElement("CANVAS");jc.width=512;jc.height=512;var O=jc.getContext("2d");O.shadowBlur=1;O.globalAlpha=.5;for(var kc=300;kc--;){var lc=512*Math.random(),mc=512*Math.random(),nc=x(-1,100,90);O.fillStyle=nc;O.shadowColor=nc;O.beginPath();O.arc(lc,mc,.5,0,2*Math.PI);O.fill()}var oc=l.createPattern(jc,"repeat");
function pc(){var a=performance.now()/2E3;l.beginPath();l.rect(0,0,d.width,d.height);l.fillStyle=oc;l.translate(.5*d.width,.5*d.height);l.scale(.5,.5);l.translate(-F/25,-H/25);l.rotate(a/200);l.fill();l.rotate(-a/200);l.scale(2,2);l.translate(-F/50,-H/50);l.fill()}var qc=document.createElement("CANVAS"),rc=qc.getContext("2d",{alpha:!1});qc.width=512;qc.height=512;rc.beginPath();var sc=rc.createRadialGradient(256,256,0,256,256,256);sc.addColorStop(0,"#141e28");sc.addColorStop(1,"#000000");
rc.fillStyle=sc;rc.fillRect(0,0,512,512);var A=[],tc=[],uc=[],Ob=0,Nb=2,Rb=3,Sb=4;
function vc(a,b,c,e,g,f){void 0===f&&(f=0);var k={name:"Some Shithole Planet"};k.type=Ob;k.x=0;k.y=0;k.color=a;k.size=b;k.O=!1;k.id=A.length.toString();k.l=100;c&&(k.h={f:c,j:e,speed:g,angle:f});k.update=function(){if(k.h){var a=k.h;a.angle+=a.speed;k.x=a.j*Math.cos(a.angle)+a.f.x;k.y=a.j*Math.sin(a.angle)+a.f.y}};k.g=function(){var a=k.h;if(a){l.beginPath();l.globalAlpha=.4;l.strokeStyle=k.color;l.lineWidth=4/G;l.save();var b=1/L;l.transform(1,0,0,b,a.f.x,a.f.y*b);l.arc(0,0,a.j,a.angle-a.speed*a.j/
2,a.angle,0>a.speed);l.restore();l.stroke()}};A.push(k);return k}function wc(a,b,c,e,g,f){void 0===f&&(f=0);a=vc(a,b,c,e+b/2,g,f);a.name="Planet";a.type=1;a.update=ba(a.update,function(){});return a}function xc(a){void 0!==ha(yc,a,tc)&&(a=vc(x(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=Rb,a.update=ba(a.update,function(){N.D+=N.V}))}var yc=4;
function P(a){var b=ha(zc,a,tc);void 0!==b&&(a=vc(x(160,100,50),2,a,5*a.size,.01,b),a.name="Satellite",a.type=Nb,a.index=tc.length,a.cache=C,a.update=ba(a.update,function(){N.B+=N.T}),tc.push(a))}var zc=3;function Ac(a){var b=ha(Bc,a,uc);void 0!==b&&(a=vc(x(33,100,50),2,a,7*a.size,.005,b),a.name="Defense Platform",a.type=Sb,a.index=uc.length,uc.push(a),a.P=Cc(a),a.update=ba(a.update,a.P.update),a.g=ba(a.g,a.P.g))}var Bc=2;
function Cc(a){var b=null,c=null,e=null;return{update:function(){for(var g=null,f=0,k=Q.length;k--;){var h=Q[k],E=v(a,h);E>f&&1E3>E&&(g=h,f=E)}if(b=g)for(e=w(a,b),null==c&&(c=e),c+=.01*Math.sign(ca(e-c+n)-n),g=Q.length;g--;)f=Q[g],k=ca(c-w(a,f)+n)-n,1E3>v(f,a)&&.1>Math.abs(k)&&(f.l-=10.5)},g:function(){if(b){l.beginPath();l.lineWidth=6+3*Math.sin(performance.now()/5);var e=l.createRadialGradient(a.x,a.y/L,100,a.x,a.y/L,1E3);e.addColorStop(0,"#FF0");e.addColorStop(1,"rgba(0, 0, 0, 0)");l.strokeStyle=
e;l.moveTo(a.x,a.y/L);l.lineTo(a.x-1E3*Math.cos(c),(a.y-1E3*Math.sin(c))/L);l.stroke()}}}};var V={};function Dc(){for(var a in V)for(var b=V[a].length;b--;){var c=V[a][b];c.C-=50;0>=c.C?V[a].splice(b,1):(c.x-=50*Math.cos(c.angle),c.y-=50*Math.sin(c.angle))}}function Ec(){l.lineWidth=1;for(var a in V){l.strokeStyle=a;l.beginPath();for(var b=V[a].length;b--;){var c=V[a][b],e=c.x+10*Math.cos(c.angle),g=c.y/L+10*Math.sin(c.angle);l.moveTo(c.x,c.y/L);l.lineTo(e,g)}l.stroke()}};function Ga(a,b){this.x=a;this.y=b;this.z=Math.floor(20*Math.random());this.direction=0;this.l=10;this.target=N.f;this.o=10*Math.random();Q.push(this)}
Ga.prototype={update:function(){for(var a={x:this.x,y:this.y},b=999999,c=A[0],e=A.length;e--;)if(1<A[e].type){var g=v(A[e],a);g<b&&(b=g,c=e)}this.target=A[c];this.direction+=.01*(ca(w(this,this.target)-this.direction+n)-n);this.x-=5*Math.cos(this.direction);this.y-=5*Math.sin(this.direction);0>=this.o--&&(this.o=10,e=v(this,this.target),500>e&&(a=this.x,b=this.y,c=w(this,this.target),e=.5<Math.random()?2E3:e,V["#F00"]||(V["#F00"]=[]),V["#F00"].push({x:a,y:b,angle:c,C:e-50})));0>=this.l&&Q.splice(Q.indexOf(this),
1)}};var Q=[];function Fc(){for(var a=Q.length;a--;)for(var b=Q[a],c=a;0<c--;){var e=Q[c],g=b.x-e.x,f=b.y-e.y;200>g*g+f*f&&(g=.25*(b.x-e.x),f=.25*(b.y-e.y),b.x+=g,b.y+=f,e.x-=g,e.y-=f)}for(a=Q.length;a--;)Q[a].update()}function Gc(){for(var a=-va.width/2,b=-va.height/2,c=Q.length;c--;){var e=Q[c];l.save();l.translate(e.x,e.y/L-e.z*L);l.scale(.3,.3/L);l.rotate(e.direction);l.drawImage(va,a,b);l.restore()}};var Hc=!1,Ic=1;
function Jc(){var a=d.width/2,b=d.height/2;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.shadowColor="#FFF";l.shadowBlur=50+2*Math.sin(performance.now()/100);l.font="small-caps 700 256px monospace";l.fillText("X",a,b-64);l.fillText("e o",a,b-90);l.shadowBlur=0;l.font="small-caps 700 32px monospace";Ha?l.fillText("Loading music...",a,b+64):Ka?l.fillText("Loading sounds...",a,b+64):l.fillText("Click to continue!",a,b+64);l.font="small-caps 700 16px monospace";l.fillText("Created by",a,
d.height-68);l.fillText("ai Doge & Jack Oatley",a,d.height-48);l.fillText("for #js13k",a,d.height-28)};var Fb=function(){var a=wb();a.buttons.push(hb(a,125,175,50,50,"Satellite",C,function(){B("choose a target");a.N()}));a.show=function(b){fb=a;a.display=!0;a.target=b};a.N=function(){a.target=null;a.display=!1;fb=null};a.R=function(){fb==a&&ja(a.x,a.y,a.w,a.L)?a.buttons.forEach(function(a){a.update()}):a.N()};a.g=function(){l.fillStyle="#141e28";l.fillRect(a.x,a.y,a.w,a.L);l.fillStyle="#fff";l.textAlign="center";l.font="24px monospace";l.fillText((N.f===a.target?"Base":"")+" "+a.target.name,a.x+a.w/
2,a.y+20);var b=a.target.cache;l.drawImage(b,a.x+a.w/2-b.width/2,a.y+100-b.height/2);a.buttons.forEach(function(a){a.g()})};return a}(),N=null,W=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);document.addEventListener("keypress",function(a){console.log(a.key);" "===a.key&&(3===W?W=1:W=3)});var Kc=x(60,100,50),X=vc(Kc,50,null,null,null,null);X.name="The Sun";X.type=Ob;X.O=!0;var Y=wc(x(180,39,62),10,X,650,.003,p()*u);N={f:Y,l:100,V:.01,T:.02,W:300,X:0,Y:0,I:500,D:0,B:0};
wc(x(-1,60,70),5,Y,100,-.002,p()*u);var Z=wc(x(-1,60,70),20,X,1123,.0015,p()*u);wc(x(-1,60,70),5,Z,8*Z.size,.01,p()*u);wc(x(-1,60,70),10,Z,9*Z.size,.005,null);wc(x(-1,60,70),30,X,2532,-.001,p()*u);xc(Y);xc(Z);P(Y);P(X);P(X);P(X);P(Z);P(Z);P(Z);Ac(Y);Ac(Y);Ac(Y);Ac(Z);var Lc=performance.now(),Mc=1E3/60,Nc=0,Oc=[];
(function Pc(a){requestAnimationFrame(Pc);var c=Lc+Mc;Oc.push(1/((a-Nc)/1E3));Nc=a;60<Oc.length&&(Oc.shift(),Oc.forEach(function(){}));a>c&&(Qc(Math.min(Math.floor((a-Lc)/Mc),60)),Rc(),Lc=a)})(Lc);
function Qc(a){if(0===W)0<Ic--||(Ha?Sa():Ka?Ua():(Hc||(Hc=!0,$a(Qa),B("Welcum to Exo")),ab&&(W=1,Pa.pause&&$a(Qa))));else{Eb();M.update();1===W&&(A.forEach(function(a){a.update()}),Da--||(Fa(),Da=600,Ca++,B(Ea[~~(Math.random()*Ea.length)])),Fc(),Dc());var b=ma();64>v(b,{x:y,y:z})&&!fb&&cb&&!bb&&(B("selected "+b.name),Fb.show(b),ua.play())}db=eb=cb=ab=!1;--a&&Qc(a)}
function Rc(){Hb();l.clearRect(0,0,d.width,d.height);l.drawImage(qc,Math.floor(.5*d.width-F-2048),Math.floor(.5*d.height-H-2048),4096,4096);pc();if(0===W)Hb(),Jc();else{l.setTransform(G,0,0,G,-F+d.width/2,-H+d.height/2);A.forEach(function(a){a.g()});l.globalAlpha=1;Jb();Mb();Gc();Qb();Ec();var a=ma();64>v(a,{x:y,y:z})&&(l.beginPath(),l.moveTo(a.x,a.y/L),l.lineTo(y,z/L),l.strokeStyle="#ffffff",l.stroke());l.setTransform(1,0,0,1,d.width/2,d.height/2);Hb();M.g()}};})();</script></body></html>

