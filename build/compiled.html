<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),l=d.getContext("2d",{alpha:!1});var q=Math.random,r=2*Math.PI;function da(a,b){return function(){a();b()}}function u(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function ea(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function fa(a,b,c){var e=0;c.forEach(function(c){c.h.c==b&&(e+=r/a)});if(!(e>=r))return e}function v(a,b,c){return"hsl("+(0>a?360*q():a)+","+(0>b?100*q():b)+"%,"+(0>c?100*q():c)+"%)"}function ha(a,b,c){return a>c?c:a<b?b:a}function ia(a,b,c,e){var h=w,f=x;return h>a&&h<a+c&&f>b&&f<b+e}
function ja(){for(var a={x:y,y:z},b=999999,c=A[0],e=A.length;e--;){var h=u(A[e],a);h<b&&(b=h,c=e)}return A[c]};var B=speechSynthesis,oa=!1,pa;B&&(oa=!0,pa=B.getVoices(),0>=pa.length&&(B.onvoiceschanged=function(){pa=B.getVoices()}));function C(a){oa&&(B.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=pa[3],B.speak(a))};function qa(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,e,h,f,k;this.o=function(a){c=a;e=a.G;h=0;f=a.A*a.w*(e+1)*2;k=new Int32Array(f)};this.H=function(){var g,ka,P,t,aa,Q=new Int32Array(f),n=c.T[h],ba=c.A,ta=c.w,Qa=0,ua=0,H;var I=!1;var va=[];for(ka=0;ka<=e;++ka){var la=n.p[ka];for(P=0;P<ta;++P){if(aa=la?n.f[la-1].b[P]:0)n.a[aa-1]=n.f[la-1].b[P+ta]||0,16>aa&&(va=[]);var Mb=b[n.a[15]],Nb=
n.a[16]/512,Ob=Math.pow(2,n.a[17]-9)/ba,Pb=n.a[18],kb=n.a[19],Qb=135.82764118168*n.a[20]/44100,Rb=1-n.a[21]/255,Ra=1E-5*n.a[22],Sb=n.a[23]/32,Tb=n.a[24]/512,Ub=6.283184*Math.pow(2,n.a[25]-9)/ba,lb=n.a[26]/255,Sa=n.a[27]*ba&-2;aa=(ka*ta+P)*ba;for(t=0;4>t;++t)if(g=la?n.f[la-1].n[P+t*ta]:0){if(!va[g]){var m=va;var R=g;var mb=H=void 0,wa,J,p=n,nb=g,Vb=b[p.a[0]],Wb=p.a[1],Xb=p.a[3],Yb=b[p.a[4]],Zb=p.a[5],$b=p.a[8],ob=p.a[9],ca=p.a[10]*p.a[10]*4,xa=p.a[11]*p.a[11]*4,Ta=p.a[12]*p.a[12]*4,ac=1/Ta,ma=p.a[13],
bc=ba*Math.pow(2,2-p.a[14]),pb=new Int32Array(ca+xa+Ta),qb=0,rb=0;for(wa=J=0;J<ca+xa+Ta;J++,wa++){0<=wa&&(ma=ma>>8|(ma&255)<<4,wa-=bc,mb=.003959503758*Math.pow(2,(nb+(ma&15)+p.a[2]-128-128)/12),H=.003959503758*Math.pow(2,(nb+(ma&15)+p.a[6]-128-128)/12)*(1+8E-4*p.a[7]));var S=1;J<ca?S=J/ca:J>=ca+xa&&(S-=(J-ca-xa)*ac);var na=mb;Xb&&(na*=S*S);qb+=na;var Ua=Vb(qb)*Wb;na=H;$b&&(na*=S*S);rb+=na;Ua+=Yb(rb)*Zb;ob&&(Ua+=(2*Math.random()-1)*ob);pb[J]=80*Ua*S|0}m[R]=pb}R=va[g];g=0;for(m=2*aa;g<R.length;g++,
m+=2)Q[m]+=R[g]}for(g=0;g<ba;g++)t=2*(aa+g),(m=Q[t])||I?(I=Qb,Pb&&(I*=Mb(Ob*t)*Nb+.5),I=1.5*Math.sin(I),Qa+=I*ua,m=Rb*(m-ua)-Qa,ua+=I*m,m=3==kb?ua:1==kb?m:Qa,Ra&&(m*=Ra,m=1>m?-1<m?a(.25*m):-1:1,m/=Ra),m*=Sb,I=1E-5<m*m,R=Math.sin(Ub*t)*Tb+.5,H=m*(1-R),m*=R):H=0,t>=Sa&&(H+=Q[t-Sa+1]*lb,m+=Q[t-Sa]*lb),Q[t]=H|0,Q[t+1]=m|0,k[t]+=H|0,k[t+1]+=m|0}}h++;return h/c.N};this.F=function(){var a=44+2*f-8,b=a-36,c=new Uint8Array(44+2*f);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,
32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<f;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var ra={T:[{a:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],b:[]}]}],A:5513,w:1,G:0,N:1};var D=document.createElement("CANVAS"),E=D.getContext("2d");D.width=20;D.height=140;E.fillStyle="#dddddd";E.fillRect(8,50,4,40);E.fillStyle="#639bff";E.fillRect(2,0,15,60);E.fillRect(2,80,15,60);E.fillStyle="#9badb7";E.fillRect(2,65,17,10);E.fillRect(0,66,2,8);var sa=document.createElement("CANVAS"),ya=sa.getContext("2d");sa.width=64;sa.height=64;ya.fillStyle="#ff0000";ya.moveTo(0,32);ya.lineTo(64,0);ya.lineTo(48,32);ya.lineTo(64,64);ya.fill();var za=0,Aa=0,Ba=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function Ca(){for(var a=100;a--;){var b=Math.random()*r;(new Da(3E3*Math.cos(b),3E3*Math.sin(b))).direction=b}};var Ea=!0,Fa=[],Ga=!0,Ha=[],Ia=ra,Ja=new qa;Ja.D=new Audio;Ja.o(Ia);Ha.push(Ja);ra=Ja.D;var Ka=new qa;Ka.C=!0;
Ka.o({T:[{a:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],b:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,
13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],b:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],b:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],b:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,
,,,,,,,111,,,,,,,,99],b:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],b:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],b:[]},{n:[],b:[]}]},{a:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],b:[]},{n:[147],b:[]}]},{a:[0,0,140,0,0,0,140,0,0,
60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,
,147,,147,,,147,,147,,147],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{a:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],b:[]},{n:[114],b:[]},{n:[111],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{a:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],
b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],b:[]},{n:[147],b:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],b:[]}]},{a:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],b:[]},{n:[159,
,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],b:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],b:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],b:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{a:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,
2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],b:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],b:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],b:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],b:[]}]},
{a:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],b:[]}]}],A:5513,w:32,G:26,N:8});Fa.push(Ka);var La=0;function Ma(){for(var a=0;a<Fa.length;a++){var b=Fa[a];b.C&&(b.C=1<=b.H(),La+=1,b=b.F(),b=URL.createObjectURL(new Blob([b],{type:"audio/wav"})),b=new Audio(b),b.addEventListener("ended",function(){this.currentTime=0;this.play()},!1),b.play(),b.volume=.5)}La>=Fa.length&&(Ea=!1)}var Na=0;
function Oa(){for(var a=0;a<Ha.length;a++){var b=Ha[a];if(1<=b.H()){Na+=1;var c=b.F();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.D.src=c}}Na>=Ha.length&&(Ga=!1)};var w=0,x=0,y=0,z=0,Pa=!1,Va=!1,Wa=!1,Xa=!1,Ya=!1,Za=null,$a;window.addEventListener("mousemove",function(a){var b=d.getBoundingClientRect();w=a.clientX-b.left;x=a.clientY-b.top;y=(w+F-d.width/2)/G;z=(x+K-d.height/2)*L/G;$a&&(Va=!0)},!1);window.addEventListener("mousedown",function(){$a=Pa=!0},!1);window.addEventListener("mouseup",function(){$a=!1;Va||(Wa=!0);Va=!1},!1);window.addEventListener("wheel",function(a){Xa=0<a.deltaY;Ya=0>a.deltaY},!1);var M={x:0,y:0,elements:[],B:"",P:function(){var a=d.width/2,b=d.height;M.elements=[ab(M,a-24-60,b-64,48,48,"Build Satellite",null,bb),ab(M,a-24,b-64,48,48,"Build Mining Station",null,cb),ab(M,a+36,b-64,48,48,"Build Defense Platform",null,db)]},update:function(){M.B="";eb();M.elements.forEach(function(a){a.update()})},g:function(){fb();M.elements.forEach(function(a){a.g()});l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.font="small-caps 700 32px monospace";l.fillText("next wave in",
d.width/2,32);l.font="700 64px monospace";l.fillText(~~(Aa/60),d.width/2,96);l.font="small-caps 700 32px monospace";l.fillText("minerals",d.width/2+300,48);l.fillText(~~N.v,d.width/2+300,80);l.font="small-caps 700 32px monospace";l.fillText("energy",d.width/2+600,48);l.fillText(~~N.j,d.width/2+600,80);l.font="small-caps 700 32px monospace";l.fillText("survived",d.width/2-300,48);l.fillText(za+" waves",d.width/2-300,80);l.font="small-caps 700 32px monospace";l.fillText("base status",d.width/2-600,
48);l.fillText(~~N.l+"%",d.width/2-600,80);l.font="small-caps 700 24px monospace";l.fillText(M.B,d.width/2,d.height-96)}};function bb(){C("Select an area to build the satellite")}function cb(){C("Select an area to build the mining station")}function db(){C("Select an area to build the defense platform")}M.P();var gb=[];
function hb(){var a=d.width/2-150,b=d.height/2-200,c={};gb.push(c);c.x=a;c.y=b;c.s=300;c.I=400;c.cache=null;c.display=!1;c.buttons=[];c.update=function(){c.display&&Pa&&c.O()};c.O=function(){};c.g=function(){};c.show=function(){};return c}function eb(){for(var a=gb.length;a--;)gb[a].update()}function fb(){for(var a=gb.length;a--;)gb[a].display&&gb[a].g()};function ab(a,b,c,e,h,f,k,g){b=a.x+b;c=a.y+c;return{update:function(){var a=w,k=x;a>b&&a<b+e&&k>c&&k<c+h&&(M.B=f,Pa&&g())},g:function(){l.fillStyle="#FFF";l.fillRect(b,c,e,h);k&&l.drawImage(k,b,c,e,h)}}};var F=0,K=0,ib=0,jb=0,sb=0,tb=0,ub=0,vb=0,G=1,wb=1,L=2;function xb(){if(Ya||Xa)wb=ha(wb+(Ya?.1:-.1),.1,2);L=Math.min(1+(G-.1),2);Pa&&!yb.display&&(zb=!0,sb=F,tb=K,ub=w,vb=x);Va&&zb?(ib=sb+(ub-w),jb=tb+(vb-x)):Wa&&(zb=!1);var a=G;G+=.001>Math.abs(G-wb)?0:(wb-G)/5;a=G-a;.001<Math.abs(a)&&(F+=y*a,K+=z*a,ib+=y*a,jb+=z*a);F+=.001>Math.abs(F-ib)?0:(ib-F)/5;K+=.001>Math.abs(K-jb)?0:(jb-K)/5}function Ab(){l.setTransform(1,0,0,1,0,0)}var zb;var Bb="";Cb();window.addEventListener("resize",Cb,!1);function Cb(){d.width=window.innerWidth;d.height=window.innerHeight;l.clearRect(0,0,d.width,d.height);M.P()}function Db(){l.globalAlpha=1;for(var a=A.length;a--;){var b=A[a];b.h&&Eb(b);var c=Math.floor(4*G);b.m&&b.m[c]&&(c=b.m[c],l.save(),l.translate(b.x,b.y/L),l.scale(1,1/L),l.drawImage(c,0,0,c.width,c.height),l.scale(-1,1),l.drawImage(c,0,0),l.scale(1,-1),l.drawImage(c,0,0),l.scale(-1,1),l.drawImage(c,0,0),l.restore())}}
function Eb(a){var b=a.h;if(b){var c=b.c.m;c||(c=b.c.m=[]);var e=Math.floor(4*G);c=c[e];if(!c){c=document.createElement("CANVAS");var h=0;A.forEach(function(a){a.h&&a.h.c===b.c&&(h=Math.max(h,a.h.i+40))});c.width=h;c.height=h;b.c.m[e]=c;c.J=[]}if(!c.J[a.id]){e=.1+e/4;var f=c.getContext("2d");f.setLineDash([5/e,5/e]);f.beginPath();f.lineWidth=2/e;f.strokeStyle=a.color;f.globalAlpha=.6;f.arc(0,0,b.i,0,r/4,!1);f.stroke();f.setLineDash(Fb);c.J[a.id]=!0}}}var Fb=[];
function Gb(){l.globalAlpha=1;for(var a=A.length;a--;){var b=A[a];if(b.type===Hb){var c=ea(b,A[0]);l.save();l.translate(b.x,b.y/L);l.rotate(c);l.scale(.2,.2);l.drawImage(D,-D.width/2,-D.height/2)}else{if(!b.cache){var e=b.type===Ib,h=e?"#ffffff":b.color,f=e?50:10;c=b.size+f;var k=0,g=b.cache=document.createElement("CANVAS");g.width=2*c;g.height=2*c;g=b.cache.getContext("2d");e&&(k=1E3,g.shadowOffsetY=k);g.beginPath();g.fillStyle=h;g.shadowColor=b.color;g.shadowBlur=f;g.arc(c,c-k,b.size,0,r,!1);g.fill();
e&&(g.beginPath(),g.shadowColor="#FFF",g.shadowBlur=5,g.arc(c,c-k,b.size-5,0,r,!1),g.fill());if(!e)for(h=e=b.size,g.beginPath(),g.arc(c,c,b.size,0,2*Math.PI,!1),g.clip();e--;)g.beginPath(),g.globalAlpha=.05,g.fillStyle="#000",g.shadowColor="#000",g.shadowBlur=10,g.save(),g.transform(1,0,0,1,c-h/2+(b.size-h)/2,c),g.arc(0,0,2*h--,-r/4,r/4),g.fill(),g.restore()}c=ea(b,A[0]);l.save();l.translate(b.x,b.y/L);l.rotate(c);b.L&&(c=1+.01*Math.sin(performance.now()/30),l.scale(c,c));l.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}l.restore()}}function Jb(){l.beginPath();for(var a=75*(L-1),b=0;b<O.length;b++)for(var c=O[b],e=b;e<O.length;e++){var h=O[e];if(h!=c&&u(h,c)<=N.U){var f=c.y/L,k=h.y/L;l.moveTo(c.x,f);l.bezierCurveTo(c.x,f-a,h.x,k-a,h.x,k)}}l.globalAlpha=ha(.2/G,.2,.8);l.lineWidth=ha(1/G*2,1,4);l.strokeStyle="#0F0";l.stroke();l.globalAlpha=1};var Kb=document.createElement("CANVAS");Kb.width=512;Kb.height=512;var T=Kb.getContext("2d");T.shadowBlur=1;T.globalAlpha=.5;for(var Lb=300;Lb--;){var cc=512*Math.random(),dc=512*Math.random(),ec=v(-1,100,90);T.fillStyle=ec;T.shadowColor=ec;T.beginPath();T.arc(cc,dc,.5,0,2*Math.PI);T.fill()}var fc=l.createPattern(Kb,"repeat");
function gc(){var a=performance.now()/2E3;l.beginPath();l.rect(0,0,d.width,d.height);l.fillStyle=fc;l.translate(.5*d.width,.5*d.height);l.scale(.5,.5);l.translate(-F/25,-K/25);l.rotate(a/200);l.fill();l.rotate(-a/200);l.scale(2,2);l.translate(-F/50,-K/50);l.fill()}var hc=document.createElement("CANVAS"),ic=hc.getContext("2d",{alpha:!1});hc.width=512;hc.height=512;ic.beginPath();var jc=ic.createRadialGradient(256,256,0,256,256,256);jc.addColorStop(0,"#141e28");jc.addColorStop(1,"#000000");
ic.fillStyle=jc;ic.fillRect(0,0,512,512);var A=[],O=[],kc=[],Ib=0,Hb=2;
function lc(a,b,c,e,h,f){void 0===f&&(f=0);var k={name:"Some Shithole Planet"};k.type=Ib;k.x=0;k.y=0;k.color=a;k.size=b;k.L=!1;k.id=A.length.toString();c&&(k.h={c:c,i:e,speed:h,angle:f});k.update=function(){if(k.h){var a=k.h;a.angle+=a.speed;k.x=a.i*Math.cos(a.angle)+a.c.x;k.y=a.i*Math.sin(a.angle)+a.c.y}};k.g=function(){var a=k.h;if(a){l.beginPath();l.globalAlpha=.4;l.strokeStyle=k.color;l.lineWidth=4/G;l.save();var b=1/L;l.transform(1,0,0,b,a.c.x,a.c.y*b);l.arc(0,0,a.i,a.angle-a.speed*a.i/2,a.angle,
0>a.speed);l.restore();l.stroke()}};A.push(k);return k}function mc(a,b,c,e,h,f){void 0===f&&(f=0);a=lc(a,b,c,e+b/2,h,f);a.name="Planet";a.type=1;a.update=da(a.update,function(){});return a}function nc(a){void 0!==fa(oc,a,O)&&(a=lc(v(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=3,a.update=da(a.update,function(){N.v+=N.W}))}var oc=4;
function U(a){var b=fa(pc,a,O);void 0!==b&&(a=lc(v(160,100,50),2,a,5*a.size,.01,b),a.name="Satellite",a.type=Hb,a.index=O.length,a.update=da(a.update,function(){N.j+=N.V}),O.push(a))}var pc=3;
function qc(a){var b=fa(rc,a,kc);if(void 0!==b){var c=lc(v(33,100,50),2,a,7*a.size,.005,b);c.name="Defense Platform";c.type=4;c.index=kc.length;c.target=null;c.X=1E3;c.S=0;c.R=.2;c.M=!1;kc.push(c);c.update=da(c.update,function(){if(0>=c.S--){for(var a=null,b=c.X,f=V.length;f--;){var k=V[f],g=u(c,k);g<b&&(a=k,b=g)}c.target=a;c.M=.5<Math.random()?!0:!1;c.target&&N.j>=c.R&&(c.target.l-=2,c.S=2,N.j-=c.R,sc.push({x:c.x,y:c.y,angle:ea(c,c.target),u:(c.M?2E3:u(c,c.target))-50}))}else c.target=null})}}
var rc=2;var sc=[];function tc(){for(var a=sc.length;a--;){var b=sc[a];b.u-=50;0>=b.u?sc.splice(a,1):(b.x-=50*Math.cos(b.angle),b.y-=50*Math.sin(b.angle))}}function uc(){l.lineWidth=1;l.strokeStyle="#FF0";l.beginPath();for(var a=sc.length;a--;){var b=sc[a],c=b.x+10*Math.cos(b.angle),e=b.y/L+10*Math.sin(b.angle);l.moveTo(b.x,b.y/L);l.lineTo(c,e)}l.stroke()};function Da(a,b){this.x=a;this.y=b;this.o=Math.floor(20*Math.random());this.speed=5;this.direction=0;this.l=10;this.target=N.c;V.push(this)}
Da.prototype={update:function(){var a=ea(this,this.target)-this.direction+r/2;this.direction+=.01*(a-Math.floor(a/r)*r-r/2);this.x-=this.speed*Math.cos(this.direction);this.y-=this.speed*Math.sin(this.direction);0>=this.l&&V.splice(V.indexOf(this),1)},g:function(){l.save();l.translate(this.x,this.y/L-this.o*L);l.scale(.2,.2/L);l.rotate(this.direction);l.drawImage(sa,-sa.width/2,-sa.height/2);l.restore()}};var V=[];
function vc(){for(var a=V.length;a--;)for(var b=V[a],c=a;0<c--;){var e=V[c],h=b.x-e.x,f=b.y-e.y;200>h*h+f*f&&(h=.25*(b.x-e.x),f=.25*(b.y-e.y),b.x+=h,b.y+=f,e.x-=h,e.y-=f)}for(a=V.length;a--;)V[a].update()}function wc(){for(var a=V.length;a--;)V[a].g()};var xc=!1,yc=60;
function zc(){var a=d.width/2,b=d.height/2;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.shadowColor="#FFF";l.shadowBlur=50+2*Math.sin(performance.now()/100);l.font="small-caps 700 256px monospace";l.fillText("X",a,b-64);l.fillText("e o",a,b-90);l.shadowBlur=0;l.font="small-caps 700 32px monospace";Ea?l.fillText("Loading music...",a,b+64):Ga?l.fillText("Loading sounds...",a,b+64):l.fillText("Click to continue!",a,b+64);l.font="small-caps 700 16px monospace";l.fillText("Created by",a,
d.height-68);l.fillText("ai Doge & Jack Oatley",a,d.height-48);l.fillText("for #js13k",a,d.height-28)};var yb=function(){var a=hb();a.buttons.push(ab(a,125,175,50,50,"Satellite",D,function(){C("choose a target");a.K()}));a.show=function(b){Za=a;a.display=!0;a.target=b};a.K=function(){a.target=null;a.display=!1;Za=null};a.O=function(){Za==a&&ia(a.x,a.y,a.s,a.I)?a.buttons.forEach(function(a){a.update()}):a.K()};a.g=function(){l.fillStyle="#141e28";l.fillRect(a.x,a.y,a.s,a.I);l.fillStyle="#fff";l.textAlign="center";l.font="24px monospace";l.fillText((N.c===a.target?"Base":"")+" "+a.target.name,a.x+a.s/
2,a.y+20);var b=a.target.cache;l.drawImage(b,a.x+a.s/2-b.width/2,a.y+100-b.height/2);a.buttons.forEach(function(a){a.g()})};return a}(),N=null,W=0;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);document.addEventListener("keypress",function(a){console.log(a.key);" "===a.key&&(3===W?W=1:W=3)});var Ac=v(60,100,50),X=lc(Ac,50,null,null,null,null);X.name="The Sun";X.type=Ib;X.L=!0;var Y=mc(v(180,39,62),10,X,500,.003,q()*r);N={c:Y,l:100,W:.01,V:.02,Y:300,Z:0,$:0,U:500,v:0,j:0};
mc(v(-1,60,70),5,Y,100,-.002,q()*r);var Z=mc(v(-1,60,70),20,X,1123,.0015,q()*r);mc(v(-1,60,70),5,Z,8*Z.size,.01,q()*r);mc(v(-1,60,70),10,Z,9*Z.size,.005,null);mc(v(-1,60,70),30,X,2532,-.001,q()*r);nc(Y);nc(Z);U(Y);U(X);U(X);U(X);U(Z);U(Z);U(Z);qc(Y);qc(Y);qc(Y);qc(Z);var Bc=performance.now(),Cc=1E3/60,Dc=0,Ec=0,Fc=[];
(function Gc(a){requestAnimationFrame(Gc);var c=Bc+Cc;Fc.push(1/((a-Dc)/1E3));Dc=a;if(60<Fc.length){var e=0,h=1E3,f=0;Fc.shift();Fc.forEach(function(a){e+=a;h=Math.min(h,a);f=Math.max(f,a)});Ec=Math.floor(e/60)+", "+~~h+" - "+~~f}a>c&&(Hc(Math.min(Math.floor((a-Bc)/Cc),60)),Ic(),Bc=a)})(Bc);
function Hc(a){if(0===W)0<yc--||(Ea?Ma():Ga?Oa():(xc||(xc=!0,C("Welcum to Exo")),Pa&&(W=1)));else{Bb="";xb();M.update();1===W&&(A.forEach(function(a){a.update()}),Aa--||(Ca(),Aa=600,za++,C(Ba[~~(Math.random()*Ba.length)])),vc(),tc());var b=ja();64>u(b,{x:y,y:z})&&(Bb=b.name,Za||!Wa||Va||1!=b.type||(C("selected "+b.name),yb.show(b),ra.play()))}Xa=Ya=Wa=Pa=!1;--a&&Hc(a)}
function Ic(){Ab();l.clearRect(0,0,d.width,d.height);l.drawImage(hc,Math.floor(.5*d.width-F-2048),Math.floor(.5*d.height-K-2048),4096,4096);gc();if(0===W)Ab(),zc();else{l.setTransform(G,0,0,G,-F+d.width/2,-K+d.height/2);A.forEach(function(a){a.g()});l.globalAlpha=1;Db();Gb();wc();Jb();uc();var a=ja();64>u(a,{x:y,y:z})&&(l.beginPath(),l.moveTo(a.x,a.y/L),l.lineTo(y,z/L),l.strokeStyle="#ffffff",l.stroke());l.setTransform(1,0,0,1,d.width/2,d.height/2);Ab();M.g();l.font="14px monospace";l.textBaseline=
"top";l.textAlign="left";l.fillStyle="#fff";l.fillText("#js13k tower defense prototype",20,220);l.fillText("https://github.com/scorp200/td13k",20,240);l.fillText("framerate: "+Ec,20,260);l.fillText("mouse (gui): "+w+", "+x,20,280);l.fillText("mouse (view): "+y+", "+z,20,300);l.fillText("planet name: "+Bb,20,320);l.fillText("view x: "+F,20,360);l.fillText("view y: "+K,20,380);l.fillText("view zoom: "+G,20,400);l.fillText("view tilt: "+L,20,420)}};})();</script></body></html>

