<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),k=d.getContext("2d",{alpha:!1});function ba(){}var da=!1,ea=!1,n=Math.PI,fa=2*n;var ha=function(){var a=0,b=[];return{update:function(c){b.push(c);if(60<b.length){var e=0,f=1E3,h=0;b.shift();b.forEach(function(a){e+=a;f=Math.min(f,a);h=Math.max(h,a)});a=~~(e/60)+", "+~~f+" - "+~~h}},get da(){return a}}}();function ia(a,b){var c=null,e=null,f=null;return{type:"beam",level:b,update:function(){for(var b=null,m=0,g=p.length;g--;){var l=p[g],B=q(a,l);B>m&&1E3>B&&(b=l,m=B)}if(c=b)for(f=t(a,c),null==e&&(e=f),e+=.01*Math.sign(ja(f-e+n)-n),b=p.length;b--;)m=p[b],g=ja(e-t(a,m)+n)-n,1E3>q(m,a)&&.1>Math.abs(g)&&(m.i-=10.5)},g:function(){if(c){k.beginPath();k.lineWidth=6+3*Math.sin(performance.now()/5);var b=k.createRadialGradient(a.x,a.y/u,100,a.x,a.y/u,1E3);b.addColorStop(0,"#FF0");b.addColorStop(1,"rgba(0, 0, 0, 0)");
k.strokeStyle=b;k.moveTo(a.x,a.y/u);k.lineTo(a.x-1E3*Math.cos(e),(a.y-1E3*Math.sin(e))/u);k.stroke()}}}};function ka(a,b){var c=0;return{type:"laser",level:b,update:function(){if(0>=c--){c=2-Math.min(b/10,2);var e=la(a,1E3);if(e&&.1<=w.l){w.l-=.1;var f=.5<Math.random();ma.create(a.x,a.y,t(a,e),f?2E3:q(a,e),"#FF0");f||(e.i-=2)}}},g:ba}};function qa(a,b){var c=20;return{type:"rocket",level:b,update:function(){if(0>=c--){c=20;var b=la(a,1500);if(b&&.5<=w.l){w.l-=.5;var f=a.x,h=a.y,m=t(a,b);b=q(a,b);y["#00B"]||(y["#00B"]=[]);y["#00B"].push({x:f,y:h,angle:m,o:b-50,Z:void 0})}}},g:ba}};function ra(a,b){var c=1E3/3,e=c;return{type:"slow",level:b,update:function(){if(0>=e--){e=c;for(var b=p.length;b--;){var h=p[b];300>q(h,a)&&h.I.push({type:"speed",value:.05,time:100})}}},g:function(){0>=e&&(k.beginPath(),k.fillStyle="#c6e2ff",k.arc(a.x,a.y/u,300,0,fa),k.fill())}}};function sa(a,b){var c=[];return{type:"zap",level:b,update:function(){var b=p.length;c.length=0;var f=la(a,300);if(f)for(;b--;){var h=p[b];300>=q(f,h)&&(f=h,c.push(h),h.i-=.1);if(10<c.length)break}},g:function(){if(c[0]){k.beginPath();k.strokeStyle="#c6e2ff";k.lineWidth=4;var b=c.length,f=c[b-1];for(k.moveTo(f.x,f.y/u);b--;)f=c[b],k.lineTo(f.x,f.y/u);k.lineTo(a.x,a.y/u);k.stroke()}}}};var ma=function(){var a={};return{create:function(b,c,e,f,h){!a[h]&&(a[h]=[]);a[h].push({x:b,y:c,angle:e,o:f-50})},update:function(){for(var b in a)for(var c=a[b],e=c.length;e--;){var f=c[e];f.o-=50;0>=f.o?(f=c,f[e]=f[f.length-1],--f.length):(f.x-=50*Math.cos(f.angle),f.y-=50*Math.sin(f.angle))}},g:function(){k.globalAlpha=1;k.lineWidth=1;for(var b in a){k.strokeStyle=b;k.beginPath();for(var c=a[b].length;c--;){var e=a[b][c],f=e.x+10*Math.cos(e.angle),h=e.y/u+10*Math.sin(e.angle);k.moveTo(e.x,e.y/
u);k.lineTo(f,h)}k.stroke()}}}}();var ua=function(){function a(a){var c=[],f;for(f in b)b[f].F===a&&c.push(f);return c}var b={};return{B:function(){Object.assign(b,{laser:{F:A,name:"Lasers",m:null,D:ka},beam:{F:A,name:"Beam",m:null,D:ia},rocket:{F:A,name:"Rockets",m:null,D:qa},slow:{F:A,name:"Slow",m:null,D:ra},zap:{F:A,name:"Lightning",m:null,D:sa}})},na:a,get:function(c){if(!c.s)return[];var e=[];a(c.type).forEach(function(a){var f=c.s,m=b[a],g=f.type===a?f.level+1:1;e.push({m:m.m,text:m.name+" (Level "+g+")",ea:ta.bind(null,c,
a,g),la:"Upgrading level "+f.level+" "+f.type+", to level "+g+" "+a})});return e},implementation:function(a){return b[a].D}}}();var y={};function va(){for(var a in y)for(var b=y[a].length;b--;){var c=y[a][b];c.o-=50;0>=c.o?(c.Z&&c.Z(),y[a].splice(b,1)):(c.x-=50*Math.cos(c.angle),c.y-=50*Math.sin(c.angle))}}function wa(){k.lineWidth=1;for(var a in y){k.strokeStyle=a;k.beginPath();for(var b=y[a].length;b--;){var c=y[a][b],e=c.x+10*Math.cos(c.angle),f=c.y/u+10*Math.sin(c.angle);k.moveTo(c.x,c.y/u);k.lineTo(e,f)}k.stroke()}};var Fa=function(){function a(a,c){var e=document.createElement("LI"),f=document.createElement("LABEL"),g=document.createElement("INPUT");f.textContent=a;g.type="checkbox";g.onclick=function(){xa.set(a,g.checked);c.call(g)};e.appendChild(g);e.appendChild(f);b.appendChild(e);"true"===xa.get(a,"true")&&(g.checked=!0,c.call(g,!0))}var b=document.createElement("UL"),c=b.style;c.position="absolute";c.right="0px";c.bottom="0px";c.color="#FFF";c.margin="16px";c.listStyle="none";document.body.appendChild(b);
return{B:function(){a("music",function(a){da=this.checked;a||ya(Ea)});a("voice",function(){ea=this.checked})}}}();var xa={set:function(a,b){window.localStorage.setItem(a,b)},get:function(a,b){return window.localStorage.getItem(a)||b}};var F=function(){function a(a,e,f,g){return b>a&&b<a+f&&c>e&&c<e+g}var b=0,c=0,e=0,f=0,h=!1,m=!1,g=!1,l=!1,B=!1,v=!1;window.addEventListener("mousemove",function(a){var g=d.getBoundingClientRect();b=a.clientX-g.left;c=a.clientY-g.top;e=(b+C-d.width/2)/D;f=(c+E-d.height/2)*u/D;l&&(m=!0)},!1);window.addEventListener("mousedown",function(){l=h=!0},!1);window.addEventListener("mouseup",function(){l=!1;m||(g=!0);m=!1},!1);window.addEventListener("wheel",function(a){B=0<a.deltaY;v=0>a.deltaY},!1);return{update:function(){B=
v=g=h=!1},ja:a,oa:function(b,c,e,f){return h&&a(b,c,e,f)},get x(){return b},get y(){return c},get u(){return e},get v(){return f},get click(){return h},get U(){return m},get release(){return g},get pa(){return l},get ka(){return B},get $(){return v}}}();var C=0,E=0,Ga=0,Ha=0,Ia=0,Ja=0,Ka=0,La=0,D=1,Ma=1,u=2;function Na(){if(F.$||F.ka)Ma=Oa(Ma+(F.$?.1:-.1),.1,2);u=Math.min(1+(D-.1),2);F.click&&(Pa=!0,Ia=C,Ja=E,Ka=F.x,La=F.y);F.U&&Pa?(Ga=Ia+(Ka-F.x),Ha=Ja+(La-F.y)):F.release&&(Pa=!1);var a=D;D+=.001>Math.abs(D-Ma)?0:(Ma-D)/5;a=D-a;.001<Math.abs(a)&&(C+=F.u*a,E+=F.v*a,Ga+=F.u*a,Ha+=F.v*a);C+=.001>Math.abs(C-Ga)?0:(Ga-C)/5;E+=.001>Math.abs(E-Ha)?0:(Ha-E)/5}function Qa(){k.setTransform(1,0,0,1,0,0)}var Pa;var G=Math.random,H=2*Math.PI;function Ra(a,b){return function(){a();b()}}function Sa(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a}function q(a,b){return Math.sqrt(Sa(a,b))}function t(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ja(a){return a-Math.floor(a/fa)*fa}function Ta(a,b,c){var e=0;c.length&&(e=c[0].j.angle);c.forEach(function(c){c.j.c==b&&(e+=fa/a)});if(!(e>=fa))return e}function I(a,b,c){return"hsl("+(0>a?360*G():a)+","+(0>b?100*G():b)+"%,"+(0>c?100*G():c)+"%)"}
function Oa(a,b,c){return a>c?c:a<b?b:a}function Ua(){for(var a={x:F.u,y:F.v},b=999999,c=J[0],e=J.length;e--;){var f=q(J[e],a);f<b&&(b=f,c=e)}return J[c]}function $a(){if(F.release){K.selection.target=null;var a=Ua();q(a,{x:F.u,y:F.v})<ab&&(bb=a.name,F.target||F.U||(L("selected "+a.name),P===cb?(K.selection.target=a,K.selection.ia(F.x,F.y),K.selection.ba(ua.get(a))):P===db&&a.type==eb&&(fb=a),gb.play()))}};var hb=speechSynthesis,ib=!1,jb,kb=3;hb&&(ib=!0,jb=hb.getVoices(),0>=jb.length&&(hb.onvoiceschanged=function(){jb=hb.getVoices()}));function L(a){ib&&ea&&(hb.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=jb[kb%jb.length],hb.speak(a))};function lb(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,e,f,h,m;this.B=function(a){c=a;e=a.L;f=0;h=a.K*a.J*(e+1)*2;m=new Int32Array(h)};this.W=function(){var g,l,B,v,Z,S=new Int32Array(h),x=c.P[f],aa=c.K,za=c.J,Va=0,Aa=0,M;var N=!1;var Ba=[];for(l=0;l<=e;++l){var na=x.p[l];for(B=0;B<za;++B){if(Z=na?x.f[na-1].a[B]:0)x.b[Z-1]=x.f[na-1].a[B+za]||0,16>Z&&(Ba=[]);var ec=b[x.b[15]],fc=x.b[16]/
512,gc=Math.pow(2,x.b[17]-9)/aa,hc=x.b[18],vb=x.b[19],ic=135.82764118168*x.b[20]/44100,jc=1-x.b[21]/255,Wa=1E-5*x.b[22],kc=x.b[23]/32,lc=x.b[24]/512,mc=6.283184*Math.pow(2,x.b[25]-9)/aa,wb=x.b[26]/255,Xa=x.b[27]*aa&-2;Z=(l*za+B)*aa;for(v=0;4>v;++v)if(g=na?x.f[na-1].n[B+v*za]:0){if(!Ba[g]){var r=Ba;var U=g;var xb=M=void 0,Ca,O,z=x,yb=g,nc=b[z.b[0]],oc=z.b[1],pc=z.b[3],qc=b[z.b[4]],rc=z.b[5],sc=z.b[8],zb=z.b[9],ca=z.b[10]*z.b[10]*4,Da=z.b[11]*z.b[11]*4,Ya=z.b[12]*z.b[12]*4,tc=1/Ya,oa=z.b[13],uc=aa*
Math.pow(2,2-z.b[14]),Ab=new Int32Array(ca+Da+Ya),Bb=0,Cb=0;for(Ca=O=0;O<ca+Da+Ya;O++,Ca++){0<=Ca&&(oa=oa>>8|(oa&255)<<4,Ca-=uc,xb=.003959503758*Math.pow(2,(yb+(oa&15)+z.b[2]-128-128)/12),M=.003959503758*Math.pow(2,(yb+(oa&15)+z.b[6]-128-128)/12)*(1+8E-4*z.b[7]));var V=1;O<ca?V=O/ca:O>=ca+Da&&(V-=(O-ca-Da)*tc);var pa=xb;pc&&(pa*=V*V);Bb+=pa;var Za=nc(Bb)*oc;pa=M;sc&&(pa*=V*V);Cb+=pa;Za+=qc(Cb)*rc;zb&&(Za+=(2*Math.random()-1)*zb);Ab[O]=80*Za*V|0}r[U]=Ab}U=Ba[g];g=0;for(r=2*Z;g<U.length;g++,r+=2)S[r]+=
U[g]}for(g=0;g<aa;g++)v=2*(Z+g),(r=S[v])||N?(N=ic,hc&&(N*=ec(gc*v)*fc+.5),N=1.5*Math.sin(N),Va+=N*Aa,r=jc*(r-Aa)-Va,Aa+=N*r,r=3==vb?Aa:1==vb?r:Va,Wa&&(r*=Wa,r=1>r?-1<r?a(.25*r):-1:1,r/=Wa),r*=kc,N=1E-5<r*r,U=Math.sin(mc*v)*lc+.5,M=r*(1-U),r*=U):M=0,v>=Xa&&(M+=S[v-Xa+1]*wb,r+=S[v-Xa]*wb),S[v]=M|0,S[v+1]=r|0,m[v]+=M|0,m[v+1]+=r|0}}f++;return f/c.N};this.T=function(){var a=44+2*h-8,b=a-36,c=new Uint8Array(44+2*h);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,
0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<h;++a){var e=m[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var gb={P:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],a:[]}]}],K:5513,J:1,L:0,N:1};var Q=document.createElement("CANVAS"),R=Q.getContext("2d");Q.width=20;Q.height=140;R.fillStyle="#dddddd";R.fillRect(8,50,4,40);R.fillStyle="#639bff";R.fillRect(2,0,15,60);R.fillRect(2,80,15,60);R.fillStyle="#9badb7";R.fillRect(2,65,17,10);R.fillRect(0,66,2,8);var mb=document.createElement("CANVAS"),nb=mb.getContext("2d");mb.width=32;mb.height=32;nb.fillStyle="#ff0000";nb.moveTo(0,16);nb.lineTo(32,0);nb.lineTo(24,16);nb.lineTo(32,32);nb.fill();var ob=0,pb=0,qb=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function rb(){for(var a=100;a--;){var b=Math.random()*H;(new sb(3E3*Math.cos(b),3E3*Math.sin(b))).direction=b}};var tb=!0,ub=0,Db=[],Eb=!0,Fb=[],Gb=gb,Hb=new lb;Hb.w=new Audio;Hb.C=!0;Hb.B(Gb);Fb.push(Hb);gb=Hb.w;
var Jb=Ib({P:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],a:[]}]}],K:5513,J:32,L:26,N:8}),Kb=Ib({P:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],f:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],f:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],f:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],f:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],f:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],f:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],f:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],K:6300,J:32,L:30,N:8});function Ib(a){var b=new lb;b.w=new Audio;b.C=!0;b.B(a);Db.push(b);return b.w}var Lb=0;
function Mb(){for(var a=0;a<Db.length;a++){var b=Db[a];if(b.C){b.C=1<=b.W();Lb+=1;var c=b.T();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.w.src=c}}Lb>=Db.length&&(tb=!1)}var Nb=0;function Ob(){for(var a=0;a<Fb.length;a++){var b=Fb[a];if(b.C){b.C=1<=b.W();Nb+=1;var c=b.T();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.w.src=c}}Nb>=Fb.length&&(Eb=!1)}var Ea=Jb;
function ya(a){null!==a&&(da?(Ea=a,a.ga||(a.ga=!0,a.addEventListener("ended",function(){this.currentTime=0;var a=Db[ub].w;ub=Db.indexOf(a);ya(a)},!1)),Ea.play(),a.volume=.5):Ea&&Ea.pause())};var K={x:0,y:0,elements:[],R:"",selection:null,aa:function(){var a=d.width/2,b=d.height;K.selection=Pb();K.elements=[K.selection,Qb(K,a-24-60,b-64,"Build Satellite",null,Rb),Qb(K,a-24,b-64,"Build Mining Station",null,Sb),Qb(K,a+36,b-64,"Build Defense Platform",null,Tb)]},update:function(){K.R="";K.elements.forEach(function(a){a.update()})},g:function(){K.elements.forEach(function(a){a.g()});k.fillStyle="#FFF";k.textAlign="center";k.textBaseline="middle";k.font="small-caps 700 32px monospace";k.fillText("next wave in",
d.width/2,32);k.font="700 64px monospace";k.fillText(~~(pb/60),d.width/2,96);k.font="small-caps 700 32px monospace";k.fillText("minerals",d.width/2+300,48);k.fillText(~~w.M,d.width/2+300,80);k.font="small-caps 700 32px monospace";k.fillText("energy",d.width/2+600,48);k.fillText(~~w.l,d.width/2+600,80);k.font="small-caps 700 32px monospace";k.fillText("survived",d.width/2-300,48);k.fillText(ob+" waves",d.width/2-300,80);k.font="small-caps 700 32px monospace";k.fillText("base status",d.width/2-600,
48);k.fillText(~~w.i+"%",d.width/2-600,80);k.font="small-caps 700 24px monospace";k.fillText(K.R,d.width/2,d.height-96)}};function Rb(){L("Select an area to build the satellite");P=db;Ub="satellite"}function Sb(){L("Select an area to build the mining station");P=db;Ub="miningStation"}function Tb(){L("Select an area to build the defense platform");P=db;Ub="defenseStation"}K.aa();
function Pb(){var a=d.width/2-180,b=d.height-128-120,c=[],e={x:a,y:b,target:null,update:function(){null!==e.target&&c.forEach(function(a){a.update()})},g:function(){null!==e.target&&(k.fillStyle="rgba(0, 0, 0, 0.5)",k.strokeStyle="rgba(255, 255, 255, 0.5)",k.fillRect(a,b,360,120),k.strokeRect(a,b,360,120),k.fillStyle="#fff",k.textAlign="left",k.textBaseline="top",k.font="16px monospace",k.fillText((w.c===e.target?"Base":"")+e.target.name,a+120,b+16),k.drawImage(e.target.cache,a+8,b+8,104,104),c.forEach(function(a){a.g()}))},
ia:function(c,h){e.x=a=c;e.y=b=h},ba:function(a){c.length=0;var b=128;a.forEach(function(a){c.push(Qb(e,b,60,a.text,a.m,a.ea,a.la));b+=60})}};return e};function Qb(a,b,c,e,f,h,m){return{update:function(){F.ja(a.x+b,a.y+c,48,48)&&(K.R=e,F.click&&h&&(h(),m&&L(m)))},g:function(){k.fillStyle="rgba(0, 0, 0, 0.5)";k.strokeStyle="rgba(255, 255, 255, 0.5)";k.fillRect(a.x+b,a.y+c,48,48);k.strokeRect(a.x+b,a.y+c,48,48);f&&k.drawImage(f,a.x+b,a.y+c,48,48)}}};var bb="";Vb();window.addEventListener("resize",Vb,!1);function Vb(){d.width=window.innerWidth;d.height=window.innerHeight;k.clearRect(0,0,d.width,d.height);K.aa()}function Wb(){k.globalAlpha=1;for(var a=J.length;a--;){var b=J[a];b.j&&Xb(b);var c=Math.floor(4*D);b.G&&b.G[c]&&(c=b.G[c],k.save(),k.translate(b.x,b.y/u),k.scale(1,1/u),k.drawImage(c,0,0,c.width,c.height),k.scale(-1,1),k.drawImage(c,0,0),k.scale(1,-1),k.drawImage(c,0,0),k.scale(-1,1),k.drawImage(c,0,0),k.restore())}}
function Xb(a){var b=a.j;if(b){var c=b.c.G;c||(c=b.c.G=[]);var e=Math.floor(4*D);c=c[e];if(!c){c=document.createElement("CANVAS");var f=0;J.forEach(function(a){a.j&&a.j.c===b.c&&(f=Math.max(f,a.j.A+40))});c.width=f;c.height=f;b.c.G[e]=c;c.X=[]}if(!c.X[a.id]){e=.1+e/4;var h=c.getContext("2d");h.setLineDash([5/e,5/e]);h.beginPath();h.lineWidth=2/e;h.strokeStyle=a.color;h.globalAlpha=.6;h.arc(0,0,b.A,0,H/4,!1);h.stroke();h.setLineDash(Yb);c.X[a.id]=!0}}}var Yb=[];
function Zb(){k.globalAlpha=1;for(var a=J.length;a--;){var b=J[a];if(b.type===$b){var c=t(b,J[0]);k.save();k.translate(b.x,b.y/u);k.rotate(c);k.scale(.2,.2);k.drawImage(Q,-Q.width/2,-Q.height/2)}else{if(!b.cache){var e=b.type===ac,f=e?"#FFF":b.color,h=e?50:10;c=b.size+h;var m=0,g=b.cache=document.createElement("CANVAS");g.width=2*c;g.height=2*c;g=b.cache.getContext("2d");e&&(m=1E3,g.shadowOffsetY=m);g.beginPath();g.fillStyle=f;g.shadowColor=b.color;g.shadowBlur=h;g.arc(c,c-m,b.size,0,H,!1);g.fill();
e&&(g.beginPath(),g.shadowColor="#FFF",g.shadowBlur=5,g.arc(c,c-m,b.size-5,0,H,!1),g.fill());if(!e)for(f=e=b.size,g.beginPath(),g.arc(c,c,b.size,0,2*Math.PI,!1),g.clip();e--;)g.beginPath(),g.globalAlpha=.05,g.fillStyle="#000",g.shadowColor="#000",g.shadowBlur=10,g.save(),g.transform(1,0,0,1,c-f/2+(b.size-f)/2,c),g.arc(0,0,2*f--,-H/4,H/4),g.fill(),g.restore()}c=t(b,J[0]);k.save();k.translate(b.x,b.y/u);k.rotate(c);b.Y&&(c=1+.01*Math.sin(performance.now()/30),k.scale(c,c));k.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}k.restore()}}function bc(a,b){b=b||[];b.push(a);for(var c=J.length;c--;){var e=J[c],f=0<=b.indexOf(e);a!==e&&!f&&(a===w.c||a.type===$b)&&q(a,e)<=w.S&&bc(e,b)}return b}
function cc(){var a=bc(w.c);k.globalAlpha=Oa(.2/D,.2,.8);k.lineWidth=Oa(1/D*2,1,4);k.strokeStyle="#0F0";k.beginPath();for(var b=75*(u-1),c=0;c<a.length;c++)for(var e=a[c],f=c;f<a.length;f++){var h=a[f];if(h!=e&&q(h,e)<=w.S&&(e===w.c||e.type===$b)&&(h.type===$b||h.type===dc||h.type===A)){var m=e.y/u,g=h.y/u;k.moveTo(e.x,m);k.bezierCurveTo(e.x,m-b,h.x,g-b,h.x,g)}}k.stroke()};var vc=document.createElement("CANVAS");vc.width=512;vc.height=512;var T=vc.getContext("2d");T.shadowBlur=1;T.globalAlpha=.5;for(var wc=300;wc--;){var xc=512*Math.random(),yc=512*Math.random(),zc=I(-1,100,90);T.fillStyle=zc;T.shadowColor=zc;T.beginPath();T.arc(xc,yc,.5,0,2*Math.PI);T.fill()}var Ac=k.createPattern(vc,"repeat");
function Bc(){var a=performance.now()/2E3;k.beginPath();k.rect(0,0,d.width,d.height);k.fillStyle=Ac;k.translate(.5*d.width,.5*d.height+500*u);k.scale(.5,.5);k.translate(-C/25,-E/25);k.rotate(a/200);k.fill();k.rotate(-a/200);k.scale(2,2);k.translate(-C/50,-E/50);k.fill()}var Cc=document.createElement("CANVAS"),Dc=Cc.getContext("2d",{alpha:!1});Cc.width=512;Cc.height=512;Dc.beginPath();var Ec=Dc.createRadialGradient(256,256,0,256,256,256);Ec.addColorStop(0,"#141e28");Ec.addColorStop(1,"#000000");
Dc.fillStyle=Ec;Dc.fillRect(0,0,512,512);var J=[],Fc=[],Gc=[],Ub=null,fb=null,ac=0,eb=1,$b=2,dc=3,A=4;ua.B();
function W(a,b,c,e,f,h,m,g){void 0===g&&(g=0);var l={name:"Some Shithole Planet"};l.type=ac;l.x=c;l.y=e;l.color=a;l.size=b;l.Y=!1;l.id=J.length.toString();l.i=100;l.s=null;l.sa=[];f&&(l.j={c:f,A:h,speed:m,angle:g});l.update=function(){if(l.j){var a=l.j;a.angle+=a.speed;l.x=a.A*Math.cos(a.angle)+a.c.x;l.y=a.A*Math.sin(a.angle)+a.c.y}l.s&&l.s.update()};l.g=function(){var a=l.j;if(a){k.beginPath();k.globalAlpha=.4;k.strokeStyle=l.color;k.lineWidth=4/D;k.save();var b=1/u;k.transform(1,0,0,b,a.c.x,a.c.y*
b);k.arc(0,0,a.A,a.angle-a.speed*a.A/2,a.angle,0>a.speed);k.restore();k.stroke()}l.s&&l.s.g()};J.push(l);return l}W.fa=function(){var a=I(60,100,50);a=W(a,50,0,0,null,null,null,null);a.name="The Sun";a.type=ac;a.Y=!0;return a};W.c=function(a,b,c,e,f,h){void 0===h&&(h=0);a=W(a,b,0,0,c,e+b/2,f,h);a.name="Planet";a.type=c.type===eb?5:eb;a.update=Ra(a.update,function(){});return a};
W.V=function(a){void 0!==Ta(4,a,Fc)&&(a=W(I(212,100,97),2,0,0,a,3*a.size,-.005,null),a.name="Mining Station",a.type=dc,a.update=Ra(a.update,function(){w.M+=w.ha}))};W.h=function(a){var b=Ta(3,a,Fc);void 0!==b&&(a=W(I(160,100,50),2,0,0,a,5*a.size,.01,b),a.name="Satellite",a.type=$b,a.cache=Q,a.update=Ra(a.update,function(){w.l+=w.ca}),Fc.push(a))};W.H=function(a){var b=Ta(2,a,Gc);void 0!==b&&(a=W(I(33,100,50),2,0,0,a,7*a.size,.005,b),a.name="Defense Platform",a.type=A,Gc.push(a),ta(a,"slow",1))};
function ta(a,b,c){b=ua.implementation(b);a.s=b(a,c)};function sb(a,b){this.x=a;this.y=b;this.z=Math.floor(20*Math.random());this.direction=0;this.i=10;this.speed=5;this.O=500;this.target=w.c;this.h=10*Math.random();this.I=[];p.push(this)}
sb.prototype={update:function(){for(var a={speed:this.speed,O:this.O},b=this.I.length;b--;){var c=this.I[b];a[c.type]*=c.value;c.time--;0>=c.time&&this.I.length--}b={x:this.x,y:this.y};c=999999;for(var e=J[0],f=J.length;f--;)if(1<J[f].type){var h=q(J[f],b);h<c&&(c=h,e=f)}this.target=J[e];this.direction+=.01*(ja(t(this,this.target)-this.direction+n)-n);this.x-=a.speed*Math.cos(this.direction);this.y-=a.speed*Math.sin(this.direction);0>=this.h--&&(this.h=10,b=q(this,this.target),b<a.O&&ma.create(this.x,
this.y,t(this,this.target),.5<Math.random()?2E3:b,"#F00"));0>=this.i&&p.splice(p.indexOf(this),1)}};var p=[];function la(a,b){for(var c=null,e=p.length;e--;){var f=p[e],h=q(a,f);h<b&&(c=f,b=h)}return c}function Hc(){for(var a=p.length;a--;)for(var b=p[a],c=a;c--;){var e=p[c];if(200>Sa(b,e)){c=.25*(b.x-e.x);var f=.25*(b.y-e.y);b.x+=c;b.y+=f;e.x-=c;e.y-=f;break}}for(a=p.length;a--;)p[a].update()}
function Ic(){for(var a=-mb.width/2,b=-mb.height/2,c=p.length;c--;){var e=p[c];k.save();k.translate(e.x,e.y/u-e.z*u);k.scale(.3,.3/u);k.rotate(e.direction);k.drawImage(mb,a,b);k.restore()}};var Jc=!1,Kc=1;
function Lc(){var a=d.width/2,b=d.height/2;k.fillStyle="#FFF";k.textAlign="center";k.textBaseline="middle";k.shadowColor="#FFF";k.shadowBlur=50+2*Math.sin(performance.now()/100);k.font="small-caps 700 256px monospace";k.fillText("X",a,b-64);k.fillText("e o",a,b-90);k.shadowBlur=0;k.font="small-caps 700 32px monospace";tb?k.fillText("Loading music...",a,b+64):Eb?k.fillText("Loading sounds...",a,b+64):k.fillText("Click to continue!",a,b+64);k.font="small-caps 700 16px monospace";k.fillText("Created by",a,
d.height-68);k.fillText("ai Doge & Jack Oatley",a,d.height-48);k.fillText("for #js13k",a,d.height-28)};var w=null,cb=1,db=2,P=0,ab=64;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);Fa.B();document.addEventListener("keypress",function(a){" "===a.key&&(3===P?P=cb:P=3)});var Mc=W.fa(),X=W.c(I(180,39,62),10,Mc,650,.003,G()*H);w={c:X,i:100,ha:.01,ca:.02,ma:300,qa:0,ra:0,S:500,M:0,l:0};W.c(I(-1,60,70),5,X,100,-.002,G()*H);var Y=W.c(I(-1,60,70),20,Mc,1123,.0015,G()*H);W.c(I(-1,60,70),5,Y,8*Y.size,.01,G()*H);W.c(I(-1,60,70),10,Y,9*Y.size,.005,null);
W.c(I(-1,60,70),30,Mc,2532,-.001,G()*H);W.V(X);W.V(Y);W.h(X);W.h(Mc);W.h(Mc);W.h(Mc);W.h(Y);W.h(Y);W.h(Y);W.H(X);W.H(X);W.H(X);W.H(Y);var Nc=performance.now(),Oc=1E3/60,Pc=0;(function Qc(a){requestAnimationFrame(Qc);var c=Nc+Oc;ha.update(1/((a-Pc)/1E3));Pc=a;a>c&&(Rc(Math.min(Math.floor((a-Nc)/Oc),60)),Sc(),Nc=a)})(Nc);
function Rc(a){0===P?0<Kc--||(tb?Mb():Eb?Ob():(Jc||(Jc=!0,ya(Kb),L("Welcum to Exo")),F.click&&(P=cb,Jb.pause&&ya(Kb)))):(bb="",Na(),K.update(),P===cb?(J.forEach(function(a){a.update()}),pb--||(rb(),pb=600,ob++,L(qb[~~(Math.random()*qb.length)])),Hc(),ma.update(),va(),$a()):P===db&&(fb?F.release&&(W[Ub](fb),fb=Ub=null,P=cb):$a()));F.update();--a&&Rc(a)}
function Sc(){Qa();k.clearRect(0,0,d.width,d.height);k.drawImage(Cc,Math.floor(.5*d.width-C-2048),Math.floor(.5*d.height-E-2048),4096,4096);Bc();if(0===P)Qa(),Lc();else{k.setTransform(D,0,0,D,-C+d.width/2,-E+d.height/2);J.forEach(function(a){a.g()});k.globalAlpha=1;Wb();Zb();Ic();cc();ma.g();wa();var a=Ua();q(a,{x:F.u,y:F.v})<ab&&(k.beginPath(),k.moveTo(a.x,a.y/u),k.lineTo(F.u,F.v/u),k.strokeStyle="#ffffff",k.stroke());k.setTransform(1,0,0,1,d.width/2,d.height/2);Qa();K.g();k.font="14px monospace";
k.textBaseline="top";k.textAlign="left";k.fillStyle="#fff";k.fillText("#js13k tower defense prototype",20,220);k.fillText("https://github.com/scorp200/td13k",20,240);k.fillText("framerate: "+ha.da,20,260);k.fillText("mouse (gui): "+F.x+", "+F.y,20,280);k.fillText("mouse (view): "+F.u+", "+F.v,20,300);k.fillText("planet name: "+bb,20,320);k.fillText("view x: "+C,20,360);k.fillText("view y: "+E,20,380);k.fillText("view zoom: "+D,20,400);k.fillText("view tilt: "+u,20,420)}};})();</script></body></html>

