<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),k=d.getContext("2d",{alpha:!1});function aa(){}var ba=!1,ca=!1,n=Math.PI,p=2*n;var da=function(){var a=0,b=[];return{update:function(c){b.push(c);if(60<b.length){var e=0,f=1E3,g=0;b.shift();b.forEach(function(a){e+=a;f=Math.min(f,a);g=Math.max(g,a)});a=~~(e/60)+", "+~~f+" - "+~~g}},get ga(){return a}}}();function ea(a,b){var c=null,e=null,f=null;return{type:"beam",level:b,update:function(){for(var b=null,m=0,h=q.length;h--;){var l=q[h],C=r(a,l);C>m&&1E3>C&&(b=l,m=C)}if(c=b)for(f=t(a,c),null==e&&(e=f),e+=.01*Math.sign(fa(f-e+n)-n),b=q.length;b--;)m=q[b],h=fa(e-t(a,m)+n)-n,1E3>r(m,a)&&.1>Math.abs(h)&&(m.h-=10.5)},g:function(){if(c){k.beginPath();k.lineWidth=6+3*Math.sin(performance.now()/5);var b=k.createRadialGradient(a.x,a.y/v,100,a.x,a.y/v,1E3);b.addColorStop(0,"#FF0");b.addColorStop(1,"rgba(0, 0, 0, 0)");
k.strokeStyle=b;k.moveTo(a.x,a.y/v);k.lineTo(a.x-1E3*Math.cos(e),(a.y-1E3*Math.sin(e))/v);k.stroke()}}}};function ha(a,b){var c=0;return{type:"laser",level:b,update:function(){if(0>=c--){c=2-Math.min(b/10,2);var e=ia(a,1E3);if(e&&.1<=y.o){y.o-=.1;var f=.5<Math.random();ma.create(a.x,a.y,t(a,e),f?2E3:r(a,e),"#FF0");f||(e.h-=2)}}},g:aa}};function na(a,b){var c=20;return{type:"rocket",level:b,update:function(){if(0>=c--){c=20;var b=ia(a,1500);if(b&&.5<=y.o){y.o-=.5;var f=a.x,g=a.y,m=t(a,b);b=r(a,b);A["#00B"]||(A["#00B"]=[]);A["#00B"].push({x:f,y:g,i:m,v:b-50,ba:void 0})}}},g:aa}};function oa(a,b){var c=1E3/3,e=c;return{type:"slow",level:b,update:function(){if(0>=e--){e=c;for(var b=q.length;b--;){var g=q[b];300>r(g,a)&&g.L.push({type:"speed",value:.05,time:100})}}},g:function(){0>=e&&(k.beginPath(),k.fillStyle="#c6e2ff",k.arc(a.x,a.y/v,300,0,p),k.fill())}}};function pa(a,b){var c=[];return{type:"zap",level:b,update:function(){var b=q.length;c.length=0;var f=ia(a,300);if(f)for(;b--;){var g=q[b];300>=r(f,g)&&(f=g,c.push(g),g.h-=.1);if(10<c.length)break}},g:function(){if(c[0]){k.beginPath();k.strokeStyle="#c6e2ff";k.lineWidth=4;var b=c.length,f=c[b-1];for(k.moveTo(f.x,f.y/v);b--;)f=c[b],k.lineTo(f.x,f.y/v);k.lineTo(a.x,a.y/v);k.stroke()}}}};var ma=function(){var a={};return{create:function(b,c,e,f,g){!a[g]&&(a[g]=[]);a[g].push({x:b,y:c,l:e,v:f-50})},update:function(){for(var b in a)for(var c=a[b],e=c.length;e--;){var f=c[e];f.v-=50;0>=f.v?(f=c,f[e]=f[f.length-1],--f.length):(f.x-=50*Math.cos(f.l),f.y-=50*Math.sin(f.l))}},g:function(){k.globalAlpha=1;k.lineWidth=1;for(var b in a){k.strokeStyle=b;k.beginPath();for(var c=a[b].length;c--;){var e=a[b][c],f=e.x+10*Math.cos(e.l),g=e.y/v+10*Math.sin(e.l);k.moveTo(e.x,e.y/v);k.lineTo(f,g)}k.stroke()}},
clear:function(){a={}}}}();var F=function(){function a(a,e,f,h){return b>a&&b<a+f&&c>e&&c<e+h}var b=0,c=0,e=0,f=0,g=!1,m=!1,h=!1,l=!1,C=!1,w=!1;window.addEventListener("mousemove",function(a){var h=d.getBoundingClientRect();b=a.clientX-h.left;c=a.clientY-h.top;e=(b+B-d.width/2)/D;f=(c+E-d.height/2)*v/D;l&&(m=!0)},!1);window.addEventListener("mousedown",function(){l=g=!0},!1);window.addEventListener("mouseup",function(){l=!1;m||(h=!0);m=!1},!1);window.addEventListener("wheel",function(a){C=0<a.deltaY;w=0>a.deltaY},!1);return{update:function(){C=
w=h=g=!1},ma:a,ra:function(b,c,e,f){return g&&a(b,c,e,f)},get x(){return b},get y(){return c},get A(){return e},get B(){return f},get click(){return g},get Y(){return m},get T(){return h},get sa(){return l},get na(){return C},get ca(){return w}}}();var wa=function(){function a(a){var c=[],f;for(f in b)b[f].H===a&&c.push(f);return c}var b={};return{F:function(){Object.assign(b,{laser:{H:4,name:"Lasers",s:null,u:ha},beam:{H:4,name:"Beam",s:null,u:ea},rocket:{H:4,name:"Rockets",s:null,u:na},slow:{H:4,name:"Slow",s:null,u:oa},zap:{H:4,name:"Lightning",s:null,u:pa}})},qa:a,get:function(c){if(!c.w)return[];var e=[];a(c.type).forEach(function(a){var f=c.w,m=b[a],h=f.type===a?f.level+1:1;e.push({s:m.s,text:m.name+" (Level "+h+")",ha:va.bind(null,c,
a,h),oa:"Upgrading level "+f.level+" "+f.type+", to level "+h+" "+a})});return e},u:function(a){return b[a].u}}}();var A={};function xa(){for(var a in A)for(var b=A[a].length;b--;){var c=A[a][b];c.v-=50;0>=c.v?(c.ba&&c.ba(),A[a].splice(b,1)):(c.x-=50*Math.cos(c.i),c.y-=50*Math.sin(c.i))}}function ya(){k.lineWidth=1;for(var a in A){k.strokeStyle=a;k.beginPath();for(var b=A[a].length;b--;){var c=A[a][b],e=c.x+10*Math.cos(c.i),f=c.y/v+10*Math.sin(c.i);k.moveTo(c.x,c.y/v);k.lineTo(e,f)}k.stroke()}};var Ca=function(){function a(a,c){var e=document.createElement("LI"),f=document.createElement("LABEL"),h=document.createElement("INPUT");f.textContent=a;h.type="checkbox";h.onclick=function(){za.set(a,h.checked);c.call(h)};e.appendChild(h);e.appendChild(f);b.appendChild(e);"true"===za.get(a,"true")&&(h.checked=!0,c.call(h,!0))}var b=document.createElement("UL"),c=b.style;c.position="absolute";c.right="0px";c.bottom="0px";c.color="#FFF";c.margin="16px";c.listStyle="none";document.body.appendChild(b);
return{F:function(){a("music",function(a){ba=this.checked;a||Aa(Ba)});a("voice",function(){ca=this.checked})}}}();var za={set:function(a,b){window.localStorage.setItem(a,b)},get:function(a,b){return window.localStorage.getItem(a)||b}};var B=0,E=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,D=1,Ja=1,v=2;function Ka(){if(F.ca||F.na)Ja=Qa(Ja+(F.ca?.1:-.1),.1,2);v=Math.min(1+(D-.1),2);F.click&&(Ra=!0,Fa=B,Ga=E,Ha=F.x,Ia=F.y);F.Y&&Ra?(Da=Fa+(Ha-F.x),Ea=Ga+(Ia-F.y)):F.T&&(Ra=!1);var a=D;D+=.001>Math.abs(D-Ja)?0:(Ja-D)/5;a=D-a;.001<Math.abs(a)&&(B+=F.A*a,E+=F.B*a,Da+=F.A*a,Ea+=F.B*a);B+=.001>Math.abs(B-Da)?0:(Da-B)/5;E+=.001>Math.abs(E-Ea)?0:(Ea-E)/5}function Sa(){k.setTransform(1,0,0,1,0,0)}var Ra;function Ta(a,b){return function(){a();b()}}function Ua(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a}function r(a,b){return Math.sqrt(Ua(a,b))}function t(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function fa(a){return a-Math.floor(a/p)*p}function G(a,b,c){return"hsl("+(0>a?360*Math.random():a)+","+(0>b?100*Math.random():b)+"%,"+(0>c?100*Math.random():c)+"%)"}function Qa(a,b,c){return a>c?c:a<b?b:a}
function Va(){for(var a={x:F.A,y:F.B},b=999999,c=H[0],e=H.length;e--;){var f=r(H[e],a);f<b&&(b=f,c=e)}return H[c]}function Wa(){if(F.T){I.selection.target=null;var a=Va();r(a,{x:F.A,y:F.B})<Xa&&(Ya=a.name,F.target||F.Y||(J("selected "+a.name),1===N?(I.selection.target=a,I.selection.la(F.x,F.y),I.selection.ea(wa.get(a))):2===N&&1==a.type&&(Za=a),$a.play()))}};var O=speechSynthesis,ab=!1,bb,cb=3;O&&(ab=!0,bb=O.getVoices(),0>=bb.length&&(O.onvoiceschanged=function(){bb=O.getVoices()}));function J(a){ab&&ca&&(O.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=bb[cb%bb.length],O.speak(a))};function db(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,e,f,g,m;this.F=function(a){c=a;e=a.O;f=0;g=a.N*a.M*(e+1)*2;m=new Int32Array(g)};this.$=function(){var h,l,C,w,V,P=new Int32Array(g),x=c.U[f],W=c.N,qa=c.M,La=0,ra=0,K;var L=!1;var sa=[];for(l=0;l<=e;++l){var ja=x.p[l];for(C=0;C<qa;++C){if(V=ja?x.f[ja-1].a[C]:0)x.b[V-1]=x.f[ja-1].a[C+qa]||0,16>V&&(sa=[]);var Sb=b[x.b[15]],Tb=x.b[16]/512,
Ub=Math.pow(2,x.b[17]-9)/W,Vb=x.b[18],jb=x.b[19],Wb=135.82764118168*x.b[20]/44100,Xb=1-x.b[21]/255,Ma=1E-5*x.b[22],Yb=x.b[23]/32,Zb=x.b[24]/512,$b=6.283184*Math.pow(2,x.b[25]-9)/W,kb=x.b[26]/255,Na=x.b[27]*W&-2;V=(l*qa+C)*W;for(w=0;4>w;++w)if(h=ja?x.f[ja-1].n[C+w*qa]:0){if(!sa[h]){var u=sa;var R=h;var lb=K=void 0,ta,M,z=x,mb=h,ac=b[z.b[0]],bc=z.b[1],cc=z.b[3],dc=b[z.b[4]],ec=z.b[5],fc=z.b[8],nb=z.b[9],Y=z.b[10]*z.b[10]*4,ua=z.b[11]*z.b[11]*4,Oa=z.b[12]*z.b[12]*4,gc=1/Oa,ka=z.b[13],hc=W*Math.pow(2,
2-z.b[14]),ob=new Int32Array(Y+ua+Oa),pb=0,qb=0;for(ta=M=0;M<Y+ua+Oa;M++,ta++){0<=ta&&(ka=ka>>8|(ka&255)<<4,ta-=hc,lb=.003959503758*Math.pow(2,(mb+(ka&15)+z.b[2]-128-128)/12),K=.003959503758*Math.pow(2,(mb+(ka&15)+z.b[6]-128-128)/12)*(1+8E-4*z.b[7]));var S=1;M<Y?S=M/Y:M>=Y+ua&&(S-=(M-Y-ua)*gc);var la=lb;cc&&(la*=S*S);pb+=la;var Pa=ac(pb)*bc;la=K;fc&&(la*=S*S);qb+=la;Pa+=dc(qb)*ec;nb&&(Pa+=(2*Math.random()-1)*nb);ob[M]=80*Pa*S|0}u[R]=ob}R=sa[h];h=0;for(u=2*V;h<R.length;h++,u+=2)P[u]+=R[h]}for(h=0;h<
W;h++)w=2*(V+h),(u=P[w])||L?(L=Wb,Vb&&(L*=Sb(Ub*w)*Tb+.5),L=1.5*Math.sin(L),La+=L*ra,u=Xb*(u-ra)-La,ra+=L*u,u=3==jb?ra:1==jb?u:La,Ma&&(u*=Ma,u=1>u?-1<u?a(.25*u):-1:1,u/=Ma),u*=Yb,L=1E-5<u*u,R=Math.sin($b*w)*Zb+.5,K=u*(1-R),u*=R):K=0,w>=Na&&(K+=P[w-Na+1]*kb,u+=P[w-Na]*kb),P[w]=K|0,P[w+1]=u|0,m[w]+=K|0,m[w+1]+=u|0}}f++;return f/c.R};this.X=function(){var a=44+2*g-8,b=a-36,c=new Uint8Array(44+2*g);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<g;++a){var e=m[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var $a={U:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],a:[]}]}],N:5513,M:1,O:0,R:1};var Q=document.createElement("CANVAS"),T=Q.getContext("2d");Q.width=20;Q.height=140;T.fillStyle="#dddddd";T.fillRect(8,50,4,40);T.fillStyle="#639bff";T.fillRect(2,0,15,60);T.fillRect(2,80,15,60);T.fillStyle="#9badb7";T.fillRect(2,65,17,10);T.fillRect(0,66,2,8);var U=document.createElement("CANVAS"),eb=U.getContext("2d");U.width=32;U.height=32;eb.fillStyle="#ff0000";eb.moveTo(0,16);eb.lineTo(32,0);eb.lineTo(24,16);eb.lineTo(32,32);eb.fill();var fb=0,gb=0,hb=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function ib(){for(var a=100;a--;){var b=Math.random()*p;(new rb(3E3*Math.cos(b),3E3*Math.sin(b))).i=b}};var sb=!0,tb=0,ub=[],vb=!0,wb=[],xb=$a,yb=new db;yb.C=new Audio;yb.G=!0;yb.F(xb);wb.push(yb);$a=yb.C;
var Ab=zb({U:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],a:[]}]}],N:5513,M:32,O:26,R:8}),Bb=zb({U:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],f:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],f:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],f:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],f:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],f:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],f:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],f:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],N:6300,M:32,O:30,R:8});function zb(a){var b=new db;b.C=new Audio;b.G=!0;b.F(a);ub.push(b);return b.C}var Cb=0;
function Db(){for(var a=0;a<ub.length;a++){var b=ub[a];if(b.G){b.G=1<=b.$();Cb+=1;var c=b.X();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.C.src=c}}Cb>=ub.length&&(sb=!1)}var Eb=0;function Fb(){for(var a=0;a<wb.length;a++){var b=wb[a];if(b.G){b.G=1<=b.$();Eb+=1;var c=b.X();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.C.src=c}}Eb>=wb.length&&(vb=!1)}var Ba=Ab;
function Aa(a){null!==a&&(ba?(Ba=a,a.ja||(a.ja=!0,a.addEventListener("ended",function(){this.currentTime=0;var a=ub[tb].C;tb=ub.indexOf(a);Aa(a)},!1)),Ba.play(),a.volume=.5):Ba&&Ba.pause())};var y={c:null,h:100,ka:.01,fa:.02,pa:300,ua:0,va:0,W:500,P:0,o:0};var I={x:0,y:0,elements:[],V:"",selection:null,da:function(){var a=d.width/2,b=d.height;I.selection=Gb();I.elements=[I.selection,Hb(I,a-24-60,b-64,"Build Satellite",null,Ib),Hb(I,a-24,b-64,"Build Mining Station",null,Jb),Hb(I,a+36,b-64,"Build Defense Platform",null,Kb)]},update:function(){I.V="";I.elements.forEach(function(a){a.update()})},g:function(){I.elements.forEach(function(a){a.g()});k.fillStyle="#FFF";k.textAlign="center";k.textBaseline="middle";k.font="700 64px monospace";k.fillText(~~(gb/
60),d.width/2,96);k.font="small-caps 700 32px monospace";k.fillText("next wave in",d.width/2,32);k.fillText("minerals",d.width/2+300,48);k.fillText(~~y.P,d.width/2+300,80);k.fillText("energy",d.width/2+600,48);k.fillText(~~y.o,d.width/2+600,80);k.fillText("survived",d.width/2-300,48);k.fillText(fb+" waves",d.width/2-300,80);k.fillText("base status",d.width/2-600,48);k.fillText(~~y.c.h+"%",d.width/2-600,80);k.font="small-caps 700 24px monospace";k.fillText(I.V,d.width/2,d.height-96)}};
function Ib(){J("Select an area to build the satellite");N=2;Lb="satellite"}function Jb(){J("Select an area to build the mining station");N=2;Lb="miningStation"}function Kb(){J("Select an area to build the defense platform");N=2;Lb="defenseStation"}I.da();
function Gb(){var a=d.width/2-180,b=d.height-128-120,c=[],e={x:a,y:b,target:null,update:function(){null!==e.target&&c.forEach(function(a){a.update()})},g:function(){if(null!==e.target){k.fillStyle="rgba(0, 0, 0, 0.5)";k.strokeStyle="#FFF";k.lineWidth=2;k.fillRect(a,b,360,120);k.strokeRect(a,b,360,120);k.fillStyle="#fff";k.textAlign="left";k.textBaseline="top";k.font="16px monospace";k.fillText((y.c===e.target?"Base":"")+e.target.name,a+120,b+16);var f=e.target.cache,g=Math.max(f.width,f.height)/104;
k.drawImage(f,a+8+52-f.width/g/2,b+8+52-f.height/g/2,f.width/g,f.height/g);c.forEach(function(a){a.g()})}},la:function(c,g){e.x=a=c;e.y=b=g},ea:function(a){c.length=0;var b=128;a.forEach(function(a){c.push(Hb(e,b,60,a.text,a.s,a.ha,a.oa));b+=60})}};return e};function Hb(a,b,c,e,f,g,m){return{update:function(){F.ma(a.x+b,a.y+c,48,48)&&(I.V=e,F.click&&g&&(g(),m&&J(m)))},g:function(){k.fillStyle="rgba(0, 0, 0, 0.5)";k.strokeStyle="#FFF";k.lineWidth=2;k.fillRect(a.x+b,a.y+c,48,48);k.strokeRect(a.x+b,a.y+c,48,48);f&&k.drawImage(f,a.x+b,a.y+c,48,48)}}};var Ya="";Mb();window.addEventListener("resize",Mb,!1);function Mb(){d.width=window.innerWidth;d.height=window.innerHeight;k.clearRect(0,0,d.width,d.height);I.da()}
function Nb(){k.globalAlpha=1;for(var a=H.length;a--;){var b=H[a];b.j&&Ob(b);var c=Math.floor(4*D);b.J&&b.J[c]&&(c=b.J[c],k.save(),k.translate(b.x,b.y/v),k.scale(1,1/v),k.drawImage(c,0,0,c.width,c.height),k.scale(-1,1),k.drawImage(c,0,0),k.scale(1,-1),k.drawImage(c,0,0),k.scale(-1,1),k.drawImage(c,0,0),k.restore());k.fillStyle=b.I?"#0F0":"#F00";k.beginPath();k.arc(b.x,b.y/v-20,5,0,p);k.fill()}}
function Ob(a){var b=a.j;if(b){var c=b.c.J;c||(c=b.c.J=[]);var e=Math.floor(4*D);c=c[e];if(!c){c=document.createElement("CANVAS");var f=0;H.forEach(function(a){a.j&&a.j.c===b.c&&(f=Math.max(f,a.j.D+40))});c.width=f;c.height=f;b.c.J[e]=c;c.aa=[]}if(!c.aa[a.id]){e=.2+e/4;var g=c.getContext("2d");g.setLineDash([5/e,5/e]);g.beginPath();g.lineWidth=2/e;g.strokeStyle=a.color;g.globalAlpha=.6;g.arc(0,0,b.D,0,p/4,!1);g.stroke();g.setLineDash(Pb);c.aa[a.id]=!0}}}var Pb=[];
function Qb(){k.globalAlpha=1;for(var a=H.length;a--;){var b=H[a];if(2===b.type){var c=t(b,H[0]);k.save();k.translate(b.x,b.y/v);k.rotate(c);k.scale(.2,.2);k.drawImage(Q,-Q.width/2,-Q.height/2)}else{if(!b.cache){var e=0===b.type,f=e?"#FFF":b.color,g=e?50:10;c=b.size+g;var m=0,h=b.cache=document.createElement("CANVAS");h.width=2*c;h.height=2*c;h=b.cache.getContext("2d");e&&(m=1E3,h.shadowOffsetY=m);h.beginPath();h.fillStyle=f;h.shadowColor=b.color;h.shadowBlur=g;h.arc(c,c-m,b.size,0,p,!1);h.fill();
e&&(h.beginPath(),h.shadowColor="#FFF",h.shadowBlur=5,h.arc(c,c-m,b.size-5,0,p,!1),h.fill());if(!e)for(f=e=b.size,h.beginPath(),h.arc(c,c,b.size,0,2*Math.PI,!1),h.clip();e--;)h.beginPath(),h.globalAlpha=.05,h.fillStyle="#000",h.shadowColor="#000",h.shadowBlur=10,h.save(),h.transform(1,0,0,1,c-f/2+(b.size-f)/2,c),h.arc(0,0,2*f--,-p/4,p/4),h.fill(),h.restore()}c=t(b,H[0]);k.save();k.translate(b.x,b.y/v);k.rotate(c);b.ta&&(c=1+.01*Math.sin(performance.now()/30),k.scale(c,c));k.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}k.restore()}}function Rb(a,b){a.I=!0;b=b||[];b.push(a);for(var c=H.length;c--;){var e=H[c],f=0<=b.indexOf(e);a!==e&&!f&&(a===y.c||2===a.type)&&r(a,e)<=y.W&&Rb(e,b)}return b}
function ic(){for(var a=H.length;a--;)H[a].I=!1;a=Rb(y.c);k.globalAlpha=Qa(.2/D,.2,.8);k.lineWidth=Qa(1/D*2,1,4);k.strokeStyle="#0F0";k.beginPath();for(var b=75*(v-1),c=0;c<a.length;c++)for(var e=a[c],f=c;f<a.length;f++){var g=a[f];if(g!=e&&r(g,e)<=y.W&&(e===y.c||2===e.type)&&(2===g.type||3===g.type||4===g.type)){var m=e.y/v,h=g.y/v;k.moveTo(e.x,m);k.bezierCurveTo(e.x,m-b,g.x,h-b,g.x,h)}}k.stroke()};var jc=document.createElement("CANVAS");jc.width=512;jc.height=512;var X=jc.getContext("2d");X.shadowBlur=1;X.globalAlpha=.5;for(var kc=300;kc--;){var lc=512*Math.random(),mc=512*Math.random(),nc=G(-1,100,90);X.fillStyle=nc;X.shadowColor=nc;X.beginPath();X.arc(lc,mc,.5,0,2*Math.PI);X.fill()}var oc=k.createPattern(jc,"repeat");
function pc(){var a=performance.now()/2E3;k.beginPath();k.rect(0,0,d.width,d.height);k.fillStyle=oc;k.translate(.5*d.width,.5*d.height+500*v);k.scale(.5,.5);k.translate(-B/25,-E/25);k.rotate(a/200);k.fill();k.rotate(-a/200);k.scale(2,2);k.translate(-B/50,-E/50);k.fill()}var qc=document.createElement("CANVAS"),rc=qc.getContext("2d",{alpha:!1});qc.width=512;qc.height=512;rc.beginPath();var sc=rc.createRadialGradient(256,256,0,256,256,256);sc.addColorStop(0,"#234");sc.addColorStop(.1,"#123");
sc.addColorStop(1,"#000");rc.fillStyle=sc;rc.fillRect(0,0,512,512);var H=[],Lb=null,Za=null;wa.F();
function Z(a,b,c,e,f,g,m,h){void 0===h&&(h=0);var l={name:"",type:0};l.x=c;l.y=e;l.color=a;l.size=b;l.id=H.length.toString();l.h=100;l.w=null;l.wa=[];l.I=!1;f&&(l.j={c:f,D:g,speed:m,l:h});l.update=function(){0>=l.h&&(H[H.indexOf(l)]=H[H.length-1],--H.length);if(l.j){var a=l.j;a.l+=a.speed;l.x=a.D*Math.cos(a.l)+a.c.x;l.y=a.D*Math.sin(a.l)+a.c.y}l.w&&l.w.update()};l.g=function(){var a=l.j;if(a){k.beginPath();k.globalAlpha=.4;k.strokeStyle=l.color;k.lineWidth=4/D;k.save();var b=1/v;k.transform(1,0,0,
b,a.c.x,a.c.y*b);k.arc(0,0,a.D,a.l-a.speed*a.D/2,a.l,0>a.speed);k.restore();k.stroke()}l.w&&l.w.g()};H.push(l);return l}Z.ia=function(){var a=Z(G(60,100,50),50,0,0,null,null,null,null);a.name="The Sun";a.type=0;return a};Z.c=function(a,b,c,e,f,g){a=Z(a,b,0,0,c,e+b/2,f,g);a.name="Planet";a.type=1===c.type?5:1;return a};Z.Z=function(a){if(void 0!==tc(4,a)){var b=Z(G(212,100,97),2,0,0,a,3*a.size,-.005,null);b.name="Mining Station";b.type=3;b.update=Ta(b.update,function(){b.I&&(y.P+=y.ka)})}};
Z.m=function(a){var b=tc(3,a);if(void 0!==b){var c=Z(G(160,100,50),2,0,0,a,5*a.size,.01,b);c.name="Satellite";c.type=2;c.cache=Q;c.update=Ta(c.update,function(){c.I&&(y.o+=y.fa)})}};Z.K=function(a){var b=tc(2,a);void 0!==b&&(a=Z(G(33,100,50),2,0,0,a,7*a.size,.005,b),a.name="Defense Platform",a.type=4,va(a,"laser",1))};function va(a,b,c){b=wa.u(b);a.w=b(a,c)}function tc(a,b){var c=0;H.length&&H[0].j&&(c=H[0].j.l);H.forEach(function(e){e.j&&e.j.c==b&&(c+=p/a)});return c};function rb(a,b){this.x=a;this.y=b;this.z=Math.floor(20*Math.random());this.i=0;this.h=10;this.speed=5;this.S=500;this.target=y.c;this.m=10*Math.random();this.L=[];q.push(this)}
rb.prototype={update:function(){for(var a={speed:this.speed,S:this.S},b=this.L.length;b--;){var c=this.L[b];a[c.type]*=c.value;c.time--;0>=c.time&&this.L.length--}b={x:this.x,y:this.y};c=999999;for(var e=H[0],f=H.length;f--;){var g=H[f];if(1<g.type||y.c===g)g=r(H[f],b),g<c&&(c=g,e=f)}if(this.target=H[e])this.i+=.01*(fa(t(this,this.target)-this.i+n)-n),this.x-=a.speed*Math.cos(this.i),this.y-=a.speed*Math.sin(this.i),0>=this.m--&&(this.m=10,b=r(this,this.target),b<a.S&&(a=.5<Math.random(),ma.create(this.x,
this.y,t(this,this.target),a?2E3:b,"#F00"),a||--this.target.h));0>=this.h&&q.splice(q.indexOf(this),1)}};var q=[];function ia(a,b){for(var c=null,e=q.length;e--;){var f=q[e],g=r(a,f);g<b&&(c=f,b=g)}return c}function uc(){for(var a=q.length;a--;)for(var b=q[a],c=a;c--;){var e=q[c];if(200>Ua(b,e)){c=.25*(b.x-e.x);var f=.25*(b.y-e.y);b.x+=c;b.y+=f;e.x-=c;e.y-=f;break}}for(a=q.length;a--;)q[a].update()}
function vc(){for(var a=-U.width/2,b=-U.height/2,c=q.length;c--;){var e=q[c];k.save();k.translate(e.x,e.y/v-e.z*v);k.scale(.3,.3/v);k.rotate(e.i);k.drawImage(U,a,b);k.restore()}};var wc=!1,xc=1;
function yc(){var a=d.width/2,b=d.height/2;k.fillStyle="#FFF";k.textAlign="center";k.textBaseline="middle";k.shadowColor="#FFF";k.shadowBlur=50+2*Math.sin(performance.now()/100);k.font="small-caps 700 256px monospace";k.fillText("X",a,b-64);k.fillText("e o",a,b-90);k.shadowBlur=0;k.font="small-caps 700 32px monospace";sb?k.fillText("Loading music...",a,b+64):vb?k.fillText("Loading sounds...",a,b+64):k.fillText("Click to continue!",a,b+64);k.font="small-caps 700 16px monospace";k.fillText("Created by",a,
d.height-68);k.fillText("ai Doge & Jack Oatley",a,d.height-48);k.fillText("for #js13k",a,d.height-28)};var N=0,Xa=64;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);Ca.F();document.addEventListener("keypress",function(a){" "===a.key&&(N=3===N?1:3)});
function zc(){H=[];Ea=Da=E=B=0;Ja=D=1;v=2;q.length=0;ma.clear();gb=600;var a=Z.ia(),b=Z.c(G(180,39,62),10,a,650,.003,Math.random()*p);y.c=b;Z.c(G(-1,60,70),5,b,100,-.002,Math.random()*p);var c=Z.c(G(-1,60,70),20,a,1123,.0015,Math.random()*p);Z.c(G(-1,60,70),5,c,8*c.size,.01,Math.random()*p);Z.c(G(-1,60,70),10,c,9*c.size,.005,null);Z.c(G(-1,60,70),30,a,2532,-.001,Math.random()*p);Z.Z(b);Z.Z(c);Z.m(b);Z.m(a);Z.m(a);Z.m(a);Z.m(c);Z.m(c);Z.m(c);Z.K(b);Z.K(b);Z.K(b);Z.K(c)}zc();
var Ac=performance.now(),Bc=1E3/60,Cc=0;(function Dc(a){requestAnimationFrame(Dc);var c=Ac+Bc;da.update(1/((a-Cc)/1E3));Cc=a;a>c&&(Ec(Math.min(Math.floor((a-Ac)/Bc),60)),Fc(),Ac=a)})(Ac);
function Ec(a){0===N?0<xc--||(sb?Db():vb?Fb():(wc||(wc=!0,Aa(Bb),J("Welcum to Exo")),F.click&&(N=1,Ab.pause&&Aa(Bb)))):(-1===H.indexOf(y.c)&&(N=0,zc()),Ya="",Ka(),I.update(),1===N?(H.forEach(function(a){a.update()}),gb--||(ib(),gb=600,fb++,J(hb[~~(Math.random()*hb.length)])),uc(),ma.update(),xa(),Wa()):2===N&&(Za?F.T&&(Z[Lb](Za),Za=Lb=null,N=1):Wa()));F.update();--a&&Ec(a)}
function Fc(){Sa();k.clearRect(0,0,d.width,d.height);k.drawImage(qc,Math.floor(.5*d.width-B-2048),Math.floor(.5*d.height-E-2048),4096,4096);pc();if(0===N)Sa(),yc();else{k.setTransform(D,0,0,D,-B+d.width/2,-E+d.height/2);H.forEach(function(a){a.g()});k.globalAlpha=1;Nb();Qb();vc();ic();ma.g();ya();var a=Va();r(a,{x:F.A,y:F.B})<Xa&&(k.beginPath(),k.moveTo(a.x,a.y/v),k.lineTo(F.A,F.B/v),k.strokeStyle="#ffffff",k.stroke(),k.beginPath(),k.scale(1,1/v),k.arc(a.x,a.y,30,0,p),k.lineWidth=3,k.stroke());k.setTransform(1,
0,0,1,d.width/2,d.height/2);Sa();I.g();k.font="14px monospace";k.textBaseline="top";k.textAlign="left";k.fillStyle="#fff";k.fillText("#js13k tower defense prototype",20,220);k.fillText("https://github.com/scorp200/td13k",20,240);k.fillText("framerate: "+da.ga,20,260);k.fillText("mouse (gui): "+F.x+", "+F.y,20,280);k.fillText("mouse (view): "+F.A+", "+F.B,20,300);k.fillText("planet name: "+Ya,20,320);k.fillText("view x: "+B,20,360);k.fillText("view y: "+E,20,380);k.fillText("view zoom: "+D,20,400);
k.fillText("view tilt: "+v,20,420)}};})();</script></body></html>

