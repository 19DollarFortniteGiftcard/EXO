<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),m=d.getContext("2d",{alpha:!1});function aa(){}var ba=!1,ca=!1,n=Math.PI,p=2*n;var da=function(){var a=0,b=[];return{update:function(c){b.push(c);if(60<b.length){var f=0,e=1E3,h=0;b.shift();b.forEach(function(a){f+=a;e=Math.min(e,a);h=Math.max(h,a)});a=~~(f/60)+", "+~~e+" - "+~~h}},get na(){return a}}}();function ea(a,b){var c=null,f=null,e=null;return{type:"beam",level:b,update:function(){if(c=q.pa(a,1E3)){e=r(a,c);null==f&&(f=e);f+=.01*Math.sign(fa(e-f+n)-n);for(var b=q.s.length;b--;){var k=q.s[b],g=fa(f-r(a,k)+n)-n;1E3>u(k,a)&&.1>Math.abs(g)&&(k.h-=10.5)}}},g:function(){if(c){m.beginPath();m.lineWidth=6+3*Math.sin(performance.now()/5);var b=m.createRadialGradient(a.x,a.y/x,100,a.x,a.y/x,1E3);b.addColorStop(0,"#FF0");b.addColorStop(1,"rgba(0, 0, 0, 0)");m.strokeStyle=b;m.moveTo(a.x,a.y/x);m.lineTo(a.x-
1E3*Math.cos(f),(a.y-1E3*Math.sin(f))/x);m.stroke()}}}};function ha(a,b){var c=0;return{type:"laser",level:b,update:function(){if(0>=c--){c=2-Math.min(b/10,2);var f=q.U(a,1E3);if(f&&.1<=z.l){z.l-=.1;var e=.5<Math.random();la.create(a.x,a.y,r(a,f),e?2E3:u(a,f),"#FF0");e||(f.h-=2)}}},g:aa}};function ma(a,b){var c=20;return{type:"rocket",level:b,update:function(){if(0>=c--){c=20;var b=q.U(a,1500);if(b&&.5<=z.l){z.l-=.5;var e=a.x,h=a.y,k=r(a,b);b=u(a,b);A["#00B"]||(A["#00B"]=[]);A["#00B"].push({x:e,y:h,N:k,A:b-50,ea:void 0})}}},g:aa}};function na(a,b){var c=60;return{type:"slow",level:b,update:function(){if(0>=c--){c=60;for(var b=q.s.length;b--;){var e=q.s[b];300>u(e,a)&&q.ia(e,0,.05,100)}}},g:function(){0>=c&&(m.beginPath(),m.fillStyle="#c6e2ff",m.arc(a.x,a.y/x,300,0,p),m.fill())}}};function oa(a,b){var c=[];return{type:"zap",level:b,update:function(){var b=q.s.length;c.length=0;var e=q.U(a,300);if(e)for(;b--;){var h=q.s[b];300>=u(e,h)&&(e=h,c.push(h),h.h-=.1);if(10<c.length)break}},g:function(){if(c[0]){m.beginPath();m.strokeStyle="#c6e2ff";m.lineWidth=4;var b=c.length,e=c[b-1];for(m.moveTo(e.x,e.y/x);b--;)e=c[b],m.lineTo(e.x,e.y/x);m.lineTo(a.x,a.y/x);m.stroke()}}}};var q=function(){var a=[];return{s:a,create:function(b,c,f){a.push({x:b,y:c,z:20*Math.random(),H:f,h:10,target:null,ha:10*Math.random(),u:[]})},update:function(){for(var b=a.length;0<b--;){for(var c=a[b],f=[5,500],e=c.u.length;e--;){var h=c.u[e];f[h.type]*=h.value;0>=h.time--&&(c.u[e]=c.u[c.u.length-1],c.u.length--)}e={x:c.x,y:c.y};h=999999;for(var k=B[0],g=B.length;g--;){var l=B[g];if(1<l.type||z.c===l)l=u(B[g],e),l<h&&(h=l,k=g)}c.target=B[k];c.target&&(c.H+=.01*(fa(r(c,c.target)-c.H+n)-n),c.x-=
f[0]*Math.cos(c.H),c.y-=f[0]*Math.sin(c.H),0>=c.ha--&&(c.ha=10,e=u(c,c.target),e<f[1]&&(f=.5<Math.random(),la.create(c.x,c.y,r(c,c.target),f?2E3:e,"#F00"),f||--c.target.h)));0>=c.h&&q.s.splice(b,1)}},g:function(){for(var b=-pa.width/2,c=-pa.height/2,f=a.length;f--;){var e=a[f];m.save();m.translate(e.x,e.y/x-e.z*x);m.scale(.3,.3/x);m.rotate(e.H);m.drawImage(pa,b,c);m.restore()}},U:function(b,c){for(var f=null,e=a.length;e--;){var h=a[e],k=u(b,h);k<c&&(f=h,c=k)}return f},pa:function(b,c){for(var f=
null,e=0,h=a.length;h--;){var k=a[h],g=u(b,k);g>e&&g<c&&(f=k,e=g)}return f},ia:function(a,c,f,e){a.u.push({type:c,value:f,time:e})},la:function(){a.length=0}}}();var la=function(){var a={};return{create:function(b,c,f,e,h){!a[h]&&(a[h]=[]);a[h].push({x:b,y:c,j:f,A:e-50})},update:function(){for(var b in a)for(var c=a[b],f=c.length;f--;){var e=c[f];e.A-=50;0>=e.A?(e=c,e[f]=e[e.length-1],--e.length):(e.x-=50*Math.cos(e.j),e.y-=50*Math.sin(e.j))}},g:function(){m.globalAlpha=1;m.lineWidth=1;for(var b in a){m.strokeStyle=b;m.beginPath();for(var c=a[b].length;c--;){var f=a[b][c],e=f.x+10*Math.cos(f.j),h=f.y/x+10*Math.sin(f.j);m.moveTo(f.x,f.y/x);m.lineTo(e,h)}m.stroke()}},
clear:function(){a={}}}}();var F=function(){function a(a,e,f,g){return b>a&&b<a+f&&c>e&&c<e+g}var b=0,c=0,f=0,e=0,h=!1,k=!1,g=!1,l=!1,G=!1,v=!1;window.addEventListener("mousemove",function(a){var g=d.getBoundingClientRect();b=a.clientX-g.left;c=a.clientY-g.top;f=(b+C-d.width/2)/D;e=(c+E-d.height/2)*x/D;l&&(k=!0)},!1);window.addEventListener("mousedown",function(){l=h=!0},!1);window.addEventListener("mouseup",function(){l=!1;k||(g=!0);k=!1},!1);window.addEventListener("wheel",function(a){G=0<a.deltaY;v=0>a.deltaY},!1);return{update:function(){G=
v=g=h=!1},ua:a,Aa:function(b,c,e,f){return h&&a(b,c,e,f)},get x(){return b},get y(){return c},get C(){return f},get D(){return e},get click(){return h},get aa(){return k},get W(){return g},get Ba(){return l},get va(){return G},get fa(){return v}}}();var wa=function(){function a(a){var c=[],e;for(e in b)b[e].J===a&&c.push(e);return c}var b={};return{m:function(){Object.assign(b,{laser:{J:4,name:"Lasers",v:null,w:ha},beam:{J:4,name:"Beam",v:null,w:ea},rocket:{J:4,name:"Rockets",v:null,w:ma},slow:{J:4,name:"Slow",v:null,w:na},zap:{J:4,name:"Lightning",v:null,w:oa}})},za:a,get:function(c){if(!c.B)return[];var f=[];a(c.type).forEach(function(a){var e=c.B,k=b[a],g=e.type===a?e.level+1:1;f.push({v:k.v,text:k.name+" (Level "+g+")",oa:va.bind(null,c,
a,g),wa:"Upgrading level "+e.level+" "+e.type+", to level "+g+" "+a})});return f},w:function(a){return b[a].w}}}();var A={};function xa(){for(var a in A)for(var b=A[a].length;b--;){var c=A[a][b];c.A-=50;0>=c.A?(c.ea&&c.ea(),A[a].splice(b,1)):(c.x-=50*Math.cos(c.N),c.y-=50*Math.sin(c.N))}}function ya(){m.lineWidth=1;for(var a in A){m.strokeStyle=a;m.beginPath();for(var b=A[a].length;b--;){var c=A[a][b],f=c.x+10*Math.cos(c.N),e=c.y/x+10*Math.sin(c.N);m.moveTo(c.x,c.y/x);m.lineTo(f,e)}m.stroke()}};var Ca=function(){function a(a,c){var e=document.createElement("LI"),f=document.createElement("LABEL"),g=document.createElement("INPUT");f.textContent=a;g.type="checkbox";g.onclick=function(){za.set(a,g.checked);c.call(g)};e.appendChild(g);e.appendChild(f);b.appendChild(e);"true"===za.get(a,"true")&&(g.checked=!0,c.call(g,!0))}var b=document.createElement("UL"),c=b.style;c.position="absolute";c.right="0px";c.bottom="0px";c.color="#FFF";c.margin="16px";c.listStyle="none";document.body.appendChild(b);
return{m:function(){a("music",function(a){ba=this.checked;a||Aa(Ba)});a("voice",function(){ca=this.checked})}}}();var za={set:function(a,b){window.localStorage.setItem(a,b)},get:function(a,b){return window.localStorage.getItem(a)||b}};var C=0,E=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,D=1,Ja=1,x=2;function Ka(){if(F.fa||F.va)Ja=Qa(Ja+(F.fa?.1:-.1),.1,2);x=Math.min(1+(D-.1),2);F.click&&(Ra=!0,Fa=C,Ga=E,Ha=F.x,Ia=F.y);F.aa&&Ra?(Da=Fa+(Ha-F.x),Ea=Ga+(Ia-F.y)):F.W&&(Ra=!1);var a=D;D+=.001>Math.abs(D-Ja)?0:(Ja-D)/5;a=D-a;.001<Math.abs(a)&&(C+=F.C*a,E+=F.D*a,Da+=F.C*a,Ea+=F.D*a);C+=.001>Math.abs(C-Da)?0:(Da-C)/5;E+=.001>Math.abs(E-Ea)?0:(Ea-E)/5}function Sa(){m.setTransform(1,0,0,1,0,0)}var Ra;function Ta(a,b){return function(){a();b()}}function u(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function r(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function fa(a){return a-Math.floor(a/p)*p}function H(a,b,c){return"hsl("+(0>a?360*Math.random():a)+","+(0>b?100*Math.random():b)+"%,"+(0>c?100*Math.random():c)+"%)"}function Qa(a,b,c){return a>c?c:a<b?b:a}function Ua(){for(var a={x:F.C,y:F.D},b=999999,c=B[0],f=B.length;f--;){var e=u(B[f],a);e<b&&(b=e,c=f)}return B[c]}
function Va(){if(F.W){I.selection.target=null;var a=Ua();u(a,{x:F.C,y:F.D})<Wa&&(Xa=a.name,F.target||F.aa||(J("selected "+a.name),1===N?(I.selection.target=a,I.selection.ta(F.x,F.y),I.selection.ja(wa.get(a))):2===N&&1==a.type&&(Ya=a),Za.play()))}};var O=speechSynthesis,$a=!1,ab,bb=3;O&&($a=!0,ab=O.getVoices(),0>=ab.length&&(O.onvoiceschanged=function(){ab=O.getVoices()}));function J(a){$a&&ca&&(O.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=ab[bb%ab.length],O.speak(a))};function cb(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,f,e,h,k;this.m=function(a){c=a;f=a.R;e=0;h=a.P*a.O*(f+1)*2;k=new Int32Array(h)};this.ca=function(){var g,l,G,v,V,P=new Int32Array(h),w=c.X[e],W=c.P,qa=c.O,La=0,ra=0,K;var L=!1;var sa=[];for(l=0;l<=f;++l){var ia=w.p[l];for(G=0;G<qa;++G){if(V=ia?w.f[ia-1].a[G]:0)w.b[V-1]=w.f[ia-1].a[G+qa]||0,16>V&&(sa=[]);var Ob=b[w.b[15]],Pb=w.b[16]/
512,Qb=Math.pow(2,w.b[17]-9)/W,Rb=w.b[18],ib=w.b[19],Sb=135.82764118168*w.b[20]/44100,Tb=1-w.b[21]/255,Ma=1E-5*w.b[22],Ub=w.b[23]/32,Vb=w.b[24]/512,Wb=6.283184*Math.pow(2,w.b[25]-9)/W,jb=w.b[26]/255,Na=w.b[27]*W&-2;V=(l*qa+G)*W;for(v=0;4>v;++v)if(g=ia?w.f[ia-1].n[G+v*qa]:0){if(!sa[g]){var t=sa;var R=g;var kb=K=void 0,ta,M,y=w,lb=g,Xb=b[y.b[0]],Yb=y.b[1],Zb=y.b[3],$b=b[y.b[4]],ac=y.b[5],bc=y.b[8],mb=y.b[9],Y=y.b[10]*y.b[10]*4,ua=y.b[11]*y.b[11]*4,Oa=y.b[12]*y.b[12]*4,cc=1/Oa,ja=y.b[13],dc=W*Math.pow(2,
2-y.b[14]),nb=new Int32Array(Y+ua+Oa),ob=0,pb=0;for(ta=M=0;M<Y+ua+Oa;M++,ta++){0<=ta&&(ja=ja>>8|(ja&255)<<4,ta-=dc,kb=.003959503758*Math.pow(2,(lb+(ja&15)+y.b[2]-128-128)/12),K=.003959503758*Math.pow(2,(lb+(ja&15)+y.b[6]-128-128)/12)*(1+8E-4*y.b[7]));var S=1;M<Y?S=M/Y:M>=Y+ua&&(S-=(M-Y-ua)*cc);var ka=kb;Zb&&(ka*=S*S);ob+=ka;var Pa=Xb(ob)*Yb;ka=K;bc&&(ka*=S*S);pb+=ka;Pa+=$b(pb)*ac;mb&&(Pa+=(2*Math.random()-1)*mb);nb[M]=80*Pa*S|0}t[R]=nb}R=sa[g];g=0;for(t=2*V;g<R.length;g++,t+=2)P[t]+=R[g]}for(g=0;g<
W;g++)v=2*(V+g),(t=P[v])||L?(L=Sb,Rb&&(L*=Ob(Qb*v)*Pb+.5),L=1.5*Math.sin(L),La+=L*ra,t=Tb*(t-ra)-La,ra+=L*t,t=3==ib?ra:1==ib?t:La,Ma&&(t*=Ma,t=1>t?-1<t?a(.25*t):-1:1,t/=Ma),t*=Ub,L=1E-5<t*t,R=Math.sin(Wb*v)*Vb+.5,K=t*(1-R),t*=R):K=0,v>=Na&&(K+=P[v-Na+1]*jb,t+=P[v-Na]*jb),P[v]=K|0,P[v+1]=t|0,k[v]+=K|0,k[v+1]+=t|0}}e++;return e/c.V};this.$=function(){var a=44+2*h-8,b=a-36,c=new Uint8Array(44+2*h);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<h;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var Za={X:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],f:[{n:[163],a:[]}]}],P:5513,O:1,R:0,V:1};var Q=document.createElement("CANVAS"),T=Q.getContext("2d");Q.width=20;Q.height=140;T.fillStyle="#dddddd";T.fillRect(8,50,4,40);T.fillStyle="#639bff";T.fillRect(2,0,15,60);T.fillRect(2,80,15,60);T.fillStyle="#9badb7";T.fillRect(2,65,17,10);T.fillRect(0,66,2,8);var pa,db=document.createElement("CANVAS"),U=db.getContext("2d");db.width=32;db.height=32;U.fillStyle="#ff0000";U.moveTo(0,16);U.lineTo(32,0);U.lineTo(24,16);U.lineTo(32,32);U.fill();pa=db;var eb=function(){var a=0,b=0,c=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];return{m:function(){b=600},update:function(){if(!b--){for(var f=100;f--;){var e=Math.random()*p;q.create(3E3*Math.cos(e),3E3*Math.sin(e),e)}b=600;a++;J(c[~~(Math.random()*c.length)])}},get xa(){return b},get ka(){return a}}}();var fb=!0,gb=0,hb=[],qb=!0,rb=[],sb=Za,tb=new cb;tb.F=new Audio;tb.I=!0;tb.m(sb);rb.push(tb);Za=tb.F;
var vb=ub({X:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],f:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],f:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],f:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],f:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],f:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],f:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],f:[{n:[147],a:[]}]}],P:5513,O:32,R:26,V:8}),wb=ub({X:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],f:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],f:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],f:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],f:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],f:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],f:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],f:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],f:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],P:6300,O:32,R:30,V:8});function ub(a){var b=new cb;b.F=new Audio;b.I=!0;b.m(a);hb.push(b);return b.F}var xb=0;
function yb(){for(var a=0;a<hb.length;a++){var b=hb[a];if(b.I){b.I=1<=b.ca();xb+=1;var c=b.$();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.F.src=c}}xb>=hb.length&&(fb=!1)}var zb=0;function Ab(){for(var a=0;a<rb.length;a++){var b=rb[a];if(b.I){b.I=1<=b.ca();zb+=1;var c=b.$();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.F.src=c}}zb>=rb.length&&(qb=!1)}var Ba=vb;
function Aa(a){null!==a&&(ba?(Ba=a,a.ra||(a.ra=!0,a.addEventListener("ended",function(){this.currentTime=0;var a=hb[gb].F;gb=hb.indexOf(a);Aa(a)},!1)),Ba.play(),a.volume=.5):Ba&&Ba.pause())};var z={c:null,h:100,sa:.01,ma:.02,ya:300,Da:0,Ea:0,Z:500,S:0,l:0};var I={x:0,y:0,elements:[],Y:"",selection:null,ga:function(){var a=d.width/2,b=d.height;I.selection=Bb();I.elements=[I.selection,Cb(I,a-24-60,b-64,"Build Satellite",null,Db),Cb(I,a-24,b-64,"Build Mining Station",null,Eb),Cb(I,a+36,b-64,"Build Defense Platform",null,Fb)]},update:function(){I.Y="";I.elements.forEach(function(a){a.update()})},g:function(){I.elements.forEach(function(a){a.g()});m.fillStyle="#FFF";m.textAlign="center";m.textBaseline="middle";m.font="700 64px monospace";m.fillText(~~(eb.xa/
60),d.width/2,96);m.font="small-caps 700 32px monospace";m.fillText("next wave in",d.width/2,32);m.fillText("minerals",d.width/2+300,48);m.fillText(~~z.S,d.width/2+300,80);m.fillText("energy",d.width/2+600,48);m.fillText(~~z.l,d.width/2+600,80);m.fillText("survived",d.width/2-300,48);m.fillText(eb.ka+" waves",d.width/2-300,80);m.fillText("base status",d.width/2-600,48);m.fillText(~~z.c.h+"%",d.width/2-600,80);m.font="small-caps 700 24px monospace";m.fillText(I.Y,d.width/2,d.height-96)}};
function Db(){J("Select an area to build the satellite");N=2;Gb="satellite"}function Eb(){J("Select an area to build the mining station");N=2;Gb="miningStation"}function Fb(){J("Select an area to build the defense platform");N=2;Gb="defenseStation"}I.ga();
function Bb(){var a=d.width/2-180,b=d.height-128-120,c=[],f={x:a,y:b,target:null,update:function(){null!==f.target&&c.forEach(function(a){a.update()})},g:function(){if(null!==f.target){m.fillStyle="rgba(0, 0, 0, 0.5)";m.strokeStyle="#FFF";m.lineWidth=2;m.fillRect(a,b,360,120);m.strokeRect(a,b,360,120);m.fillStyle="#fff";m.textAlign="left";m.textBaseline="top";m.font="16px monospace";m.fillText((z.c===f.target?"Base":"")+f.target.name,a+120,b+16);var e=f.target.cache,h=Math.max(e.width,e.height)/104;
m.drawImage(e,a+8+52-e.width/h/2,b+8+52-e.height/h/2,e.width/h,e.height/h);c.forEach(function(a){a.g()})}},ta:function(c,h){f.x=a=c;f.y=b=h},ja:function(a){c.length=0;var b=128;a.forEach(function(a){c.push(Cb(f,b,60,a.text,a.v,a.oa,a.wa));b+=60})}};return f};function Cb(a,b,c,f,e,h,k){return{update:function(){F.ua(a.x+b,a.y+c,48,48)&&(I.Y=f,F.click&&h&&(h(),k&&J(k)))},g:function(){m.fillStyle="rgba(0, 0, 0, 0.5)";m.strokeStyle="#FFF";m.lineWidth=2;m.fillRect(a.x+b,a.y+c,48,48);m.strokeRect(a.x+b,a.y+c,48,48);e&&m.drawImage(e,a.x+b,a.y+c,48,48)}}};var Xa="";Hb();window.addEventListener("resize",Hb,!1);function Hb(){d.width=window.innerWidth;d.height=window.innerHeight;m.clearRect(0,0,d.width,d.height);I.ga()}
function Ib(){m.globalAlpha=1;for(var a=B.length;a--;){var b=B[a];b.i&&Jb(b);var c=Math.floor(4*D);b.L&&b.L[c]&&(c=b.L[c],m.save(),m.translate(b.x,b.y/x),m.scale(1,1/x),m.drawImage(c,0,0,c.width,c.height),m.scale(-1,1),m.drawImage(c,0,0),m.scale(1,-1),m.drawImage(c,0,0),m.scale(-1,1),m.drawImage(c,0,0),m.restore());m.fillStyle=b.K?"#0F0":"#F00";m.beginPath();m.arc(b.x,b.y/x-20,5,0,p);m.fill()}}
function Jb(a){var b=a.i;if(b){var c=b.c.L;c||(c=b.c.L=[]);var f=Math.floor(4*D);c=c[f];if(!c){c=document.createElement("CANVAS");var e=0;B.forEach(function(a){a.i&&a.i.c===b.c&&(e=Math.max(e,a.i.G+40))});c.width=e;c.height=e;b.c.L[f]=c;c.da=[]}if(!c.da[a.id]){f=.2+f/4;var h=c.getContext("2d");h.setLineDash([5/f,5/f]);h.beginPath();h.lineWidth=2/f;h.strokeStyle=a.color;h.globalAlpha=.6;h.arc(0,0,b.G,0,p/4,!1);h.stroke();h.setLineDash(Kb);c.da[a.id]=!0}}}var Kb=[];
function Lb(){m.globalAlpha=1;for(var a=B.length;a--;){var b=B[a];if(2===b.type){var c=r(b,B[0]);m.save();m.translate(b.x,b.y/x);m.rotate(c);m.scale(.2,.2);m.drawImage(Q,-Q.width/2,-Q.height/2)}else{if(!b.cache){var f=0===b.type,e=f?"#FFF":b.color,h=f?50:10;c=b.size+h;var k=0,g=b.cache=document.createElement("CANVAS");g.width=2*c;g.height=2*c;g=b.cache.getContext("2d");f&&(k=1E3,g.shadowOffsetY=k);g.beginPath();g.fillStyle=e;g.shadowColor=b.color;g.shadowBlur=h;g.arc(c,c-k,b.size,0,p,!1);g.fill();
f&&(g.beginPath(),g.shadowColor="#FFF",g.shadowBlur=5,g.arc(c,c-k,b.size-5,0,p,!1),g.fill());if(!f)for(e=f=b.size,g.beginPath(),g.arc(c,c,b.size,0,2*Math.PI,!1),g.clip();f--;)g.beginPath(),g.globalAlpha=.05,g.fillStyle="#000",g.shadowColor="#000",g.shadowBlur=10,g.save(),g.transform(1,0,0,1,c-e/2+(b.size-e)/2,c),g.arc(0,0,2*e--,-p/4,p/4),g.fill(),g.restore()}c=r(b,B[0]);m.save();m.translate(b.x,b.y/x);m.rotate(c);b.Ca&&(c=1+.01*Math.sin(performance.now()/30),m.scale(c,c));m.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}m.restore()}}function Mb(a,b){a.K=!0;b=b||[];b.push(a);for(var c=B.length;c--;){var f=B[c],e=0<=b.indexOf(f);a!==f&&!e&&(a===z.c||2===a.type)&&u(a,f)<=z.Z&&Mb(f,b)}return b}
function Nb(){for(var a=B.length;a--;)B[a].K=!1;a=Mb(z.c);m.globalAlpha=Qa(.2/D,.2,.8);m.lineWidth=Qa(1/D*2,1,4);m.strokeStyle="#0F0";m.beginPath();for(var b=75*(x-1),c=0;c<a.length;c++)for(var f=a[c],e=c;e<a.length;e++){var h=a[e];if(h!=f&&u(h,f)<=z.Z&&(f===z.c||2===f.type)&&(2===h.type||3===h.type||4===h.type)){var k=f.y/x,g=h.y/x;m.moveTo(f.x,k);m.bezierCurveTo(f.x,k-b,h.x,g-b,h.x,g)}}m.stroke()};var ec=document.createElement("CANVAS");ec.width=512;ec.height=512;var X=ec.getContext("2d");X.shadowBlur=1;X.globalAlpha=.5;for(var fc=300;fc--;){var gc=512*Math.random(),hc=512*Math.random(),ic=H(-1,100,90);X.fillStyle=ic;X.shadowColor=ic;X.beginPath();X.arc(gc,hc,.5,0,2*Math.PI);X.fill()}var jc=m.createPattern(ec,"repeat");
function kc(){var a=performance.now()/2E3;m.beginPath();m.rect(0,0,d.width,d.height);m.fillStyle=jc;m.translate(.5*d.width,.5*d.height+500*x);m.scale(.5,.5);m.translate(-C/25,-E/25);m.rotate(a/200);m.fill();m.rotate(-a/200);m.scale(2,2);m.translate(-C/50,-E/50);m.fill()}var lc=document.createElement("CANVAS"),mc=lc.getContext("2d",{alpha:!1});lc.width=512;lc.height=512;mc.beginPath();var nc=mc.createRadialGradient(256,256,0,256,256,256);nc.addColorStop(0,"#234");nc.addColorStop(.1,"#123");
nc.addColorStop(1,"#000");mc.fillStyle=nc;mc.fillRect(0,0,512,512);var B=[],Gb=null,Ya=null;wa.m();
function Z(a,b,c,f,e,h,k,g){void 0===g&&(g=0);var l={name:"",type:0};l.x=c;l.y=f;l.color=a;l.size=b;l.id=B.length.toString();l.h=100;l.B=null;l.Fa=[];l.K=!1;e&&(l.i={c:e,G:h,T:k,j:g});l.update=function(){0>=l.h&&(B[B.indexOf(l)]=B[B.length-1],--B.length);if(l.i){var a=l.i;a.j+=a.T;l.x=a.G*Math.cos(a.j)+a.c.x;l.y=a.G*Math.sin(a.j)+a.c.y}l.B&&l.B.update()};l.g=function(){var a=l.i;if(a){m.beginPath();m.globalAlpha=.4;m.strokeStyle=l.color;m.lineWidth=4/D;m.save();var b=1/x;m.transform(1,0,0,b,a.c.x,
a.c.y*b);m.arc(0,0,a.G,a.j-a.T*a.G/2,a.j,0>a.T);m.restore();m.stroke()}l.B&&l.B.g()};B.push(l);return l}Z.qa=function(){var a=Z(H(60,100,50),50,0,0,null,null,null,null);a.name="The Sun";a.type=0;return a};Z.c=function(a,b,c,f,e,h){a=Z(a,b,0,0,c,f+b/2,e,h);a.name="Planet";a.type=1===c.type?5:1;return a};Z.ba=function(a){if(void 0!==oc(4,a)){var b=Z(H(212,100,97),2,0,0,a,3*a.size,-.005,null);b.name="Mining Station";b.type=3;b.update=Ta(b.update,function(){b.K&&(z.S+=z.sa)})}};
Z.o=function(a){var b=oc(3,a);if(void 0!==b){var c=Z(H(160,100,50),2,0,0,a,5*a.size,.01,b);c.name="Satellite";c.type=2;c.cache=Q;c.update=Ta(c.update,function(){c.K&&(z.l+=z.ma)})}};Z.M=function(a){var b=oc(2,a);void 0!==b&&(a=Z(H(33,100,50),2,0,0,a,7*a.size,.005,b),a.name="Defense Platform",a.type=4,va(a,"slow",1))};function va(a,b,c){b=wa.w(b);a.B=b(a,c)}function oc(a,b){var c=0;B.length&&B[0].i&&(c=B[0].i.j);B.forEach(function(f){f.i&&f.i.c==b&&(c+=p/a)});return c};var pc=!1,qc=1;
function rc(){var a=d.width/2,b=d.height/2;m.fillStyle="#FFF";m.textAlign="center";m.textBaseline="middle";m.shadowColor="#FFF";m.shadowBlur=50+2*Math.sin(performance.now()/100);m.font="small-caps 700 256px monospace";m.fillText("X",a,b-64);m.fillText("e o",a,b-90);m.shadowBlur=0;m.font="small-caps 700 32px monospace";fb?m.fillText("Loading music...",a,b+64):qb?m.fillText("Loading sounds...",a,b+64):m.fillText("Click to continue!",a,b+64);m.font="small-caps 700 16px monospace";m.fillText("Created by",a,
d.height-68);m.fillText("ai Doge & Jack Oatley",a,d.height-48);m.fillText("for #js13k",a,d.height-28)};var N=0,Wa=64;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);Ca.m();document.addEventListener("keypress",function(a){" "===a.key&&(N=3===N?1:3)});
function sc(){B=[];Ea=Da=E=C=0;Ja=D=1;x=2;q.la();la.clear();eb.m();var a=Z.qa(),b=Z.c(H(180,39,62),10,a,650,.003,Math.random()*p);z.c=b;Z.c(H(-1,60,70),5,b,100,-.002,Math.random()*p);var c=Z.c(H(-1,60,70),20,a,1123,.0015,Math.random()*p);Z.c(H(-1,60,70),5,c,8*c.size,.01,Math.random()*p);Z.c(H(-1,60,70),10,c,9*c.size,.005,null);Z.c(H(-1,60,70),30,a,2532,-.001,Math.random()*p);Z.ba(b);Z.ba(c);Z.o(b);Z.o(a);Z.o(a);Z.o(a);Z.o(c);Z.o(c);Z.o(c);Z.M(b);Z.M(b);Z.M(b);Z.M(c)}sc();
var tc=performance.now(),uc=1E3/60,vc=0;(function wc(a){requestAnimationFrame(wc);var c=tc+uc;da.update(1/((a-vc)/1E3));vc=a;a>c&&(xc(Math.min(Math.floor((a-tc)/uc),60)),yc(),tc=a)})(tc);
function xc(a){0===N?0<qc--||(fb?yb():qb?Ab():(pc||(pc=!0,Aa(wb),J("Welcum to Exo")),F.click&&(N=1,vb.pause&&Aa(wb)))):(-1===B.indexOf(z.c)&&(N=0,sc()),Xa="",Ka(),I.update(),1===N?(B.forEach(function(a){a.update()}),eb.update(),q.update(),la.update(),xa(),Va()):2===N&&(Ya?F.W&&(Z[Gb](Ya),Ya=Gb=null,N=1):Va()));F.update();--a&&xc(a)}
function yc(){Sa();m.clearRect(0,0,d.width,d.height);m.drawImage(lc,Math.floor(.5*d.width-C-2048),Math.floor(.5*d.height-E-2048),4096,4096);kc();if(0===N)Sa(),rc();else{m.setTransform(D,0,0,D,-C+d.width/2,-E+d.height/2);B.forEach(function(a){a.g()});m.globalAlpha=1;Ib();Lb();q.g();Nb();la.g();ya();var a=Ua();u(a,{x:F.C,y:F.D})<Wa&&(m.beginPath(),m.moveTo(a.x,a.y/x),m.lineTo(F.C,F.D/x),m.strokeStyle="#ffffff",m.stroke(),m.beginPath(),m.scale(1,1/x),m.arc(a.x,a.y,30,0,p),m.lineWidth=3,m.stroke());m.setTransform(1,
0,0,1,d.width/2,d.height/2);Sa();I.g();m.font="14px monospace";m.textBaseline="top";m.textAlign="left";m.fillStyle="#fff";m.fillText("#js13k tower defense prototype",20,220);m.fillText("https://github.com/scorp200/td13k",20,240);m.fillText("framerate: "+da.na,20,260);m.fillText("mouse (gui): "+F.x+", "+F.y,20,280);m.fillText("mouse (view): "+F.C+", "+F.D,20,300);m.fillText("planet name: "+Xa,20,320);m.fillText("view x: "+C,20,360);m.fillText("view y: "+E,20,380);m.fillText("view zoom: "+D,20,400);
m.fillText("view tilt: "+x,20,420)}};})();</script></body></html>

