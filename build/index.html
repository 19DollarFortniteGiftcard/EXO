<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),l=d.getContext("2d",{alpha:!1});function aa(){}var ba=!1,ca=!1,m=Math.PI,n=2*m;var da=function(){var a=0,b=[];return{update:function(c){b.push(c);if(60<b.length){var e=0,g=1E3,f=0;b.shift();b.forEach(function(a){e+=a;g=Math.min(g,a);f=Math.max(f,a)});a=~~(e/60)+", "+~~g+" - "+~~f}},get na(){return a}}}();function ia(a,b){var c=null,e=null,g=null;return{type:"beam",level:b,update:function(){if(c=p.pa(a,1E3)){g=v(a,c);null==e&&(e=g);e+=.01*Math.sign(ja(g-e+m)-m);for(var b=p.w.length;b--;){var k=p.w[b],h=ja(e-v(a,k)+m)-m;1E3>x(k,a)&&.1>Math.abs(h)&&(k.j-=10.5)}}},h:function(){if(c){l.beginPath();l.lineWidth=6+3*Math.sin(performance.now()/5);var b=l.createRadialGradient(a.x,a.y/y.c,100,a.x,a.y/y.c,1E3);b.addColorStop(0,"#FF0");b.addColorStop(1,"rgba(0, 0, 0, 0)");l.strokeStyle=b;l.moveTo(a.x,a.y/y.c);
l.lineTo(a.x-1E3*Math.cos(e),(a.y-1E3*Math.sin(e))/y.c);l.stroke()}}}};function ka(a,b){var c=0;return{type:"laser",level:b,update:function(){if(0>=c--){c=2-Math.min(b/10,2);var e=p.U(a,1E3);if(e&&.1<=B.o){B.o-=.1;var g=.5<Math.random();la.create(a.x,a.y,v(a,e),g?2E3:x(a,e),"#FF0");g||(e.j-=2)}}},h:aa}};function ma(a,b){var c=20;return{type:"rocket",level:b,update:function(){if(0>=c--){c=20;var b=p.U(a,1500);if(b&&.5<=B.o){B.o-=.5;var g=a.x,f=a.y,k=v(a,b);b=x(a,b);C["#00B"]||(C["#00B"]=[]);C["#00B"].push({x:g,y:f,N:k,D:b-50,ca:void 0})}}},h:aa}};function na(a,b){var c=60;return{type:"slow",level:b,update:function(){if(0>=c--){c=60;for(var b=p.w.length;b--;){var g=p.w[b];300>x(g,a)&&p.ha(g,0,.05,100)}}},h:function(){0>=c&&(l.beginPath(),l.fillStyle="#c6e2ff",l.arc(a.x,a.y/y.c,300,0,n),l.fill())}}};function ta(a,b){var c=[];return{type:"zap",level:b,update:function(){var b=p.w.length;c.length=0;var g=p.U(a,300);if(g)for(;b--;){var f=p.w[b];300>=x(g,f)&&(g=f,c.push(f),f.j-=.1);if(10<c.length)break}},h:function(){if(c[0]){l.beginPath();l.strokeStyle="#c6e2ff";l.lineWidth=4;var b=c.length,g=c[b-1];for(l.moveTo(g.x,g.y/y.c);b--;)g=c[b],l.lineTo(g.x,g.y/y.c);l.lineTo(a.x,a.y/y.c);l.stroke()}}}};var p=function(){function a(a,c){a=Math.floor((a+3E3)/100);c=Math.floor((c+3E3)/100);return b[60*c+a]}for(var b=[],c=[],e=3600;e--;)b.push([]);return{w:c,create:function(a,b,e){c.push({x:a,y:b,z:20*Math.random(),K:e,j:10,target:null,ga:10*Math.random(),A:[],s:null})},update:function(){for(var b=c.length;0<b--;){var f=c[b],e=a(f.x,f.y);f.s!==e&&(null!==f.s&&(f.s[f.s.indexOf(f)]=f.s[f.s.length-1],f.s.length--),f.s=e,e.push(f));e=[5,500];for(var h=f.A.length;h--;){var t=f.A[h];e[t.type]*=t.value;0>=
t.time--&&(f.A[h]=f.A[f.A.length-1],f.A.length--)}h={x:f.x,y:f.y};t=999999;for(var r=D[0],q=D.length;q--;){var A=D[q];(1<A.type||B.f===A)&&A.G&&(A=x(D[q],h),A<t&&(t=A,r=q))}f.target=D[r];f.target&&(f.K+=.01*(ja(v(f,f.target)-f.K+m)-m),f.x-=e[0]*Math.cos(f.K),f.y-=e[0]*Math.sin(f.K),0>=f.ga--&&(f.ga=10,h=x(f,f.target),h<e[1]&&(e=.5<Math.random(),la.create(f.x,f.y,v(f,f.target),e?2E3:h,"#F00"),e||(f.target.j-=.2))));0>=f.j&&(c[b]=c[c.length-1],c.length--)}for(b=c.length;b--;)for(f=c[b],h=a(f.x,f.y),
t=h.length;t--;)if(e=h[t],f!==e&&200>ua(f,e)){h=.25*(f.x-e.x);t=.25*(f.y-e.y);f.x+=h;f.y+=t;e.x-=h;e.y-=t;break}},h:function(){for(var a=-va.width/2,b=-va.height/2,e=c.length;e--;){var h=c[e];l.save();l.translate(h.x,h.y/y.c-h.z*y.c);l.scale(1,1/y.c);l.rotate(h.K);l.drawImage(va,a,b);l.restore()}},U:function(a,b){for(var e=null,f=c.length;f--;){var g=c[f],r=x(a,g);r<b&&(e=g,b=r)}return e},pa:function(a,b){for(var e=null,f=0,g=c.length;g--;){var r=c[g],q=x(a,r);q>f&&q<b&&(e=r,f=q)}return e},ha:function(a,
b,c,e){a.A.push({type:b,value:c,time:e})},ka:function(){c.length=0}}}();var la=function(){var a={};return{create:function(b,c,e,g,f){!a[f]&&(a[f]=[]);a[f].push({x:b,y:c,l:e,D:g-50})},update:function(){for(var b in a)for(var c=a[b],e=c.length;e--;){var g=c[e];g.D-=50;0>=g.D?(g=c,g[e]=g[g.length-1],--g.length):(g.x-=50*Math.cos(g.l),g.y-=50*Math.sin(g.l))}},h:function(){l.globalAlpha=1;l.lineWidth=1;for(var b in a){l.strokeStyle=b;l.beginPath();for(var c=a[b].length;c--;){var e=a[b][c],g=e.x+10*Math.cos(e.l),f=e.y/y.c+10*Math.sin(e.l);l.moveTo(e.x,e.y/y.c);l.lineTo(g,f)}l.stroke()}},
clear:function(){a={}}}}();var F=function(){function a(a,e,f,h){return b>a&&b<a+f&&c>e&&c<e+h}var b=0,c=0,e=0,g=0,f=0,k=!1,h=!1,t=!1;window.addEventListener("mousemove",function(a){var f=d.getBoundingClientRect();b=a.clientX-f.left;c=a.clientY-f.top;e=(b+y.x-d.width/2)/y.zoom;g=(c+y.y-d.height/2)*y.c/y.zoom},!1);window.addEventListener("mousedown",function(){t=k=!0},!1);window.addEventListener("mouseup",function(){t=!1;y.$||(h=!0)},!1);window.addEventListener("wheel",function(a){f=Math.sign(a.deltaY)},!1);return{update:function(){h=
k=!1;f=0},ta:a,ya:function(b,c,e,f){return k&&a(b,c,e,f)},get x(){return b},get y(){return c},get u(){return e},get v(){return g},get click(){return k},get da(){return h},get la(){return t},get ea(){return f}}}();var xa=function(){function a(a){var c=[],g;for(g in b)b[g].M===a&&c.push(g);return c}var b={};return{m:function(){Object.assign(b,{laser:{M:4,name:"Lasers",B:null,C:ka},beam:{M:4,name:"Beam",B:null,C:ia},rocket:{M:4,name:"Rockets",B:null,C:ma},slow:{M:4,name:"Slow",B:null,C:na},zap:{M:4,name:"Lightning",B:null,C:ta}})},xa:a,get:function(c){if(!c.F)return[];var e=[];a(c.type).forEach(function(a){var f=c.F,g=b[a],h=f.type===a?f.level+1:1;e.push({B:g.B,text:g.name+" (Level "+h+")",oa:wa.bind(null,c,
a,h),ua:"Upgrading level "+f.level+" "+f.type+", to level "+h+" "+a})});return e},C:function(a){return b[a].C}}}();var C={};function ya(){for(var a in C)for(var b=C[a].length;b--;){var c=C[a][b];c.D-=50;0>=c.D?(c.ca&&c.ca(),C[a].splice(b,1)):(c.x-=50*Math.cos(c.N),c.y-=50*Math.sin(c.N))}}function za(){l.lineWidth=1;for(var a in C){l.strokeStyle=a;l.beginPath();for(var b=C[a].length;b--;){var c=C[a][b],e=c.x+10*Math.cos(c.N),g=c.y/y.c+10*Math.sin(c.N);l.moveTo(c.x,c.y/y.c);l.lineTo(e,g)}l.stroke()}};var Da=function(){function a(a,c){var f=document.createElement("LI"),e=document.createElement("LABEL"),h=document.createElement("INPUT");e.textContent=a;h.type="checkbox";h.onclick=function(){Aa.set(a,h.checked);c.call(h)};f.appendChild(h);f.appendChild(e);b.appendChild(f);"true"===Aa.get(a,"true")&&(h.checked=!0,c.call(h,!0))}var b=document.createElement("UL"),c=b.style;c.position="absolute";c.right="0px";c.bottom="0px";c.color="#FFF";c.margin="16px";c.listStyle="none";document.body.appendChild(b);
return{m:function(){a("music",function(a){ba=this.checked;a||Ba(Ca)});a("voice",function(){ca=this.checked})}}}();var Aa={set:function(a,b){window.localStorage.setItem(a,b)},get:function(a,b){return window.localStorage.getItem(a)||b}};var y=function(){function a(){l.setTransform(1,0,0,1,0,0)}var b=0,c=0,e=0,g=0,f=0,k=0,h=0,t=0,r=1,q=1,A=2,E=!1;return{get x(){return b},get y(){return c},get zoom(){return r},get c(){return A},get $(){return E},m:function(){g=e=c=b=0;q=r=1;A=2},clear:function(){a();l.clearRect(0,0,d.width,d.height)},reset:a,position:function(){l.setTransform(r,0,0,r,-b+d.width/2,-c+d.height/2)},update:function(){0!==F.ea&&(q=Ea(q+.1*F.ea,.1,2));A=Math.min(1+(r-.1),2);F.click&&(f=b,k=c,h=F.x,t=F.y);F.la&&5<Math.abs(h-
F.x)?(E=!0,e=f+(h-F.x),g=k+(t-F.y)):E=!1;var a=r;r+=.001>Math.abs(r-q)?0:(q-r)/5;a=r-a;.001<Math.abs(a)&&(b+=F.u*a,c+=F.v*a,e+=F.u*a,g+=F.v*a);b+=.001>Math.abs(b-e)?0:(e-b)/5;c+=.001>Math.abs(c-g)?0:(g-c)/5}}}();function Fa(a,b){return function(){a();b()}}function ua(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a}function x(a,b){return Math.sqrt(ua(a,b))}function v(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ja(a){return a-Math.floor(a/n)*n}function G(a,b,c){return"hsl("+(0>a?360*Math.random():a)+","+(0>b?100*Math.random():b)+"%,"+(0>c?100*Math.random():c)+"%)"}function Ea(a,b,c){return a>c?c:a<b?b:a}
function Ga(){for(var a={x:F.u,y:F.v},b=999999,c=D[0],e=D.length;e--;){var g=x(D[e],a);g<b&&(b=g,c=e)}return D[c]}function Ha(){if(F.da){H.selection.target=null;var a=Ga();x(a,{x:F.u,y:F.v})<Na&&(Oa=a.name,F.target||F.$||(I("selected "+a.name),1===M?(H.selection.target=a,H.selection.sa(F.x,F.y),H.selection.ia(xa.get(a))):2!==M||1!=a.type&&0!=a.type||(N=a,Pa=N.size*Qa),Ra.play()))}};var O=speechSynthesis,Sa=!1,Ta,Ua=3;O&&(Sa=!0,Ta=O.getVoices(),0>=Ta.length&&(O.onvoiceschanged=function(){Ta=O.getVoices()}));function I(a){Sa&&ca&&(O.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=Ta[Ua%Ta.length],O.speak(a))};function Va(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,e,g,f,k;this.m=function(a){c=a;e=a.R;g=0;f=a.P*a.O*(e+1)*2;k=new Int32Array(f)};this.aa=function(){var h,t,r,q,A,E=new Int32Array(f),w=c.W[g],W=c.P,oa=c.O,Ia=0,pa=0,J;var K=!1;var qa=[];for(t=0;t<=e;++t){var ea=w.p[t];for(r=0;r<oa;++r){if(A=ea?w.g[ea-1].a[r]:0)w.b[A-1]=w.g[ea-1].a[r+oa]||0,16>A&&(qa=[]);var Jb=b[w.b[15]],Kb=w.b[16]/
512,Lb=Math.pow(2,w.b[17]-9)/W,Mb=w.b[18],db=w.b[19],Nb=135.82764118168*w.b[20]/44100,Ob=1-w.b[21]/255,Ja=1E-5*w.b[22],Pb=w.b[23]/32,Qb=w.b[24]/512,Rb=6.283184*Math.pow(2,w.b[25]-9)/W,eb=w.b[26]/255,Ka=w.b[27]*W&-2;A=(t*oa+r)*W;for(q=0;4>q;++q)if(h=ea?w.g[ea-1].n[r+q*oa]:0){if(!qa[h]){var u=qa;var R=h;var fb=J=void 0,ra,L,z=w,gb=h,Sb=b[z.b[0]],Tb=z.b[1],Ub=z.b[3],Vb=b[z.b[4]],Wb=z.b[5],Xb=z.b[8],hb=z.b[9],X=z.b[10]*z.b[10]*4,sa=z.b[11]*z.b[11]*4,La=z.b[12]*z.b[12]*4,Yb=1/La,fa=z.b[13],Zb=W*Math.pow(2,
2-z.b[14]),ib=new Int32Array(X+sa+La),jb=0,kb=0;for(ra=L=0;L<X+sa+La;L++,ra++){0<=ra&&(fa=fa>>8|(fa&255)<<4,ra-=Zb,fb=.003959503758*Math.pow(2,(gb+(fa&15)+z.b[2]-128-128)/12),J=.003959503758*Math.pow(2,(gb+(fa&15)+z.b[6]-128-128)/12)*(1+8E-4*z.b[7]));var S=1;L<X?S=L/X:L>=X+sa&&(S-=(L-X-sa)*Yb);var ha=fb;Ub&&(ha*=S*S);jb+=ha;var Ma=Sb(jb)*Tb;ha=J;Xb&&(ha*=S*S);kb+=ha;Ma+=Vb(kb)*Wb;hb&&(Ma+=(2*Math.random()-1)*hb);ib[L]=80*Ma*S|0}u[R]=ib}R=qa[h];h=0;for(u=2*A;h<R.length;h++,u+=2)E[u]+=R[h]}for(h=0;h<
W;h++)q=2*(A+h),(u=E[q])||K?(K=Nb,Mb&&(K*=Jb(Lb*q)*Kb+.5),K=1.5*Math.sin(K),Ia+=K*pa,u=Ob*(u-pa)-Ia,pa+=K*u,u=3==db?pa:1==db?u:Ia,Ja&&(u*=Ja,u=1>u?-1<u?a(.25*u):-1:1,u/=Ja),u*=Pb,K=1E-5<u*u,R=Math.sin(Rb*q)*Qb+.5,J=u*(1-R),u*=R):J=0,q>=Ka&&(J+=E[q-Ka+1]*eb,u+=E[q-Ka]*eb),E[q]=J|0,E[q+1]=u|0,k[q]+=J|0,k[q+1]+=u|0}}g++;return g/c.V};this.Z=function(){var a=44+2*f-8,b=a-36,c=new Uint8Array(44+2*f);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,
0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<f;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var Ra={W:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],g:[{n:[163],a:[]}]}],P:5513,O:1,R:0,V:1};var P=document.createElement("CANVAS"),Q=P.getContext("2d");P.width=20;P.height=140;Q.fillStyle="#dddddd";Q.fillRect(8,50,4,40);Q.fillStyle="#639bff";Q.fillRect(2,0,15,60);Q.fillRect(2,80,15,60);Q.fillStyle="#9badb7";Q.fillRect(2,65,17,10);Q.fillRect(0,66,2,8);var va,Wa=document.createElement("CANVAS"),T=Wa.getContext("2d");Wa.width=8;Wa.height=8;T.fillStyle="#F00";T.moveTo(0,4);T.lineTo(8,0);T.lineTo(6,4);T.lineTo(8,8);T.fill();va=Wa;var Xa=function(){var a=0,b=0,c=20,e=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];return{m:function(){b=600},update:function(){if(!b--){for(var g=c;g--;){var f=Math.random()*n;p.create(3E3*Math.cos(f),3E3*Math.sin(f),f)}a++;c+=20;b=600;I(e[~~(Math.random()*e.length)])}},get va(){return b},get ja(){return a}}}();var Ya=!0,Za=0,U=[],$a=!0,ab=[],bb=Ra,cb=new Va;cb.I=new Audio;cb.L=!0;cb.m(bb);ab.push(cb);Ra=cb.I;
var mb=lb({W:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],g:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],g:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],g:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],g:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],g:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],g:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],g:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],g:[{n:[147],a:[]}]}],P:5513,O:32,R:26,V:8}),nb=lb({W:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],g:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],g:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],g:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],g:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],g:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],g:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],g:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],g:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],P:6300,O:32,R:30,V:8});function lb(a){var b=new Va;b.I=new Audio;b.L=!0;b.m(a);U.push(b);return b.I}var ob=0;
function pb(){for(var a=0;a<U.length;a++){var b=U[a];if(b.L){b.L=1<=b.aa();ob+=1;var c=b.Z();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.I.src=c}}ob>=U.length&&(Ya=!1)}var qb=0;function rb(){for(var a=0;a<ab.length;a++){var b=ab[a];if(b.L){b.L=1<=b.aa();qb+=1;var c=b.Z();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.I.src=c}}qb>=ab.length&&($a=!1)}var Ca=mb;
function Ba(a){null!==a&&(ba?(Ca=a,a.qa||(a.qa=!0,a.addEventListener("ended",function(){this.currentTime=0;var a=U[Za].I;Za=U.indexOf(a);Ba(a)},!1)),Ca.play(),a.volume=.5):Ca&&Ca.pause())};var B={f:null,j:100,ra:.01,ma:.02,wa:300,za:0,Aa:0,Y:500,S:0,o:0};var H={x:0,y:0,elements:[],X:"",selection:null,fa:function(){var a=d.width/2,b=d.height;H.selection=sb();H.elements=[H.selection,tb(H,a-24-60,b-64,"Build Satellite",null,ub),tb(H,a-24,b-64,"Build Mining Station",null,vb),tb(H,a+36,b-64,"Build Defense Platform",null,wb)]},update:function(){H.X="";H.elements.forEach(function(a){a.update()})},h:function(){H.elements.forEach(function(a){a.h()});l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.font="700 64px monospace";l.fillText(~~(Xa.va/
60),d.width/2,96);l.font="small-caps 700 32px monospace";l.fillText("next wave in",d.width/2,32);l.fillText("minerals",d.width/2+300,48);l.fillText(~~B.S,d.width/2+300,80);l.fillText("energy",d.width/2+600,48);l.fillText(~~B.o,d.width/2+600,80);l.fillText("survived",d.width/2-300,48);l.fillText(Xa.ja+" waves",d.width/2-300,80);l.fillText("base status",d.width/2-600,48);l.fillText(~~B.f.j+"%",d.width/2-600,80);l.font="small-caps 700 24px monospace";l.fillText(H.X,d.width/2,d.height-96)}};
function ub(){I("Select an area to build the satellite");xb=M=2}function vb(){I("Select an area to build the mining station");M=2;xb=3}function wb(){I("Select an area to build the defense platform");M=2;xb=4}H.fa();
function sb(){var a=d.width/2-180,b=d.height-128-120,c=[],e={x:a,y:b,target:null,update:function(){null!==e.target&&c.forEach(function(a){a.update()})},h:function(){if(null!==e.target){l.fillStyle="rgba(0, 0, 0, 0.5)";l.strokeStyle="#FFF";l.lineWidth=2;l.fillRect(a,b,360,120);l.strokeRect(a,b,360,120);l.fillStyle="#fff";l.textAlign="left";l.textBaseline="top";l.font="16px monospace";l.fillText((B.f===e.target?"Base":"")+e.target.name,a+120,b+16);var g=e.target.cache,f=Math.max(g.width,g.height)/104;
l.drawImage(g,a+8+52-g.width/f/2,b+8+52-g.height/f/2,g.width/f,g.height/f);c.forEach(function(a){a.h()})}},sa:function(c,f){e.x=a=c;e.y=b=f},ia:function(a){c.length=0;var b=128;a.forEach(function(a){c.push(tb(e,b,60,a.text,a.B,a.oa,a.ua));b+=60})}};return e};function tb(a,b,c,e,g,f,k){return{update:function(){F.ta(a.x+b,a.y+c,48,48)&&(H.X=e,F.click&&f&&(f(),k&&I(k)))},h:function(){l.fillStyle="rgba(0, 0, 0, 0.5)";l.strokeStyle="#FFF";l.lineWidth=2;l.fillRect(a.x+b,a.y+c,48,48);l.strokeRect(a.x+b,a.y+c,48,48);g&&l.drawImage(g,a.x+b,a.y+c,48,48)}}};var Oa="";yb();window.addEventListener("resize",yb,!1);function yb(){d.width=window.innerWidth;d.height=window.innerHeight;l.clearRect(0,0,d.width,d.height);H.fa()}
function zb(){l.globalAlpha=1;for(var a=D.length;a--;){var b=D[a];b.i&&Ab(b);var c=Math.floor(4*y.zoom);b.H&&b.H[c]&&(c=b.H[c],l.save(),l.translate(b.x,b.y/y.c),l.scale(1,1/y.c),l.drawImage(c,0,0,c.width,c.height),l.scale(-1,1),l.drawImage(c,0,0),l.scale(1,-1),l.drawImage(c,0,0),l.scale(-1,1),l.drawImage(c,0,0),l.restore());l.fillStyle=b.G?"#0F0":"#F00";l.beginPath();l.arc(b.x,b.y/y.c-20,5,0,n);l.fill()}}
function Ab(a){var b=a.i;if(b){var c=b.f.H;c||(c=b.f.H=[]);var e=Math.floor(4*y.zoom);c=c[e];if(!c){c=document.createElement("CANVAS");var g=0;D.forEach(function(a){a.i&&a.i.f===b.f&&(g=Math.max(g,a.i.J+40))});c.width=g;c.height=g;b.f.H[e]=c;c.ba=[]}if(!c.ba[a.id]){e=.2+e/4;var f=c.getContext("2d");f.setLineDash([5/e,5/e]);f.beginPath();f.lineWidth=2/e;f.strokeStyle=a.color;f.globalAlpha=.6;f.arc(0,0,b.J,0,n/4,!1);f.stroke();f.setLineDash(Bb);c.ba[a.id]=!0}}}var Bb=[];
function Cb(){l.globalAlpha=1;for(var a=D.length;a--;){var b=D[a];if(2===b.type){var c=v(b,D[0]);l.save();l.translate(b.x,b.y/y.c);l.rotate(c);l.scale(.2,.2);l.drawImage(P,-P.width/2,-P.height/2)}else{var e=0===b.type;if(!b.cache){var g=e?"#FFF":b.color,f=e?50:10;c=b.size+f;var k=0,h=b.cache=document.createElement("CANVAS");h.width=2*c;h.height=2*c;h=b.cache.getContext("2d");e&&(k=1E3,h.shadowOffsetY=k);h.beginPath();h.fillStyle=g;h.shadowColor=b.color;h.shadowBlur=f;h.arc(c,c-k,b.size,0,n,!1);h.fill();
e&&(h.beginPath(),h.shadowColor="#FFF",h.shadowBlur=5,h.arc(c,c-k,b.size-5,0,n,!1),h.fill());if(!e)for(f=g=b.size,h.beginPath(),h.arc(c,c,b.size,0,2*Math.PI,!1),h.clip();g--;)h.beginPath(),h.globalAlpha=.05,h.fillStyle="#000",h.shadowColor="#000",h.shadowBlur=10,h.save(),h.transform(1,0,0,1,c-f/2+(b.size-f)/2,c),h.arc(0,0,2*f--,-n/4,n/4),h.fill(),h.restore()}c=v(b,D[0]);l.save();l.translate(b.x,b.y/y.c);l.rotate(c);e&&(e=1+.01*Math.sin(performance.now()/30),l.scale(e,e));l.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}l.restore()}}function Db(a,b){a.G=!0;b=b||[];b.push(a);for(var c=D.length;c--;){var e=D[c],g=0<=b.indexOf(e);a!==e&&!g&&(a===B.f||2===a.type)&&x(a,e)<=B.Y&&Db(e,b)}return b}
function Eb(){for(var a=D.length;a--;)D[a].G=!1;a=Db(B.f);l.globalAlpha=Ea(.2/y.zoom,.2,.8);l.lineWidth=Ea(1/y.zoom*2,1,4);l.strokeStyle="#0F0";l.beginPath();for(var b=75*(y.c-1),c=0;c<a.length;c++)for(var e=a[c],g=c;g<a.length;g++){var f=a[g];if(f!=e&&x(f,e)<=B.Y&&(e===B.f||2===e.type)&&(2===f.type||3===f.type||4===f.type)){var k=e.y/y.c,h=f.y/y.c;l.moveTo(e.x,k);l.bezierCurveTo(e.x,k-b,f.x,h-b,f.x,h)}}l.stroke()};var Fb=document.createElement("CANVAS");Fb.width=512;Fb.height=512;var V=Fb.getContext("2d");V.shadowBlur=1;V.globalAlpha=.5;for(var Gb=300;Gb--;){var Hb=512*Math.random(),Ib=512*Math.random(),$b=G(-1,100,90);V.fillStyle=$b;V.shadowColor=$b;V.beginPath();V.arc(Hb,Ib,.5,0,2*Math.PI);V.fill()}var ac=l.createPattern(Fb,"repeat");
function bc(){var a=performance.now()/2E3;l.beginPath();l.rect(0,0,d.width,d.height);l.fillStyle=ac;l.translate(.5*d.width,.5*d.height+500*y.c);l.scale(.5,.5);l.translate(-y.x/25,-y.y/25);l.rotate(a/200);l.fill();l.rotate(-a/200);l.scale(2,2);l.translate(-y.x/50,-y.y/50);l.fill()}var cc=document.createElement("CANVAS"),dc=cc.getContext("2d",{alpha:!1});cc.width=512;cc.height=512;dc.beginPath();var ec=dc.createRadialGradient(256,256,0,256,256,256);ec.addColorStop(0,"#234");ec.addColorStop(.1,"#123");
ec.addColorStop(1,"#000");dc.fillStyle=ec;dc.fillRect(0,0,512,512);var D=[],xb=null,N=null,Qa=20,Y=null,Pa=null;xa.m();
function fc(a,b,c,e,g,f){void 0===f&&(f=0);var k={name:"",type:0,x:0,y:0};k.color=a;k.size=b;k.id=D.length.toString();k.j=100;k.F=null;k.Ba=[];k.G=!1;c&&(c.H=null,k.i={f:c,J:e,T:g,l:f});k.update=function(){0>=k.j&&(D[D.indexOf(k)]=D[D.length-1],--D.length,k.i&&(k.i.f.H=null));if(k.i){var a=k.i;a.l+=a.T;k.x=a.J*Math.cos(a.l)+a.f.x;k.y=a.J*Math.sin(a.l)+a.f.y}k.G&&k.F&&k.F.update()};k.h=function(){var a=k.i;if(a){l.beginPath();l.globalAlpha=.4;l.strokeStyle=k.color;l.lineWidth=4/y.zoom;l.save();var b=
1/y.c;l.transform(1,0,0,b,a.f.x,a.f.y*b);l.arc(0,0,a.J,a.l-a.T*a.J/2,a.l,0>a.T);l.restore();l.stroke()}k.F&&k.F.h()};D.push(k);return k}function gc(a,b,c,e,g,f){a=fc(a,b,c,e+b/2,g,f);a.name="Planet";a.type=1===c.type?5:1;return a}function hc(a,b){if(void 0!==ic(4,a)){var c=fc(G(212,100,97),2,a,b||3*a.size,-.005,null);c.name="Mining Station";c.type=3;c.update=Fa(c.update,function(){c.G&&(B.S+=B.ra)})}}
function Z(a,b){var c=ic(3,a);if(void 0!==c){var e=fc(G(160,100,50),2,a,b||5*a.size,.01,c);e.name="Satellite";e.type=2;e.cache=P;e.update=Fa(e.update,function(){e.G&&(B.o+=B.ma)})}}function jc(a,b){var c=ic(2,a);void 0!==c&&(a=fc(G(33,100,50),2,a,b||7*a.size,.005,c),a.name="Defense Platform",a.type=4,wa(a,"laser",1))}function wa(a,b,c){b=xa.C(b);a.F=b(a,c)}function ic(a,b){var c=0;D.length&&D[0].i&&(c=D[0].i.l);D.forEach(function(e){e.i&&e.i.f==b&&(c+=n/a)});return c};var kc=!1,lc=1;
function mc(){var a=d.width/2,b=d.height/2;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.shadowColor="#FFF";l.shadowBlur=50+2*Math.sin(performance.now()/100);l.font="small-caps 700 256px monospace";l.fillText("X",a,b-64);l.fillText("e o",a,b-90);l.shadowBlur=0;l.font="small-caps 700 32px monospace";Ya?l.fillText("Loading music...",a,b+64):$a?l.fillText("Loading sounds...",a,b+64):l.fillText("Click to continue!",a,b+64);l.font="small-caps 700 16px monospace";l.fillText("Created by",a,
d.height-68);l.fillText("ai Doge & Jack Oatley",a,d.height-48);l.fillText("for #js13k",a,d.height-28)};var M=0,Na=64;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);Da.m();document.addEventListener("keypress",function(a){" "===a.key&&(M=3===M?1:3)});
function nc(){D=[];y.m();p.ka();la.clear();Xa.m();var a=fc(G(60,100,50),50,null,null,null,null);a.name="The Sun";a.type=0;var b=gc(G(180,39,62),10,a,650,.003,Math.random()*n);B.f=b;gc(G(-1,60,70),5,b,100,-.002,Math.random()*n);var c=gc(G(-1,60,70),20,a,1123,.0015,Math.random()*n);gc(G(-1,60,70),5,c,8*c.size,.01,Math.random()*n);gc(G(-1,60,70),10,c,9*c.size,.005,null);gc(G(-1,60,70),30,a,2532,-.001,Math.random()*n);hc(b);hc(c);Z(b);Z(a);Z(a);Z(a);Z(c);Z(c);Z(c);jc(b);jc(b);jc(b);jc(c)}nc();
var oc=performance.now(),pc=1E3/60,qc=0;(function rc(a){requestAnimationFrame(rc);var c=oc+pc;da.update(1/((a-qc)/1E3));qc=a;a>c&&(sc(Math.min(Math.floor((a-oc)/pc),60)),tc(),oc=a)})(oc);
function sc(a){if(0===M)0<lc--||(Ya?pb():$a?rb():(kc||(kc=!0,Ba(nb),I("Welcum to Exo")),F.click&&(M=1,mb.pause&&Ba(nb))));else if(-1===D.indexOf(B.f)&&(M=0,nc()),Oa="",y.update(),H.update(),1===M)D.forEach(function(a){a.update()}),Xa.update(),p.update(),la.update(),ya(),Ha();else if(2===M)if(N)if(F.da){switch(xb){case 2:Z(N,Y);break;case 3:hc(N,Y);break;case 4:jc(N,Y)}N=xb=null;M=1}else Y=x(N,{x:F.u,y:F.v}),Y=Y>Pa?Pa:Y;else Ha();F.update();--a&&sc(a)}
function tc(){y.clear();l.drawImage(cc,Math.floor(.5*d.width-y.x-2048),Math.floor(.5*d.height-y.y-2048),4096,4096);bc();if(0===M)y.reset(),mc();else{y.position();D.forEach(function(a){a.h()});l.globalAlpha=1;zb();Cb();p.h();Eb();la.h();za();var a=Ga();l.scale(1,1/y.c);x(a,{x:F.u,y:F.v})<Na&&(l.beginPath(),l.moveTo(a.x,a.y),l.lineTo(F.u,F.v),l.strokeStyle="#FFF",l.stroke(),l.beginPath(),l.arc(a.x,a.y,30,0,n),l.lineWidth=3,l.stroke());2===M&&N&&(l.strokeStyle="#0F0",l.beginPath(),l.arc(N.x,N.y,Y,0,
n),l.lineWidth=3,l.stroke());l.setTransform(1,0,0,1,d.width/2,d.height/2);y.reset();H.h();l.font="14px monospace";l.textBaseline="top";l.textAlign="left";l.fillStyle="#fff";l.fillText("#js13k tower defense prototype",20,220);l.fillText("https://github.com/scorp200/td13k",20,240);l.fillText("framerate: "+da.na,20,260);l.fillText("mouse (gui): "+F.x+", "+F.y,20,280);l.fillText("mouse (view): "+F.u+", "+F.v,20,300);l.fillText("planet name: "+Oa,20,320);l.fillText("view x: "+y.x,20,360);l.fillText("view y: "+
y.y,20,380);l.fillText("view zoom: "+y.zoom,20,400);l.fillText("view tilt: "+y.c,20,420);l.fillText("enemies: "+p.w.length,20,460)}};})();</script></body></html>

