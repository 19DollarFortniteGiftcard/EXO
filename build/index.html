<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),l=d.getContext("2d",{alpha:!1});function ba(){}var da=!1,ea=!1,m=Math.PI,fa=2*m;var ha=function(){var a=0,b=[];return{update:function(c){b.push(c);if(60<b.length){var e=0,f=1E3,k=0;b.shift();b.forEach(function(a){e+=a;f=Math.min(f,a);k=Math.max(k,a)});a=~~(e/60)+", "+~~f+" - "+~~k}},get aa(){return a}}}();function ia(a,b){var c=null,e=null,f=null;return{type:"beam",level:b,update:function(){for(var b=null,h=0,g=n.length;g--;){var A=n[g],z=q(a,A);z>h&&1E3>z&&(b=A,h=z)}if(c=b)for(f=r(a,c),null==e&&(e=f),e+=.01*Math.sign(ja(f-e+m)-m),b=n.length;b--;)h=n[b],g=ja(e-r(a,h)+m)-m,1E3>q(h,a)&&.1>Math.abs(g)&&(h.j-=10.5)},g:function(){if(c){l.beginPath();l.lineWidth=6+3*Math.sin(performance.now()/5);var b=l.createRadialGradient(a.x,a.y/v,100,a.x,a.y/v,1E3);b.addColorStop(0,"#FF0");b.addColorStop(1,"rgba(0, 0, 0, 0)");
l.strokeStyle=b;l.moveTo(a.x,a.y/v);l.lineTo(a.x-1E3*Math.cos(e),(a.y-1E3*Math.sin(e))/v);l.stroke()}}}};function ka(a,b){var c=0;return{type:"laser",level:b,update:function(){if(0>=c--){c=2-Math.min(b/10,2);var e=oa(a,1E3);if(e&&.1<=x.h){x.h-=.1;var f=.5<Math.random();pa.create(a.x,a.y,r(a,e),f?2E3:q(a,e),"#FF0");f||(e.j-=2)}}},g:ba}};function qa(a,b){var c=20;return{type:"rocket",level:b,update:function(){if(0>=c--){c=20;var b=oa(a,1500);if(b&&.5<=x.h){x.h-=.5;var f=a.x,k=a.y,h=r(a,b);b=q(a,b);y["#00B"]||(y["#00B"]=[]);y["#00B"].push({x:f,y:k,angle:h,l:b-50,W:void 0})}}},g:ba}};var pa=function(){var a={};return{create:function(b,c,e,f,k){!a[k]&&(a[k]=[]);a[k].push({x:b,y:c,angle:e,l:f-50})},update:function(){for(var b in a)for(var c=a[b],e=c.length;e--;){var f=c[e];f.l-=50;0>=f.l?(f=c,f[e]=f[f.length-1],--f.length):(f.x-=50*Math.cos(f.angle),f.y-=50*Math.sin(f.angle))}},g:function(){l.globalAlpha=1;l.lineWidth=1;for(var b in a){l.strokeStyle=b;l.beginPath();for(var c=a[b].length;c--;){var e=a[b][c],f=e.x+10*Math.cos(e.angle),k=e.y/v+10*Math.sin(e.angle);l.moveTo(e.x,e.y/
v);l.lineTo(f,k)}l.stroke()}}}}();var E=function(){function a(a,e,g,f){return b>a&&b<a+g&&c>e&&c<e+f}var b=0,c=0,e=0,f=0,k=!1,h=!1,g=!1,A=!1,z=!1,t=!1;window.addEventListener("mousemove",function(a){var g=d.getBoundingClientRect();b=a.clientX-g.left;c=a.clientY-g.top;e=(b+B-d.width/2)/C;f=(c+D-d.height/2)*v/C;A&&(h=!0)},!1);window.addEventListener("mousedown",function(){A=k=!0},!1);window.addEventListener("mouseup",function(){A=!1;h||(g=!0);h=!1},!1);window.addEventListener("wheel",function(a){z=0<a.deltaY;t=0>a.deltaY},!1);return{update:function(){z=
t=g=k=!1},ea:a,ja:function(b,c,e,g){return k&&a(b,c,e,g)},get x(){return b},get y(){return c},get o(){return e},get s(){return f},get click(){return k},get S(){return h},get release(){return g},get ka(){return A},get fa(){return z},get X(){return t}}}();var ta=function(){function a(a){var c=[],f;for(f in b)b[f].J===a&&c.push(f);return c}var b={};return{D:function(){Object.assign(b,{laser:{J:ra,name:"Lasers",A:null,C:null,I:ka},beam:{J:ra,name:"Beam",A:null,C:null,I:ia},rocket:{J:ra,name:"Rockets",A:null,C:null,I:qa}})},ia:a,get:function(c){if(!c.m)return[];var e=[];a(c.type).forEach(function(a){var f=c.m,h=b[a],g=f.type===a?f.level+1:1;e.push({A:h.A,text:h.name+" (Level "+g+")",C:sa.bind(null,c,a,g),ga:"Upgrading level "+f.level+" "+f.type+", to level "+
g+" "+a})});return e},implementation:function(a){return b[a].I}}}();var y={};function ua(){for(var a in y)for(var b=y[a].length;b--;){var c=y[a][b];c.l-=50;0>=c.l?(c.W&&c.W(),y[a].splice(b,1)):(c.x-=50*Math.cos(c.angle),c.y-=50*Math.sin(c.angle))}}function va(){l.lineWidth=1;for(var a in y){l.strokeStyle=a;l.beginPath();for(var b=y[a].length;b--;){var c=y[a][b],e=c.x+10*Math.cos(c.angle),f=c.y/v+10*Math.sin(c.angle);l.moveTo(c.x,c.y/v);l.lineTo(e,f)}l.stroke()}};(function(){function a(a,c){var e=document.createElement("LI"),f=document.createElement("LABEL"),g=document.createElement("INPUT");f.textContent=a;g.type="checkbox";g.onclick=function(){wa.set(a,g.checked);c.call(g)};e.appendChild(g);e.appendChild(f);b.appendChild(e);"true"===wa.get(a,"true")&&(g.checked=!0,c.call(g,!0))}var b=document.createElement("UL"),c=b.style;c.position="absolute";c.right="0px";c.bottom="0px";c.color="#FFF";c.margin="16px";c.listStyle="none";document.body.appendChild(b);a("music",
function(a){da=this.checked;a||Ca(Da)});a("voice",function(){ea=this.checked});return{na:b}})();var wa={set:function(a,b){window.localStorage.setItem(a,b)},get:function(a,b){return window.localStorage.getItem(a)||b}};var B=0,D=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,Ja=0,C=1,Ka=1,v=2;function La(){if(E.X||E.fa)Ka=Ma(Ka+(E.X?.1:-.1),.1,2);v=Math.min(1+(C-.1),2);E.click&&(Na=!0,Ga=B,Ha=D,Ia=E.x,Ja=E.y);E.S&&Na?(Ea=Ga+(Ia-E.x),Fa=Ha+(Ja-E.y)):E.release&&(Na=!1);var a=C;C+=.001>Math.abs(C-Ka)?0:(Ka-C)/5;a=C-a;.001<Math.abs(a)&&(B+=E.o*a,D+=E.s*a,Ea+=E.o*a,Fa+=E.s*a);B+=.001>Math.abs(B-Ea)?0:(Ea-B)/5;D+=.001>Math.abs(D-Fa)?0:(Fa-D)/5}function Oa(){l.setTransform(1,0,0,1,0,0)}var Na;var F=Math.random,G=2*Math.PI;function Pa(a,b){return function(){a();b()}}function Qa(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a}function q(a,b){return Math.sqrt(Qa(a,b))}function r(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ja(a){return a-Math.floor(a/fa)*fa}function Ra(a,b,c){var e=0;c.forEach(function(c){c.i.f==b&&(e+=fa/a)});if(!(e>=fa))return e}function H(a,b,c){return"hsl("+(0>a?360*F():a)+","+(0>b?100*F():b)+"%,"+(0>c?100*F():c)+"%)"}function Ma(a,b,c){return a>c?c:a<b?b:a}
function Xa(){for(var a={x:E.o,y:E.s},b=999999,c=I[0],e=I.length;e--;){var f=q(I[e],a);f<b&&(b=f,c=e)}return I[c]}function Ya(){if(E.release){J.selection.target=null;var a=Xa();q(a,{x:E.o,y:E.s})<Za&&($a=a.name,E.target||E.S||(K("selected "+a.name),J.selection.target=a,J.selection.da(E.x,E.y),J.selection.Z(ta.get(a)),ab.play()))}};var bb=speechSynthesis,cb=!1,db,eb=3;bb&&(cb=!0,db=bb.getVoices(),0>=db.length&&(bb.onvoiceschanged=function(){db=bb.getVoices()}));function K(a){cb&&ea&&(bb.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=db[eb%db.length],bb.speak(a))};function fb(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,e,f,k,h;this.D=function(a){c=a;e=a.H;f=0;k=a.G*a.F*(e+1)*2;h=new Int32Array(k)};this.T=function(){var g,A,z,t,Z,Q=new Int32Array(k),u=c.M[f],aa=c.G,xa=c.F,Sa=0,ya=0,L;var M=!1;var za=[];for(A=0;A<=e;++A){var la=u.p[A];for(z=0;z<xa;++z){if(Z=la?u.c[la-1].a[z]:0)u.b[Z-1]=u.c[la-1].a[z+xa]||0,16>Z&&(za=[]);var ac=b[u.b[15]],bc=u.b[16]/
512,cc=Math.pow(2,u.b[17]-9)/aa,dc=u.b[18],sb=u.b[19],ec=135.82764118168*u.b[20]/44100,fc=1-u.b[21]/255,Ta=1E-5*u.b[22],gc=u.b[23]/32,hc=u.b[24]/512,ic=6.283184*Math.pow(2,u.b[25]-9)/aa,tb=u.b[26]/255,Ua=u.b[27]*aa&-2;Z=(A*xa+z)*aa;for(t=0;4>t;++t)if(g=la?u.c[la-1].n[z+t*xa]:0){if(!za[g]){var p=za;var S=g;var ub=L=void 0,Aa,N,w=u,vb=g,jc=b[w.b[0]],kc=w.b[1],lc=w.b[3],mc=b[w.b[4]],nc=w.b[5],oc=w.b[8],wb=w.b[9],ca=w.b[10]*w.b[10]*4,Ba=w.b[11]*w.b[11]*4,Va=w.b[12]*w.b[12]*4,pc=1/Va,ma=w.b[13],qc=aa*
Math.pow(2,2-w.b[14]),xb=new Int32Array(ca+Ba+Va),yb=0,zb=0;for(Aa=N=0;N<ca+Ba+Va;N++,Aa++){0<=Aa&&(ma=ma>>8|(ma&255)<<4,Aa-=qc,ub=.003959503758*Math.pow(2,(vb+(ma&15)+w.b[2]-128-128)/12),L=.003959503758*Math.pow(2,(vb+(ma&15)+w.b[6]-128-128)/12)*(1+8E-4*w.b[7]));var T=1;N<ca?T=N/ca:N>=ca+Ba&&(T-=(N-ca-Ba)*pc);var na=ub;lc&&(na*=T*T);yb+=na;var Wa=jc(yb)*kc;na=L;oc&&(na*=T*T);zb+=na;Wa+=mc(zb)*nc;wb&&(Wa+=(2*Math.random()-1)*wb);xb[N]=80*Wa*T|0}p[S]=xb}S=za[g];g=0;for(p=2*Z;g<S.length;g++,p+=2)Q[p]+=
S[g]}for(g=0;g<aa;g++)t=2*(Z+g),(p=Q[t])||M?(M=ec,dc&&(M*=ac(cc*t)*bc+.5),M=1.5*Math.sin(M),Sa+=M*ya,p=fc*(p-ya)-Sa,ya+=M*p,p=3==sb?ya:1==sb?p:Sa,Ta&&(p*=Ta,p=1>p?-1<p?a(.25*p):-1:1,p/=Ta),p*=gc,M=1E-5<p*p,S=Math.sin(ic*t)*hc+.5,L=p*(1-S),p*=S):L=0,t>=Ua&&(L+=Q[t-Ua+1]*tb,p+=Q[t-Ua]*tb),Q[t]=L|0,Q[t+1]=p|0,h[t]+=L|0,h[t+1]+=p|0}}f++;return f/c.L};this.R=function(){var a=44+2*k-8,b=a-36,c=new Uint8Array(44+2*k);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,
0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<k;++a){var e=h[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var ab={M:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],c:[{n:[163],a:[]}]}],G:5513,F:1,H:0,L:1};var O=document.createElement("CANVAS"),P=O.getContext("2d");O.width=20;O.height=140;P.fillStyle="#dddddd";P.fillRect(8,50,4,40);P.fillStyle="#639bff";P.fillRect(2,0,15,60);P.fillRect(2,80,15,60);P.fillStyle="#9badb7";P.fillRect(2,65,17,10);P.fillRect(0,66,2,8);var gb=document.createElement("CANVAS"),hb=gb.getContext("2d");gb.width=32;gb.height=32;hb.fillStyle="#ff0000";hb.moveTo(0,16);hb.lineTo(32,0);hb.lineTo(24,16);hb.lineTo(32,32);hb.fill();var ib=0,jb=0,kb=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function lb(){for(var a=100;a--;){var b=Math.random()*G;(new mb(3E3*Math.cos(b),3E3*Math.sin(b))).direction=b}};var nb=!0,ob=0,pb=[],qb=!0,rb=[],Ab=ab,Bb=new fb;Bb.u=new Audio;Bb.w=!0;Bb.D(Ab);rb.push(Bb);ab=Bb.u;
var Db=Cb({M:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],c:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],c:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],c:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],c:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],c:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],c:[{n:[147],a:[]}]}],G:5513,F:32,H:26,L:8}),Eb=Cb({M:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],c:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],c:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],c:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],c:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],c:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],c:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],G:6300,F:32,H:30,L:8});function Cb(a){var b=new fb;b.u=new Audio;b.w=!0;b.D(a);pb.push(b);return b.u}var Fb=0;
function Gb(){for(var a=0;a<pb.length;a++){var b=pb[a];if(b.w){b.w=1<=b.T();Fb+=1;var c=b.R();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.u.src=c}}Fb>=pb.length&&(nb=!1)}var Hb=0;function Ib(){for(var a=0;a<rb.length;a++){var b=rb[a];if(b.w){b.w=1<=b.T();Hb+=1;var c=b.R();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.u.src=c}}Hb>=rb.length&&(qb=!1)}var Da=Db;
function Ca(a){null!==a&&(da?(Da=a,a.ba||(a.ba=!0,a.addEventListener("ended",function(){this.currentTime=0;var a=pb[ob].u;ob=pb.indexOf(a);Ca(a)},!1)),Da.play(),a.volume=.5):Da&&Da.pause())};var J={x:0,y:0,elements:[],N:"",selection:null,Y:function(){var a=d.width/2,b=d.height;J.selection=Jb();J.elements=[J.selection,Kb(J,a-24-60,b-64,"Build Satellite",null,Lb),Kb(J,a-24,b-64,"Build Mining Station",null,Mb),Kb(J,a+36,b-64,"Build Defense Platform",null,Nb)]},update:function(){J.N="";J.elements.forEach(function(a){a.update()})},g:function(){J.elements.forEach(function(a){a.g()});l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.font="small-caps 700 32px monospace";l.fillText("next wave in",
d.width/2,32);l.font="700 64px monospace";l.fillText(~~(jb/60),d.width/2,96);l.font="small-caps 700 32px monospace";l.fillText("minerals",d.width/2+300,48);l.fillText(~~x.K,d.width/2+300,80);l.font="small-caps 700 32px monospace";l.fillText("energy",d.width/2+600,48);l.fillText(~~x.h,d.width/2+600,80);l.font="small-caps 700 32px monospace";l.fillText("survived",d.width/2-300,48);l.fillText(ib+" waves",d.width/2-300,80);l.font="small-caps 700 32px monospace";l.fillText("base status",d.width/2-600,
48);l.fillText(~~x.j+"%",d.width/2-600,80);l.font="small-caps 700 24px monospace";l.fillText(J.N,d.width/2,d.height-96)}};function Lb(){K("Select an area to build the satellite")}function Mb(){K("Select an area to build the mining station")}function Nb(){K("Select an area to build the defense platform")}J.Y();
function Jb(){var a=d.width/2-180,b=d.height-128-120,c=[],e={x:a,y:b,target:null,update:function(){null!==e.target&&c.forEach(function(a){a.update()})},g:function(){null!==e.target&&(l.fillStyle="rgba(0, 0, 0, 0.5)",l.strokeStyle="rgba(255, 255, 255, 0.5)",l.fillRect(a,b,360,120),l.strokeRect(a,b,360,120),l.fillStyle="#fff",l.textAlign="left",l.textBaseline="top",l.font="16px monospace",l.fillText((x.f===e.target?"Base":"")+e.target.name,a+120,b+16),l.drawImage(e.target.cache,a+8,b+8,104,104),c.forEach(function(a){a.g()}))},
da:function(c,k){e.x=a=c;e.y=b=k},Z:function(a){c.length=0;var b=128;a.forEach(function(a){c.push(Kb(e,b,60,a.text,a.A,a.C,a.ga));b+=60})}};return e};function Kb(a,b,c,e,f,k,h){return{update:function(){E.ea(a.x+b,a.y+c,48,48)&&(J.N=e,E.click&&k&&(k(),h&&K(h)))},g:function(){l.fillStyle="rgba(0, 0, 0, 0.5)";l.strokeStyle="rgba(255, 255, 255, 0.5)";l.fillRect(a.x+b,a.y+c,48,48);l.strokeRect(a.x+b,a.y+c,48,48);f&&l.drawImage(f,a.x+b,a.y+c,48,48)}}};var $a="";Ob();window.addEventListener("resize",Ob,!1);function Ob(){d.width=window.innerWidth;d.height=window.innerHeight;l.clearRect(0,0,d.width,d.height);J.Y()}function Pb(){l.globalAlpha=1;for(var a=I.length;a--;){var b=I[a];b.i&&Qb(b);var c=Math.floor(4*C);b.B&&b.B[c]&&(c=b.B[c],l.save(),l.translate(b.x,b.y/v),l.scale(1,1/v),l.drawImage(c,0,0,c.width,c.height),l.scale(-1,1),l.drawImage(c,0,0),l.scale(1,-1),l.drawImage(c,0,0),l.scale(-1,1),l.drawImage(c,0,0),l.restore())}}
function Qb(a){var b=a.i;if(b){var c=b.f.B;c||(c=b.f.B=[]);var e=Math.floor(4*C);c=c[e];if(!c){c=document.createElement("CANVAS");var f=0;I.forEach(function(a){a.i&&a.i.f===b.f&&(f=Math.max(f,a.i.v+40))});c.width=f;c.height=f;b.f.B[e]=c;c.U=[]}if(!c.U[a.id]){e=.1+e/4;var k=c.getContext("2d");k.setLineDash([5/e,5/e]);k.beginPath();k.lineWidth=2/e;k.strokeStyle=a.color;k.globalAlpha=.6;k.arc(0,0,b.v,0,G/4,!1);k.stroke();k.setLineDash(Rb);c.U[a.id]=!0}}}var Rb=[];
function Sb(){l.globalAlpha=1;for(var a=I.length;a--;){var b=I[a];if(b.type===Tb){var c=r(b,I[0]);l.save();l.translate(b.x,b.y/v);l.rotate(c);l.scale(.2,.2);l.drawImage(O,-O.width/2,-O.height/2)}else{if(!b.cache){var e=b.type===Ub,f=e?"#FFF":b.color,k=e?50:10;c=b.size+k;var h=0,g=b.cache=document.createElement("CANVAS");g.width=2*c;g.height=2*c;g=b.cache.getContext("2d");e&&(h=1E3,g.shadowOffsetY=h);g.beginPath();g.fillStyle=f;g.shadowColor=b.color;g.shadowBlur=k;g.arc(c,c-h,b.size,0,G,!1);g.fill();
e&&(g.beginPath(),g.shadowColor="#FFF",g.shadowBlur=5,g.arc(c,c-h,b.size-5,0,G,!1),g.fill());if(!e)for(f=e=b.size,g.beginPath(),g.arc(c,c,b.size,0,2*Math.PI,!1),g.clip();e--;)g.beginPath(),g.globalAlpha=.05,g.fillStyle="#000",g.shadowColor="#000",g.shadowBlur=10,g.save(),g.transform(1,0,0,1,c-f/2+(b.size-f)/2,c),g.arc(0,0,2*f--,-G/4,G/4),g.fill(),g.restore()}c=r(b,I[0]);l.save();l.translate(b.x,b.y/v);l.rotate(c);b.V&&(c=1+.01*Math.sin(performance.now()/30),l.scale(c,c));l.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}l.restore()}}function Vb(a,b){b=b||[];b.push(a);for(var c=I.length;c--;){var e=I[c],f=0<=b.indexOf(e);a!==e&&!f&&(a===x.f||a.type===Tb)&&q(a,e)<=x.P&&Vb(e,b)}return b}
function Wb(){var a=Vb(x.f);l.globalAlpha=Ma(.2/C,.2,.8);l.lineWidth=Ma(1/C*2,1,4);l.strokeStyle="#0F0";l.beginPath();for(var b=75*(v-1),c=0;c<a.length;c++)for(var e=a[c],f=c;f<a.length;f++){var k=a[f];if(k!=e&&q(k,e)<=x.P&&(e===x.f||e.type===Tb)&&(k.type===Tb||k.type===Xb||k.type===ra)){var h=e.y/v,g=k.y/v;l.moveTo(e.x,h);l.bezierCurveTo(e.x,h-b,k.x,g-b,k.x,g)}}l.stroke()};var Yb=document.createElement("CANVAS");Yb.width=512;Yb.height=512;var R=Yb.getContext("2d");R.shadowBlur=1;R.globalAlpha=.5;for(var Zb=300;Zb--;){var $b=512*Math.random(),rc=512*Math.random(),sc=H(-1,100,90);R.fillStyle=sc;R.shadowColor=sc;R.beginPath();R.arc($b,rc,.5,0,2*Math.PI);R.fill()}var tc=l.createPattern(Yb,"repeat");
function uc(){var a=performance.now()/2E3;l.beginPath();l.rect(0,0,d.width,d.height);l.fillStyle=tc;l.translate(.5*d.width,.5*d.height+500*v);l.scale(.5,.5);l.translate(-B/25,-D/25);l.rotate(a/200);l.fill();l.rotate(-a/200);l.scale(2,2);l.translate(-B/50,-D/50);l.fill()}var vc=document.createElement("CANVAS"),wc=vc.getContext("2d",{alpha:!1});vc.width=512;vc.height=512;wc.beginPath();var xc=wc.createRadialGradient(256,256,0,256,256,256);xc.addColorStop(0,"#141e28");xc.addColorStop(1,"#000000");
wc.fillStyle=xc;wc.fillRect(0,0,512,512);var I=[],yc=[],zc=[],Ub=0,Tb=2,Xb=3,ra=4;ta.D();
function Ac(a,b,c,e,f,k){void 0===k&&(k=0);var h={name:"Some Shithole Planet"};h.type=Ub;h.x=0;h.y=0;h.color=a;h.size=b;h.V=!1;h.id=I.length.toString();h.j=100;h.m=null;h.oa=[];c&&(h.i={f:c,v:e,speed:f,angle:k});h.update=function(){if(h.i){var a=h.i;a.angle+=a.speed;h.x=a.v*Math.cos(a.angle)+a.f.x;h.y=a.v*Math.sin(a.angle)+a.f.y}h.m&&h.m.update()};h.g=function(){var a=h.i;if(a){l.beginPath();l.globalAlpha=.4;l.strokeStyle=h.color;l.lineWidth=4/C;l.save();var b=1/v;l.transform(1,0,0,b,a.f.x,a.f.y*
b);l.arc(0,0,a.v,a.angle-a.speed*a.v/2,a.angle,0>a.speed);l.restore();l.stroke()}h.m&&h.m.g()};I.push(h);return h}function Bc(a,b,c,e,f,k){void 0===k&&(k=0);a=Ac(a,b,c,e+b/2,f,k);a.name="Planet";a.type=1;a.update=Pa(a.update,function(){});return a}function Cc(a){void 0!==Ra(Dc,a,yc)&&(a=Ac(H(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=Xb,a.update=Pa(a.update,function(){x.K+=x.ca}))}var Dc=4;
function U(a){var b=Ra(Ec,a,yc);void 0!==b&&(a=Ac(H(160,100,50),2,a,5*a.size,.01,b),a.name="Satellite",a.type=Tb,a.cache=O,a.update=Pa(a.update,function(){x.h+=x.$}),yc.push(a))}var Ec=3;function Fc(a){var b=Ra(Gc,a,zc);void 0!==b&&(a=Ac(H(33,100,50),2,a,7*a.size,.005,b),a.name="Defense Platform",a.type=ra,zc.push(a),sa(a,"laser",1))}function sa(a,b,c){b=ta.implementation(b);a.m=b(a,c)}var Gc=2;function mb(a,b){this.x=a;this.y=b;this.z=Math.floor(20*Math.random());this.direction=0;this.j=10;this.target=x.f;this.O=10*Math.random();n.push(this)}
mb.prototype={update:function(){for(var a={x:this.x,y:this.y},b=999999,c=I[0],e=I.length;e--;)if(1<I[e].type){var f=q(I[e],a);f<b&&(b=f,c=e)}this.target=I[c];this.direction+=.01*(ja(r(this,this.target)-this.direction+m)-m);this.x-=5*Math.cos(this.direction);this.y-=5*Math.sin(this.direction);0>=this.O--&&(this.O=10,a=q(this,this.target),500>a&&pa.create(this.x,this.y,r(this,this.target),.5<Math.random()?2E3:a,"#F00"));0>=this.j&&n.splice(n.indexOf(this),1)}};var n=[];
function oa(a,b){for(var c=null,e=n.length;e--;){var f=n[e],k=q(a,f);k<b&&(c=f,b=k)}return c}function Hc(){for(var a=n.length;a--;)for(var b=n[a],c=a;c--;){var e=n[c];if(200>Qa(b,e)){c=.25*(b.x-e.x);var f=.25*(b.y-e.y);b.x+=c;b.y+=f;e.x-=c;e.y-=f;break}}for(a=n.length;a--;)n[a].update()}function Ic(){for(var a=-gb.width/2,b=-gb.height/2,c=n.length;c--;){var e=n[c];l.save();l.translate(e.x,e.y/v-e.z*v);l.scale(.3,.3/v);l.rotate(e.direction);l.drawImage(gb,a,b);l.restore()}};var Jc=!1,Kc=1;
function Lc(){var a=d.width/2,b=d.height/2;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.shadowColor="#FFF";l.shadowBlur=50+2*Math.sin(performance.now()/100);l.font="small-caps 700 256px monospace";l.fillText("X",a,b-64);l.fillText("e o",a,b-90);l.shadowBlur=0;l.font="small-caps 700 32px monospace";nb?l.fillText("Loading music...",a,b+64):qb?l.fillText("Loading sounds...",a,b+64):l.fillText("Click to continue!",a,b+64);l.font="small-caps 700 16px monospace";l.fillText("Created by",a,
d.height-68);l.fillText("ai Doge & Jack Oatley",a,d.height-48);l.fillText("for #js13k",a,d.height-28)};var x=null,V=0,Za=64;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);document.addEventListener("keypress",function(a){" "===a.key&&(3===V?V=1:V=3)});var Mc=H(60,100,50),W=Ac(Mc,50,null,null,null,null);W.name="The Sun";W.type=Ub;W.V=!0;var X=Bc(H(180,39,62),10,W,650,.003,F()*G);x={f:X,j:100,ca:.01,$:.02,ha:300,la:0,ma:0,P:500,K:0,h:0};Bc(H(-1,60,70),5,X,100,-.002,F()*G);var Y=Bc(H(-1,60,70),20,W,1123,.0015,F()*G);Bc(H(-1,60,70),5,Y,8*Y.size,.01,F()*G);
Bc(H(-1,60,70),10,Y,9*Y.size,.005,null);Bc(H(-1,60,70),30,W,2532,-.001,F()*G);Cc(X);Cc(Y);U(X);U(W);U(W);U(W);U(Y);U(Y);U(Y);Fc(X);Fc(X);Fc(X);Fc(Y);var Nc=performance.now(),Oc=1E3/60,Pc=0;(function Qc(a){requestAnimationFrame(Qc);var c=Nc+Oc;ha.update(1/((a-Pc)/1E3));Pc=a;a>c&&(Rc(Math.min(Math.floor((a-Nc)/Oc),60)),Sc(),Nc=a)})(Nc);
function Rc(a){0===V?0<Kc--||(nb?Gb():qb?Ib():(Jc||(Jc=!0,Ca(Eb),K("Welcum to Exo")),E.click&&(V=1,Db.pause&&Ca(Eb)))):($a="",La(),J.update(),1===V&&(I.forEach(function(a){a.update()}),jb--||(lb(),jb=600,ib++,K(kb[~~(Math.random()*kb.length)])),Hc(),pa.update(),ua(),Ya()));E.update();--a&&Rc(a)}
function Sc(){Oa();l.clearRect(0,0,d.width,d.height);l.drawImage(vc,Math.floor(.5*d.width-B-2048),Math.floor(.5*d.height-D-2048),4096,4096);uc();if(0===V)Oa(),Lc();else{l.setTransform(C,0,0,C,-B+d.width/2,-D+d.height/2);I.forEach(function(a){a.g()});l.globalAlpha=1;Pb();Sb();Ic();Wb();pa.g();va();var a=Xa();q(a,{x:E.o,y:E.s})<Za&&(l.beginPath(),l.moveTo(a.x,a.y/v),l.lineTo(E.o,E.s/v),l.strokeStyle="#ffffff",l.stroke());l.setTransform(1,0,0,1,d.width/2,d.height/2);Oa();J.g();l.font="14px monospace";
l.textBaseline="top";l.textAlign="left";l.fillStyle="#fff";l.fillText("#js13k tower defense prototype",20,220);l.fillText("https://github.com/scorp200/td13k",20,240);l.fillText("framerate: "+ha.aa,20,260);l.fillText("mouse (gui): "+E.x+", "+E.y,20,280);l.fillText("mouse (view): "+E.o+", "+E.s,20,300);l.fillText("planet name: "+$a,20,320);l.fillText("view x: "+B,20,360);l.fillText("view y: "+D,20,380);l.fillText("view zoom: "+C,20,400);l.fillText("view tilt: "+v,20,420)}};})();</script></body></html>

