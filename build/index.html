<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body{margin:0px;overflow:hidden;user-select:none;}</style></head><body><canvas id="c"></canvas><script>(function() {var d=document.getElementById("c"),l=d.getContext("2d",{alpha:!1}),aa=!1,ba=!1,m=Math.PI,n=2*m;var ca=function(){var a=0,b=[];return{update:function(c){b.push(c);if(60<b.length){var e=0,g=1E3,f=0;b.shift();b.forEach(function(a){e+=a;g=Math.min(g,a);f=Math.max(f,a)});a=~~(e/60)+", "+~~g+" - "+~~f}},get ta(){return a}}}();function fa(a,b){var c=null,e=null,g=null;return{type:"beam",level:b,update:function(){if(c=q.va(a,1E3)){g=t(a,c);null==e&&(e=g);e+=.01*Math.sign(ha(g-e+m)-m);for(var b=q.N.length;b--;){var k=q.N[b],h=ha(e-t(a,k)+m)-m;1E3>u(k,a)&&.1>Math.abs(h)&&(k.j-=10.5)}}},f:function(){if(c){l.beginPath();l.lineWidth=6+3*Math.sin(performance.now()/5);var b=l.createRadialGradient(a.x,a.y/w.c,100,a.x,a.y/w.c,1E3);b.addColorStop(0,"#FF0");b.addColorStop(1,"rgba(0, 0, 0, 0)");l.strokeStyle=b;l.moveTo(a.x,a.y/w.c);
l.lineTo(a.x-1E3*Math.cos(e),(a.y-1E3*Math.sin(e))/w.c);l.stroke()}}}};function ia(a,b){var c=0;return{type:"laser",level:b,update:function(){if(0>=c--){c=2-Math.min(b/10,2);var e=q.Y(a,1E3);if(e&&.1<=x.u){x.u-=.1;var g=.5<Math.random(),f=g?2E3:u(a,e),k=t(a,e);a.ca=k;ja.create(a.x,a.y,k,f,"#0F0");g||(e.j-=2)}}}}};function ka(a,b){var c=20;return{type:"rocket",level:b,update:function(){if(0>=c--){c=20;var b=q.Y(a,1500);if(b&&.5<=x.u){x.u-=.5;var g=a.x,f=a.y,k=t(a,b);b=u(a,b);z["#00B"]||(z["#00B"]=[]);z["#00B"].push({x:g,y:f,T:k,v:b-50,ha:void 0})}}}}};function la(a,b){var c=60;return{type:"slow",level:b,update:function(){if(0>=c--){c=60;for(var b=q.N.length;b--;){var g=q.N[b];300>u(g,a)&&q.ma(g,0,.05,100)}}},f:function(){0>=c&&(l.beginPath(),l.fillStyle="#c6e2ff",l.arc(a.x,a.y/w.c,300,0,n),l.fill())}}};function ma(a,b){var c=[];return{type:"zap",level:b,update:function(){var b=q.N.length;c.length=0;var g=q.Y(a,300);if(g)for(;b--;){var f=q.N[b];300>=u(g,f)&&(g=f,c.push(f),f.j-=.1);if(10<c.length)break}},f:function(){if(c[0]){l.beginPath();l.strokeStyle="#c6e2ff";l.lineWidth=4;var b=c.length,g=c[b-1];for(l.moveTo(g.x,g.y/w.c);b--;)g=c[b],l.lineTo(g.x,g.y/w.c);l.lineTo(a.x,a.y/w.c);l.stroke()}}}};var q=function(){function a(a,c){a=Math.floor((a+3E3)/100);c=Math.floor((c+3E3)/100);return b[60*c+a]}for(var b=[],c=[],e=3600;e--;)b.push([]);return{N:c,create:function(a,b,e){c.push({x:a,y:b,z:20*Math.random(),O:e,j:10,target:null,la:10*Math.random(),D:[],A:null})},update:function(){for(var b=c.length;0<b--;){var f=c[b],e=a(f.x,f.y);f.A!==e&&(null!==f.A&&(f.A[f.A.indexOf(f)]=f.A[f.A.length-1],f.A.length--),f.A=e,e.push(f));e=[5,500];for(var h=f.D.length;h--;){var p=f.D[h];e[p.type]*=p.value;0>=
p.time--&&(f.D[h]=f.D[f.D.length-1],f.D.length--)}h={x:f.x,y:f.y};p=999999;for(var v=A[0],r=A.length;r--;){var E=A[r];(1<E.type||x.h===E)&&E.J&&(E=u(A[r],h),E<p&&(p=E,v=r))}f.target=A[v];f.target&&(f.O+=.01*(ha(t(f,f.target)-f.O+m)-m),f.x-=e[0]*Math.cos(f.O),f.y-=e[0]*Math.sin(f.O),0>=f.la--&&(f.la=10,h=u(f,f.target),h<e[1]&&(e=.5<Math.random(),ja.create(f.x,f.y,t(f,f.target),e?2E3:h,"#F00"),e||(f.target.j-=.2))));0>=f.j&&(f=b,oa.create(c[f].x,c[f].y),c[f]=c[c.length-1],c.length--)}for(b=c.length;b--;)for(f=
c[b],h=a(f.x,f.y),p=h.length;p--;)if(e=h[p],f!==e&&200>pa(f,e)){h=.25*(f.x-e.x);p=.25*(f.y-e.y);f.x+=h;f.y+=p;e.x-=h;e.y-=p;break}},f:function(){for(var b=-qa.width/2,a=-qa.height/2,e=c.length;e--;){var h=c[e];l.save();l.translate(h.x,h.y/w.c-h.z*w.c);l.scale(2,2/w.c);l.rotate(h.O);l.drawImage(qa,b,a);l.restore()}},Y:function(b,a){for(var e=null,f=c.length;f--;){var g=c[f],v=u(b,g);v<a&&(e=g,a=v)}return e},va:function(b,a){for(var e=null,f=0,g=c.length;g--;){var v=c[g],r=u(b,v);r>f&&r<a&&(e=v,f=r)}return e},
ma:function(b,a,c,e){b.D.push({type:a,value:c,time:e})},qa:function(){c.length=0}}}();var oa={create:function(a,b){for(var c=50;c--;)ja.create(a,b,Math.random()*n,200,"#FF0",5+5*Math.random())}};var ja=function(){var a={};return{create:function(b,c,e,g,f,k){!a[f]&&(a[f]=[]);a[f].push({x:b,y:c,s:e,v:g-50,aa:k||50})},update:function(){for(var b in a)for(var c=a[b],e=c.length;e--;){var g=c[e];g.v-=g.aa;0>=g.v?(g=c,g[e]=g[g.length-1],--g.length):(g.x-=Math.cos(g.s)*g.aa,g.y-=Math.sin(g.s)*g.aa)}},f:function(){l.globalAlpha=1;l.lineWidth=1;for(var b in a){l.strokeStyle=b;l.beginPath();for(var c=a[b].length;c--;){var e=a[b][c],g=e.x+10*Math.cos(e.s),f=e.y/w.c+10*Math.sin(e.s);l.moveTo(e.x,e.y/
w.c);l.lineTo(g,f)}l.stroke()}},clear:function(){a={}}}}();var B=function(){function a(a,e,f,g){return b>a&&b<a+f&&c>e&&c<e+g}var b=0,c=0,e=0,g=0,f=0,k=!1,h=!1,p=!1;window.addEventListener("mousemove",function(a){var f=d.getBoundingClientRect();b=a.clientX-f.left;c=a.clientY-f.top;e=(b+w.x-d.width/2)/w.zoom;g=(c+w.y-d.height/2)*w.c/w.zoom},!1);window.addEventListener("mousedown",function(){p=k=!0},!1);window.addEventListener("mouseup",function(){p=!1;w.ea||(h=!0)},!1);window.addEventListener("wheel",function(a){f=Math.sign(a.deltaY)},!1);return{update:function(){h=
k=!1;f=0},za:a,na:function(b,c,e,f){return k&&a(b,c,e,f)},get x(){return b},get y(){return c},get B(){return e},get C(){return g},get click(){return k},get ia(){return h},get ra(){return p},get ja(){return f}}}();var va=function(){function a(a){var c=[],g;for(g in b)b[g].R===a&&c.push(g);return c}var b={};return{m:function(){Object.assign(b,{laser:{R:4,name:"Lasers",H:null,I:ia},beam:{R:4,name:"Beam",H:null,I:fa},rocket:{R:4,name:"Rockets",H:null,I:ka},slow:{R:4,name:"Slow",H:null,I:la},zap:{R:4,name:"Lightning",H:null,I:ma}})},Ea:a,get:function(c){if(!c.i)return[];var e=[];a(c.type).forEach(function(a){var f=c.i,g=b[a],h=f.type===a?f.level+1:1;e.push({H:g.H,text:g.name+" (Level "+h+")",ua:ua.bind(null,c,
a,h),Aa:"Upgrading level "+f.level+" "+f.type+", to level "+h+" "+a})});return e},I:function(a){return b[a].I}}}();var z={};function wa(){for(var a in z)for(var b=z[a].length;b--;){var c=z[a][b];c.v-=50;0>=c.v?(c.ha&&c.ha(),z[a].splice(b,1)):(c.x-=50*Math.cos(c.T),c.y-=50*Math.sin(c.T))}}function xa(){l.lineWidth=1;for(var a in z){l.strokeStyle=a;l.beginPath();for(var b=z[a].length;b--;){var c=z[a][b],e=c.x+10*Math.cos(c.T),g=c.y/w.c+10*Math.sin(c.T);l.moveTo(c.x,c.y/w.c);l.lineTo(e,g)}l.stroke()}};var Ba=function(){function a(a,c){var e=document.createElement("LI"),g=document.createElement("LABEL"),h=document.createElement("INPUT");g.textContent=a;h.type="checkbox";h.onclick=function(){ya.set(a,h.checked);c.call(h)};e.appendChild(h);e.appendChild(g);b.appendChild(e);"true"===ya.get(a,"true")&&(h.checked=!0,c.call(h,!0))}var b=document.createElement("UL"),c=b.style;c.position="absolute";c.right="0px";c.bottom="0px";c.color="#FFF";c.margin="16px";c.listStyle="none";document.body.appendChild(b);
return{m:function(){a("music",function(a){aa=this.checked;a||za(Aa)});a("voice",function(){ba=this.checked})}}}();var ya={set:function(a,b){window.localStorage.setItem(a,b)},get:function(a,b){return window.localStorage.getItem(a)||b}};var Ca=function(){var a=[{text:"Welcome to Exo... You are the commander of a long forgotten expedition to a distant star. Many hundreds of years ago you and your people set out to inhabit the galaxy. Upon reaching your destination, you were able to establish a base on a nearby planet. Not long after, you find yourself under seige from mysterious forces. Are they aliens, or maybe your own race, hundreds of years ahead of you in technology, catching up to you... Either way, this is your home now... Defend it.",
event:0,v:0},{text:"You can move your view of the star system around by clicking and dragging anywhere on-screen.",event:1},{text:"You can also zoom in and out with your mouse wheel.",event:3},{text:"The SPACEBAR can be used to pause and un-pause the game. Try it now.",event:2}],b=[],c=0,e="";return{get text(){return e},start:function(){},update:function(){if(""!==e){var g=a[c];void 0!==g.v&&0>=g.v--&&(b[g.event]=!0);!0===b[g.event]&&B.na(20,d.height/2-20-100,500,200)&&(c++,e="")}},f:function(){if(""!==
e){l.fillStyle="rgba(0, 0, 0, 0.5)";l.strokeStyle="#FFF";l.lineWidth=2;l.beginPath();l.rect(20,d.height/2-20-100,500,200);l.fill();l.stroke();l.fillStyle="#FFF";l.textAlign="left";l.textBaseline="top";for(var g=d.height/2-96-16,f=e.split(" "),k="",h=0;h<f.length;h++){var p=k+f[h]+" ";484<l.measureText(p).width&&0<h?(l.fillText(k,28,g),k=f[h]+" ",g+=20):k=p}l.fillText(k,28,g);!0===b[a[c].event]&&(l.textAlign="center",l.font="small-caps 600 12px monospace",l.fillText("click to continue...",270,d.height/
2+55))}},complete:function(a){b[a]=!0}}}();var w=function(){function a(){l.setTransform(1,0,0,1,0,0)}var b=0,c=0,e=0,g=0,f=0,k=0,h=0,p=0,v=1,r=1,E=2,K=!1;return{get x(){return b},get y(){return c},get zoom(){return v},get c(){return E},get ea(){return K},m:function(){g=e=c=b=0;r=v=1;E=2},clear:function(){a();l.clearRect(0,0,d.width,d.height)},reset:a,position:function(){l.setTransform(v,0,0,v,-b+d.width/2,-c+d.height/2)},update:function(){0!==B.ja&&(r=Da(r-.1*B.ja,.1,2));E=Math.min(1+(v-.1),2);B.click&&(f=b,k=c,h=B.x,p=B.y);var a=5<Math.abs(h-
B.x),T=5<Math.abs(p-B.y);0!==h&&B.ra&&(K||a||T)?(K=!0,e=f+(h-B.x),g=k+(p-B.y),Ca.complete(1)):(K&&(h=0),K=!1);a=v;v+=.001>Math.abs(v-r)?0:(r-v)/5;a=v-a;.001<Math.abs(a)&&(b+=B.B*a,c+=B.C*a,e+=B.B*a,g+=B.C*a,Ca.complete(3));b+=.001>Math.abs(b-e)?0:(e-b)/5;c+=.001>Math.abs(c-g)?0:(g-c)/5}}}();var Ea={$:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],g:[{n:[163],a:[]}]}],V:5513,U:1,W:0,Z:1};var Fa=document.createElement("CANVAS"),F=Fa.getContext("2d");Fa.width=40;Fa.height=40;F.fillStyle="#FFF";F.strokeStyle="#FFF";F.lineWidth=4;F.fillRect(0,31,40,5);F.fillRect(6,36,28,5);F.beginPath();F.moveTo(10,31);F.lineTo(15,26);F.lineTo(25,26);F.lineTo(30,31);F.fill();F.beginPath();F.moveTo(21,26);F.lineTo(21,21);F.stroke();F.lineWidth=2;F.beginPath();F.moveTo(21,19);F.lineTo(21,0);F.stroke();var Ga=document.createElement("CANVAS"),G=Ga.getContext("2d");Ga.width=100;Ga.height=100;G.translate(50,50);G.fillStyle="#444";G.moveTo(-20,0);G.lineTo(0,50);G.lineTo(20,0);G.fill();G.fillStyle="#a33";G.beginPath();G.scale(1,.5);G.arc(0,0,40,0,n);G.fill();G.fillStyle="#222";G.beginPath();G.arc(0,-5,35,0,n);G.fill();var Ha=document.createElement("CANVAS"),H=Ha.getContext("2d");Ha.width=100;Ha.height=100;H.translate(50,50);H.fillStyle="#444";H.beginPath();H.arc(0,0,15,0,n);H.fill();H.lineWidth=5;H.strokeStyle="#666";H.beginPath();H.moveTo(0,-6);H.lineTo(-30,-6);H.moveTo(0,6);H.lineTo(-30,6);H.stroke();var Ia=document.createElement("CANVAS"),I=Ia.getContext("2d");Ia.width=40;Ia.height=40;I.fillStyle="#FFF";I.strokeStyle="#FFF";I.lineWidth=2;I.fillRect(0,31,40,5);I.fillRect(6,36,28,5);I.beginPath();I.rect(19,20,2,10);I.arc(20,20,5,0,n);I.fill();I.beginPath();I.arc(20,20,18,0,n);I.stroke();var qa,Oa=document.createElement("CANVAS"),Pa=Oa.getContext("2d");Oa.width=8;Oa.height=8;Pa.fillStyle="#F00";Pa.moveTo(0,4);Pa.lineTo(8,0);Pa.lineTo(6,4);Pa.lineTo(8,8);Pa.fill();qa=Oa;var Qa=document.createElement("CANVAS"),J=Qa.getContext("2d");Qa.width=40;Qa.height=40;J.fillStyle="#FFF";J.strokeStyle="#FFF";J.lineWidth=2;J.fillRect(0,31,40,5);J.fillRect(6,36,28,5);J.beginPath();J.moveTo(10,31);J.lineTo(15,26);J.lineTo(25,26);J.lineTo(30,31);J.fill();J.beginPath();J.moveTo(17,26);J.lineTo(14,21);J.moveTo(23,26);J.lineTo(20,21);J.moveTo(5,6);J.lineTo(2,1);J.moveTo(16,13);J.lineTo(13,8);J.stroke();var Ra=document.createElement("CANVAS"),L=Ra.getContext("2d");Ra.width=40;Ra.height=40;L.fillStyle="#FFF";L.strokeStyle="#FFF";L.lineWidth=1;L.fillRect(0,31,40,5);L.fillRect(6,36,28,5);L.beginPath();L.rect(19,20,2,10);L.arc(20,20,5,0,n);L.fill();L.beginPath();L.moveTo(20,20);L.lineTo(0,20);L.moveTo(20,20);L.lineTo(40,20);L.moveTo(20,20);L.lineTo(20,0);L.moveTo(20,20);L.lineTo(0,0);L.moveTo(20,20);L.lineTo(40,0);L.stroke();var Sa=document.createElement("CANVAS"),M=Sa.getContext("2d");Sa.width=40;Sa.height=40;M.fillStyle="#FFF";M.strokeStyle="#FFF";M.lineWidth=2;M.fillRect(-4,-4,48,9);M.fillRect(2,5,4,4);M.fillRect(34,5,4,4);M.fillRect(12,5,16,8);M.fillRect(18,5,4,24);M.beginPath();M.moveTo(12,23);M.lineTo(20,29);M.lineTo(28,23);M.stroke();M.beginPath();M.arc(20,70,40,0,n);M.stroke();var Ta=document.createElement("CANVAS"),Ua=Ta.getContext("2d");Ta.width=160;Ta.height=80;Ua.fillStyle="#FFF";Ua.fillRect(10,10,20,60);Ua.fillRect(50,10,20,60);Ua.moveTo(90,10);Ua.lineTo(150,40);Ua.lineTo(90,70);Ua.fill();var Va=document.createElement("CANVAS"),N=Va.getContext("2d");Va.width=40;Va.height=40;N.fillStyle="#FFF";N.strokeStyle="#FFF";N.lineWidth=4;N.fillRect(0,31,40,5);N.fillRect(6,36,28,5);N.beginPath();N.moveTo(10,31);N.lineTo(17,22);N.lineTo(17,12);N.lineTo(20,2);N.lineTo(23,12);N.lineTo(23,22);N.lineTo(30,31);N.lineTo(15,24);N.lineTo(25,24);N.fill();var Wa=document.createElement("CANVAS"),O=Wa.getContext("2d");Wa.width=40;Wa.height=40;O.fillStyle="#FFF";O.strokeStyle="#FFF";O.lineWidth=2;O.translate(20,20);O.rotate(m/4);O.fillRect(-9,-4,8,8);O.fillRect(-7,-8,4,16);O.fillRect(-12,8,14,24);O.fillRect(-12,-32,14,24);O.beginPath();O.arc(30,0,20,0,n);O.stroke();var Xa=document.createElement("CANVAS"),P=Xa.getContext("2d");Xa.width=20;Xa.height=140;P.fillStyle="#dddddd";P.fillRect(8,50,4,40);P.fillStyle="#639bff";P.fillRect(2,0,15,60);P.fillRect(2,80,15,60);P.fillStyle="#9badb7";P.fillRect(2,65,17,10);P.fillRect(0,66,2,8);function Ya(a,b){return function(){a();b()}}function pa(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a}function u(a,b){return Math.sqrt(pa(a,b))}function t(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ha(a){return a-Math.floor(a/n)*n}function Q(a,b,c){return"hsl("+(0>a?360*Math.random():a)+","+(0>b?100*Math.random():b)+"%,"+(0>c?100*Math.random():c)+"%)"}function Da(a,b,c){return a>c?c:a<b?b:a}
function Za(){for(var a={x:B.B,y:B.C},b=999999,c=A[0],e=A.length;e--;){var g=u(A[e],a);g<b&&(b=g,c=e)}return A[c]}function eb(a){var b=null;if(B.ia){R.selection.target=null;var c=Za();u(c,{x:B.B,y:B.C})<fb&&!B.target&&!B.ea&&(S("selected "+c.name),!a||1!=c.type&&0!=c.type?U.o||(R.selection.target=c,R.selection.ya(B.x,B.y)):b=c,Ea.play())}return b};var gb=speechSynthesis,hb=!1,ib;gb&&(hb=!0,ib=gb.getVoices(),0>=ib.length&&(gb.onvoiceschanged=function(){ib=gb.getVoices()}));function S(a){R.S.push({text:a,time:240});hb&&ba&&(gb.cancel(),a.split(". ").forEach(function(a){a=new SpeechSynthesisUtterance(a+".");a.rate=1;a.pitch=.1;a.lang="en";gb.speak(a)}))};function jb(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],c,e,g,f,k;this.m=function(a){c=a;e=a.W;g=0;f=a.V*a.U*(e+1)*2;k=new Int32Array(f)};this.fa=function(){var h,p,v,r,E,K=new Int32Array(f),C=c.$[g],T=c.V,Ja=c.U,$a=0,Ka=0,V;var W=!1;var La=[];for(p=0;p<=e;++p){var ra=C.p[p];for(v=0;v<Ja;++v){if(E=ra?C.g[ra-1].a[v]:0)C.b[E-1]=C.g[ra-1].a[v+Ja]||0,16>E&&(La=[]);var Zb=b[C.b[15]],$b=C.b[16]/
512,ac=Math.pow(2,C.b[17]-9)/T,bc=C.b[18],ub=C.b[19],cc=135.82764118168*C.b[20]/44100,dc=1-C.b[21]/255,ab=1E-5*C.b[22],ec=C.b[23]/32,fc=C.b[24]/512,gc=6.283184*Math.pow(2,C.b[25]-9)/T,vb=C.b[26]/255,bb=C.b[27]*T&-2;E=(p*Ja+v)*T;for(r=0;4>r;++r)if(h=ra?C.g[ra-1].n[v+r*Ja]:0){if(!La[h]){var y=La;var da=h;var wb=V=void 0,Ma,X,D=C,xb=h,hc=b[D.b[0]],ic=D.b[1],jc=D.b[3],kc=b[D.b[4]],lc=D.b[5],mc=D.b[8],yb=D.b[9],na=D.b[10]*D.b[10]*4,Na=D.b[11]*D.b[11]*4,cb=D.b[12]*D.b[12]*4,nc=1/cb,sa=D.b[13],oc=T*Math.pow(2,
2-D.b[14]),zb=new Int32Array(na+Na+cb),Ab=0,Bb=0;for(Ma=X=0;X<na+Na+cb;X++,Ma++){0<=Ma&&(sa=sa>>8|(sa&255)<<4,Ma-=oc,wb=.003959503758*Math.pow(2,(xb+(sa&15)+D.b[2]-128-128)/12),V=.003959503758*Math.pow(2,(xb+(sa&15)+D.b[6]-128-128)/12)*(1+8E-4*D.b[7]));var ea=1;X<na?ea=X/na:X>=na+Na&&(ea-=(X-na-Na)*nc);var ta=wb;jc&&(ta*=ea*ea);Ab+=ta;var db=hc(Ab)*ic;ta=V;mc&&(ta*=ea*ea);Bb+=ta;db+=kc(Bb)*lc;yb&&(db+=(2*Math.random()-1)*yb);zb[X]=80*db*ea|0}y[da]=zb}da=La[h];h=0;for(y=2*E;h<da.length;h++,y+=2)K[y]+=
da[h]}for(h=0;h<T;h++)r=2*(E+h),(y=K[r])||W?(W=cc,bc&&(W*=Zb(ac*r)*$b+.5),W=1.5*Math.sin(W),$a+=W*Ka,y=dc*(y-Ka)-$a,Ka+=W*y,y=3==ub?Ka:1==ub?y:$a,ab&&(y*=ab,y=1>y?-1<y?a(.25*y):-1:1,y/=ab),y*=ec,W=1E-5<y*y,da=Math.sin(gc*r)*fc+.5,V=y*(1-da),y*=da):V=0,r>=bb&&(V+=K[r-bb+1]*vb,y+=K[r-bb]*vb),K[r]=V|0,K[r+1]=y|0,k[r]+=V|0,k[r+1]+=y|0}}g++;return g/c.Z};this.da=function(){var a=44+2*f-8,b=a-36,c=new Uint8Array(44+2*f);c.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,
0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<f;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;c[b++]=e&255;c[b++]=e>>8&255}return c}};var kb=function(){var a=0,b=30,c=0,e=20,g=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];return{m:function(){a=0;b=30;c=60*b},update:function(){if(!c--){for(var f=e;f--;){var k=Math.random()*n;q.create(3E3*Math.cos(k),3E3*Math.sin(k),k)}a++;e+=20;c=60*b;S(g[~~(Math.random()*g.length)])}},get Ba(){return c},get pa(){return a}}}();var lb=!0,mb=0,nb=[],ob=!0,pb=[],qb=Ea,rb=new jb;rb.M=new Audio;rb.P=!0;rb.m(qb);pb.push(rb);Ea=rb.M;
var tb=sb({$:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],g:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,
,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,
,,,123,,,,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],g:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,
140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],g:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,
,,147,,,147,,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],g:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],g:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,
,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],g:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},
{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,
,1,2,1,2,3,,4,5,,,,,3],g:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,118],a:[]}]},{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],g:[{n:[147],a:[]}]}],V:5513,U:32,W:26,Z:8}),Cb=sb({$:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],g:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,
155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],g:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,
,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1],g:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],g:[{n:[147,,,
,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],g:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,
109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],g:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],g:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,
,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,2],g:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],V:6300,U:32,W:30,Z:8});function sb(a){var b=new jb;b.M=new Audio;b.P=!0;b.m(a);nb.push(b);return b.M}var Db=0;
function Eb(){for(var a=0;a<nb.length;a++){var b=nb[a];if(b.P){b.P=1<=b.fa();Db+=1;var c=b.da();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.M.src=c}}Db>=nb.length&&(lb=!1)}var Fb=0;function Gb(){for(var a=0;a<pb.length;a++){var b=pb[a];if(b.P){b.P=1<=b.fa();Fb+=1;var c=b.da();c=URL.createObjectURL(new Blob([c],{type:"audio/wav"}));b.M.src=c}}Fb>=pb.length&&(ob=!1)}var Aa=tb;
function za(a){null!==a&&(aa?(Aa=a,a.wa||(a.wa=!0,a.addEventListener("ended",function(){this.currentTime=0;var a=nb[mb].M;mb=nb.indexOf(a);za(a)},!1)),Aa.play(),a.volume=.5):Aa&&Aa.pause())};var x=function(){var a,b,c,e,g,f,k,h;return{create:function(p){a=p;b=100;e=c=.1;g=300;f=500;k=100;h=10},get h(){return a},get j(){return b},get xa(){return c},get sa(){return e},get Da(){return g},get oa(){return f},get l(){return k},get u(){return h},set l(a){k=a},set u(a){h=a}}}();var U=function(){var a=!1,b=null,c=0,e=null,g=null,f=null,k=0;return{get o(){return a},set o(b){a=b},set L(a){b=a},set i(a){c=a},set F(a){k=a},update:function(){if(e)if(B.ia){var h=t({x:B.B,y:B.C},e);switch(b){case 2:var p=Y(e,g,h);break;case 3:p=Hb(e,g);break;case 4:p=Ib(e,g,h),ua(p,c,1)}p.update();e=b=null;a=!1;x.l-=k;k=0;B.update()}else g=u(e,{x:B.B,y:B.C}),g=g>f?f:g,g=50*Math.floor(g/50);else(e=eb(!0))&&(f=20*e.size)},f:function(){e&&(l.strokeStyle="#0F0",l.beginPath(),l.arc(e.x,e.y,g,0,n),l.lineWidth=
3,l.stroke())},m:function(){f=g=e=b=null}}}();var R={x:0,y:0,elements:[],ba:"",selection:null,S:[],ka:function(){var a=d.width/2,b=d.height;R.selection=Jb();R.elements=[R.selection,Z(R,a-24-180,b-64,"Satellite",Wa,Kb),Z(R,a-24-120,b-64,"Mining Station",Sa,Lb),Z(R,a-24-60,b-64,"Laser Platform",Qa,Mb),Z(R,a-24,b-64,"Beam Platform",Fa,Nb),Z(R,a+36,b-64,"Missle Platform",Va,Ob),Z(R,a+96,b-64,"EMP Platform",Ia,Pb),Z(R,a+156,b-64,"Lighting Platform",Ra,Qb)]},update:function(){R.ba="";R.elements.forEach(function(a){a.update()});for(var a=R.S.length;a--;)R.S[a].time--||
R.S.splice(a,1)},f:function(){R.elements.forEach(function(a){a.f()});var a=Da(d.width/1920,.5,1);l.globalAlpha=1;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.font="700 48px monospace";l.fillText(~~(kb.Ba/60),d.width/2,96);l.font="small-caps 700 24px monospace";l.fillText("next wave in",d.width/2,48);l.fillText("minerals",d.width/2+300*a,48);l.fillText(~~x.l,d.width/2+300*a,80);l.fillText("energy",d.width/2+600*a,48);l.fillText(~~x.u,d.width/2+600*a,80);l.fillText("survived",d.width/
2-300*a,48);l.fillText(kb.pa+" waves",d.width/2-300*a,80);l.fillText("base status",d.width/2-600*a,48);l.fillText(~~x.h.j+"%",d.width/2-600*a,80);l.font="small-caps 700 16px monospace";l.fillText(R.ba,d.width/2,d.height-96);l.textAlign="left";l.textBaseline="bottom";var b=20;R.S.forEach(function(a){l.fillText('"'+a.text+'"',20,d.height-b);b+=20});Ca.f();l.font="small-caps 500 12px monospace";l.fillText("FPS: "+ca.ta,10,26);l.drawImage(Ta,2===Rb?0:80,0,80,80,d.width-90,30,60,60)}};
function Kb(a){if(a)return 50<=x.l;S("Select an area to build the satellite");U.o=!0;U.L=2;U.F=50}function Lb(a){if(a)return 50<=x.l;S("Select an area to build the mining station");U.o=!0;U.L=3;U.F=50}function Mb(a){if(a)return 100<=x.l;S("Select an area to build the defense platform");U.o=!0;U.L=4;U.i="laser";U.F=100}function Nb(a){if(a)return 120<=x.l;S("Select an area to build the defense platform");U.o=!0;U.L=4;U.i="beam";U.F=120}
function Ob(a){if(a)return 140<=x.l;S("Select an area to build the defense platform");U.o=!0;U.L=4;U.i="rocket";U.F=140}function Pb(a){if(a)return 160<=x.l;S("Select an area to build the defense platform");U.o=!0;U.L=4;U.i="slow";U.F=160}function Qb(a){if(a)return 170<=x.l;S("Select an area to build the defense platform");U.o=!0;U.L=4;U.i="zap";U.F=170}R.ka();
function Jb(){var a=d.width/2-213,b=d.height-128-120,c=[],e={x:a,y:b,target:null,update:function(){null!==e.target&&c.forEach(function(a){a.update()})},f:function(){if(null!==e.target){l.fillStyle="rgba(0, 0, 0, 0.5)";l.strokeStyle="#FFF";l.lineWidth=2;l.fillRect(a,b,426,120);l.strokeRect(a,b,426,120);l.fillStyle="#fff";l.textAlign="left";l.textBaseline="top";l.font="16px monospace";l.fillText((x.h===e.target?"Base":"")+e.target.name,a+120,b+16);var g=e.target.cache,f=Math.max(g.width,g.height)/104;
l.drawImage(g,a+8+52-g.width/f/2,b+8+52-g.height/f/2,g.width/f,g.height/f);c.forEach(function(a){a.f()})}},ya:function(c,f){e.x=a=c;e.y=b=f},Ca:function(a){c.length=0;var b=128;a.forEach(function(a){c.push(Z(e,b,60,a.text,a.H,a.ua,a.Aa));b+=60})}};return e};function Z(a,b,c,e,g,f,k){return{update:function(){B.za(a.x+b,a.y+c,48,48)&&(R.ba=e,B.click&&f&&f(!0)&&(f(),k&&S(k)))},f:function(){l.globalAlpha=1;f&&!f(!0)&&(l.globalAlpha=.2);l.fillStyle="rgba(0, 0, 0, 0.5)";l.strokeStyle="#FFF";l.lineWidth=2;l.fillRect(a.x+b,a.y+c,48,48);l.strokeRect(a.x+b,a.y+c,48,48);g&&l.drawImage(g,a.x+b+4,a.y+c+4)}}};Sb();window.addEventListener("resize",Sb,!1);function Sb(){d.width=window.innerWidth;d.height=window.innerHeight;l.clearRect(0,0,d.width,d.height);R.ka()}
function Tb(){l.globalAlpha=1;for(var a=A.length;a--;){var b=A[a];b.w&&Ub(b);var c=Math.floor(4*w.zoom);b.K&&b.K[c]&&(l.globalAlpha=.3,c=b.K[c],l.save(),l.translate(b.x,b.y/w.c),l.scale(1,1/w.c),l.drawImage(c,0,0,c.width,c.height),l.scale(-1,1),l.drawImage(c,0,0),l.scale(1,-1),l.drawImage(c,0,0),l.scale(-1,1),l.drawImage(c,0,0),l.restore());l.fillStyle=b.J?"#0F0":"#F00";l.beginPath();l.arc(b.x,b.y/w.c-20,5,0,n);l.fill()}}
function Ub(a){var b=a.w;if(b){var c=b.h.K;c||(c=b.h.K=[]);var e=Math.floor(4*w.zoom);c=c[e];if(!c){c=document.createElement("CANVAS");var g=0;A.forEach(function(a){a.w&&a.w.h===b.h&&(g=Math.max(g,a.w.G+40))});c.width=g;c.height=g;b.h.K[e]=c;c.ga=[]}if(!c.ga[a.id]){e=.2+e/4;var f=c.getContext("2d");f.setLineDash([5/e,5/e]);f.beginPath();f.lineWidth=2/e;f.strokeStyle=a.color;f.globalAlpha=1;f.arc(0,0,b.G,0,n/4,!1);f.stroke();f.setLineDash([]);c.ga[a.id]=!0}}}
function Vb(){l.beginPath();l.globalAlpha=.3;l.strokeStyle="#BDF";l.lineWidth=2/w.zoom;for(var a=A.length;a--;){var b=A[a].w;if(b){l.save();var c=1/w.c;l.transform(1,0,0,c,b.h.x,b.h.y*c);c=b.s-100*b.X;l.moveTo(Math.cos(c)*b.G,Math.sin(c)*b.G);l.arc(0,0,b.G,c,b.s,0>b.X);l.restore()}}l.stroke()}
function Wb(){l.globalAlpha=1;for(var a=A.length;a--;){var b=A[a];if(2===b.type){var c=t(b,A[0]);l.save();l.translate(b.x,b.y/w.c);l.rotate(c);l.scale(.3,.3);l.drawImage(Xa,-Xa.width/2,-Xa.height/2)}else if(4===b.type)l.save(),l.translate(b.x,b.y/w.c),l.scale(.5,.5),l.drawImage(Ga,-Ga.width/2,-Ga.height/2+10),l.scale(1.2,.7),l.rotate(b.ca),l.drawImage(Ha,-Ha.width/2,-Ha.height/2);else{var e=0===b.type;if(!b.cache){var g=e?"#FFF":b.color,f=e?50:10;c=b.size+f;var k=0,h=b.cache=document.createElement("CANVAS");
h.width=2*c;h.height=2*c;h=b.cache.getContext("2d");e&&(k=1E3,h.shadowOffsetY=k);h.beginPath();h.fillStyle=g;h.shadowColor=b.color;h.shadowBlur=f;h.arc(c,c-k,b.size,0,n,!1);h.fill();e&&(h.beginPath(),h.shadowColor="#FFF",h.shadowBlur=5,h.arc(c,c-k,b.size-5,0,n,!1),h.fill());if(!e)for(f=g=b.size,h.beginPath(),h.arc(c,c,b.size,0,2*Math.PI,!1),h.clip();g;)h.beginPath(),h.globalAlpha=.05,h.fillStyle="#000",h.shadowColor="#000",h.shadowBlur=10,h.save(),h.transform(1,0,0,1,c-f/2+(b.size-f)/2,c),h.arc(0,
0,2*f,-n/4,n/4),h.fill(),h.restore(),f-=Math.max(b.size/20,1),g-=Math.max(b.size/20,1)}c=t(b,A[0]);l.save();l.translate(b.x,b.y/w.c);l.rotate(c);e&&(e=1+.01*Math.sin(performance.now()/30),l.scale(e,e));l.drawImage(b.cache,-b.cache.width/2,-b.cache.height/2)}l.restore()}}var Xb=[],Yb=[];
function pc(a,b){a.J=!0;b&&(Xb.length=0,Yb.length=0);b=[];Yb.push(a);for(var c=A.length;c--;){var e=A[c],g=0<=Yb.indexOf(e);!(a===e||g||a!==x.h&&2!==a.type||2!==e.type&&3!==e.type&&4!==e.type)&&u(a,e)<=x.oa&&(Xb.push(a,e),b.push(e),Yb.push(e))}b.forEach(function(a){pc(a)});return Xb}
function qc(){for(var a=A.length;a--;)A[a].J=!1;a=pc(x.h,!0);l.globalAlpha=Da(.2/w.zoom,.2,.4);l.lineWidth=Da(1/w.zoom,2,5);l.strokeStyle="#0F0";l.beginPath();for(var b=75*(w.c-1),c=0;c<a.length;c+=2){var e=a[c],g=a[c+1],f=e.y/w.c,k=g.y/w.c;l.moveTo(e.x,f);l.bezierCurveTo(e.x,f-b,g.x,k-b,g.x,k)}l.stroke()};var rc=document.createElement("CANVAS");rc.width=512;rc.height=512;var sc=rc.getContext("2d");sc.shadowBlur=1;sc.globalAlpha=.5;for(var tc=300;tc--;){var uc=512*Math.random(),vc=512*Math.random(),wc=Q(-1,100,90);sc.fillStyle=wc;sc.shadowColor=wc;sc.beginPath();sc.arc(uc,vc,.5,0,2*Math.PI);sc.fill()}var xc=l.createPattern(rc,"repeat");
function yc(){var a=performance.now()/2E3;l.beginPath();l.rect(0,0,d.width,d.height);l.fillStyle=xc;l.translate(.5*d.width,.5*d.height+500*w.c);l.scale(.5,.5);l.translate(-w.x/25,-w.y/25);l.rotate(a/200);l.fill();l.rotate(-a/200);l.scale(2,2);l.translate(-w.x/50,-w.y/50);l.fill()}var zc=document.createElement("CANVAS"),Ac=zc.getContext("2d",{alpha:!1});zc.width=128;zc.height=128;Ac.beginPath();var Bc=Ac.createRadialGradient(64,64,0,64,64,64);Bc.addColorStop(0,"#234");Bc.addColorStop(.1,"#123");
Bc.addColorStop(1,"#000");Ac.fillStyle=Bc;Ac.fillRect(0,0,128,128);var A=[];va.m();function Cc(a,b,c,e,g,f){void 0===f&&(f=0);var k={name:"",type:0,x:0,y:0};k.color=a;k.size=b;k.id=A.length.toString();k.j=100;k.i=null;k.Fa=[];k.J=!1;k.ca=0;c&&(c.K=null,k.w={h:c,G:e,X:g,s:f});k.update=function(){0>=k.j&&(A[A.indexOf(k)]=A[A.length-1],--A.length,k.w&&(k.w.h.K=null));if(k.w){var a=k.w;a.s+=a.X;k.x=a.G*Math.cos(a.s)+a.h.x;k.y=a.G*Math.sin(a.s)+a.h.y}k.J&&k.i&&k.i.update()};k.f=function(){k.i&&k.i.f&&k.i.f()};A.push(k);return k}
function Dc(a,b,c,e,g,f){e=50*Math.floor((e+b/2)/50);a=Cc(a,b,c,e,g,f);a.name="Planet";a.type=1===c.type?5:1;return a}function Hb(a,b){b=50*Math.floor((b||3*a.size)/50);var c=Cc(Q(212,100,97),2,a,b,-.005,null);c.name="Mining Station";c.type=3;c.update=Ya(c.update,function(){c.J&&(x.l+=x.xa)});return c}function Y(a,b,c){b=50*Math.floor((b||5*a.size)/50);var e=Cc(Q(160,100,50),2,a,b,.01,c);e.name="Satellite";e.type=2;e.cache=Xa;e.update=Ya(e.update,function(){e.J&&(x.u+=x.sa)});return e}
function Ib(a,b,c){b=50*Math.floor((b||7*a.size)/50);a=Cc(Q(33,100,50),2,a,b,.005,c);a.name="Defense Platform";a.type=4;ua(a,"laser",1);return a}function ua(a,b,c){b=va.I(b);a.i=b(a,c)};var Ec=!1,Fc=1;
function Gc(){var a=d.width/2,b=d.height/2;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.shadowColor="#FFF";l.shadowBlur=50+2*Math.sin(performance.now()/100);l.font="small-caps 700 256px monospace";l.fillText("X",a,b-64);l.fillText("e o",a,b-90);l.shadowBlur=0;l.font="small-caps 700 32px monospace";lb?l.fillText("Loading music...",a,b+64):ob?l.fillText("Loading sounds...",a,b+64):l.fillText("Click to continue!",a,b+64);l.font="small-caps 700 16px monospace";l.fillText("Created by",a,
d.height-68);l.fillText("ai Doge & Jack Oatley",a,d.height-48);l.fillText("for #js13k",a,d.height-28)};var Rb=0,fb=64;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);Ba.m();document.addEventListener("keypress",function(a){" "===a.key&&(Ca.complete(2),Rb=2===Rb?1:2)});
function Hc(){A=[];w.m();U.m();q.qa();ja.clear();kb.m();Ca.start();var a=Cc(Q(60,100,50),100,null,null,null,null);a.name="The Sun";a.type=0;var b=Dc(Q(180,39,62),20,a,1E3,.003,Math.random()*n);x.create(b);Dc(Q(-1,60,70),10,b,200,-.002,Math.random()*n);var c=Dc(Q(-1,60,70),50,a,2E3,.0015,Math.random()*n);Dc(Q(-1,60,70),10,c,8*c.size,.01,Math.random()*n);Dc(Q(-1,60,70),20,c,9*c.size,.005,null);Dc(Q(-1,60,70),60,a,3E3,-.001,Math.random()*n);Hb(b);Hb(c);Y(b);Y(a);Y(a);Y(a);Y(c);Y(c);Y(c);Ib(b);Ib(b);
Ib(b);Ib(c)}var Ic=performance.now(),Jc=1E3/60,Kc=0;(function Lc(a){requestAnimationFrame(Lc);var c=Ic+Jc;ca.update(1/((a-Kc)/1E3));Kc=a;a>c&&(Mc(Math.min(Math.floor((a-Ic)/Jc),60)),Nc(),Ic=a)})(Ic);
function Mc(a){0===Rb?0<Fc--||(lb?Eb():ob?Gb():(Ec||(Ec=!0,za(Cb),S("Welcum to Exo")),B.click&&(Rb=1,Hc(),tb.pause&&za(Cb)))):(-1===A.indexOf(x.h)&&(Rb=0,Hc()),w.update(),R.update(),Ca.update(),U.o&&U.update(),1===Rb&&(eb(),A.forEach(function(a){a.update()}),kb.update(),q.update(),ja.update(),wa()));B.update();--a&&Mc(a)}
function Nc(){w.clear();l.drawImage(zc,Math.floor(.5*d.width-w.x-2048),Math.floor(.5*d.height-w.y-2048),4096,4096);yc();if(0===Rb)w.reset(),Gc();else{w.position();A.forEach(function(a){a.f()});l.globalAlpha=1;Vb();Tb();Wb();q.f();qc();ja.f();xa();var a=Za();l.scale(1,1/w.c);u(a,{x:B.B,y:B.C})<fb&&(l.beginPath(),l.moveTo(a.x,a.y),l.lineTo(B.B,B.C),l.strokeStyle="#FFF",l.stroke(),l.beginPath(),l.arc(a.x,a.y,30,0,n),l.lineWidth=3,l.stroke());U.o&&U.f();l.setTransform(1,0,0,1,d.width/2,d.height/2);w.reset();
R.f()}};})();</script></body></html>

