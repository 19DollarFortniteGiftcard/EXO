<!DOCTYPE html><html><head><meta charset="utf-8"/><style>body {margin: 0px;overflow: hidden;}</style></head><body><canvas id="c"></canvas><script>(function() {var c=document.getElementById("c"),l=c.getContext("2d",{alpha:!1}),n=Math.PI,aa=2*n;var p=Math.random,r=2*Math.PI;function ba(a,b){return function(){a();b()}}function v(a,b){var d=a.x-b.x;a=a.y-b.y;return Math.sqrt(d*d+a*a)}function w(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function ca(a){return a-Math.floor(a/aa)*aa}function ha(a,b,d){var e=0;d.forEach(function(d){d.h.f==b&&(e+=aa/a)});if(!(e>=aa))return e}function x(a,b,d){return"hsl("+(0>a?360*p():a)+","+(0>b?100*p():b)+"%,"+(0>d?100*p():d)+"%)"}function ia(a,b,d){return a>d?d:a<b?b:a}
function ja(){for(var a={x:z,y:A},b=999999,d=B[0],e=B.length;e--;){var h=v(B[e],a);h<b&&(b=h,d=e)}return B[d]}function ka(){if(la){C.selection.target=null;var a=ja();v(a,{x:z,y:A})<ma&&!na&&!ra&&(D("selected "+a.name),C.selection.target=a,C.selection.R(sa,ta),ua.play())}};var va=speechSynthesis,wa=!1,Ca,Da=3;va&&(wa=!1,Ca=va.getVoices(),0>=Ca.length&&(va.onvoiceschanged=function(){Ca=va.getVoices()}));function D(a){wa&&(va.cancel(),a=new SpeechSynthesisUtterance(a),a.rate=1,a.pitch=.1,a.lang="en-US",a.voice=Ca[Da%Ca.length],va.speak(a))};function Ea(){function a(a){return Math.sin(6.283184*a)}var b=[a,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],d,e,h,f,k;this.m=function(a){d=a;e=a.w;h=0;f=a.v*a.u*(e+1)*2;k=new Int32Array(f)};this.J=function(){var g,y,P,u,da,Q=new Int32Array(f),q=d.F[h],ea=d.v,xa=d.u,Ta=0,ya=0,I;var J=!1;var za=[];for(y=0;y<=e;++y){var oa=q.p[y];for(P=0;P<xa;++P){if(da=oa?q.c[oa-1].a[P]:0)q.b[da-1]=q.c[oa-1].a[P+xa]||0,16>da&&(za=[]);var Tb=b[q.b[15]],Ub=q.b[16]/
512,Vb=Math.pow(2,q.b[17]-9)/ea,Wb=q.b[18],lb=q.b[19],Xb=135.82764118168*q.b[20]/44100,Yb=1-q.b[21]/255,Ua=1E-5*q.b[22],Zb=q.b[23]/32,$b=q.b[24]/512,ac=6.283184*Math.pow(2,q.b[25]-9)/ea,mb=q.b[26]/255,Va=q.b[27]*ea&-2;da=(y*xa+P)*ea;for(u=0;4>u;++u)if(g=oa?q.c[oa-1].n[P+u*xa]:0){if(!za[g]){var m=za;var R=g;var nb=I=void 0,Aa,K,t=q,ob=g,bc=b[t.b[0]],cc=t.b[1],dc=t.b[3],ec=b[t.b[4]],fc=t.b[5],gc=t.b[8],pb=t.b[9],fa=t.b[10]*t.b[10]*4,Ba=t.b[11]*t.b[11]*4,Wa=t.b[12]*t.b[12]*4,hc=1/Wa,pa=t.b[13],ic=ea*
Math.pow(2,2-t.b[14]),qb=new Int32Array(fa+Ba+Wa),rb=0,sb=0;for(Aa=K=0;K<fa+Ba+Wa;K++,Aa++){0<=Aa&&(pa=pa>>8|(pa&255)<<4,Aa-=ic,nb=.003959503758*Math.pow(2,(ob+(pa&15)+t.b[2]-128-128)/12),I=.003959503758*Math.pow(2,(ob+(pa&15)+t.b[6]-128-128)/12)*(1+8E-4*t.b[7]));var S=1;K<fa?S=K/fa:K>=fa+Ba&&(S-=(K-fa-Ba)*hc);var qa=nb;dc&&(qa*=S*S);rb+=qa;var Xa=bc(rb)*cc;qa=I;gc&&(qa*=S*S);sb+=qa;Xa+=ec(sb)*fc;pb&&(Xa+=(2*Math.random()-1)*pb);qb[K]=80*Xa*S|0}m[R]=qb}R=za[g];g=0;for(m=2*da;g<R.length;g++,m+=2)Q[m]+=
R[g]}for(g=0;g<ea;g++)u=2*(da+g),(m=Q[u])||J?(J=Xb,Wb&&(J*=Tb(Vb*u)*Ub+.5),J=1.5*Math.sin(J),Ta+=J*ya,m=Yb*(m-ya)-Ta,ya+=J*m,m=3==lb?ya:1==lb?m:Ta,Ua&&(m*=Ua,m=1>m?-1<m?a(.25*m):-1:1,m/=Ua),m*=Zb,J=1E-5<m*m,R=Math.sin(ac*u)*$b+.5,I=m*(1-R),m*=R):I=0,u>=Va&&(I+=Q[u-Va+1]*mb,m+=Q[u-Va]*mb),Q[u]=I|0,Q[u+1]=m|0,k[u]+=I|0,k[u+1]+=m|0}}h++;return h/d.D};this.I=function(){var a=44+2*f-8,b=a-36,d=new Uint8Array(44+2*f);d.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,
0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,b&255,b>>8&255,b>>16&255,b>>24&255]);a=0;for(b=44;a<f;++a){var e=k[a];e=-32767>e?-32767:32767<e?32767:e;d[b++]=e&255;d[b++]=e>>8&255}return d}};var ua={F:[{b:[3,255,128,0,0,255,140,0,0,127,2,2,23,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1],c:[{n:[163],a:[]}]}],v:5513,u:1,w:0,D:1};var E=document.createElement("CANVAS"),F=E.getContext("2d");E.width=20;E.height=140;F.fillStyle="#dddddd";F.fillRect(8,50,4,40);F.fillStyle="#639bff";F.fillRect(2,0,15,60);F.fillRect(2,80,15,60);F.fillStyle="#9badb7";F.fillRect(2,65,17,10);F.fillRect(0,66,2,8);var Fa=document.createElement("CANVAS"),Ga=Fa.getContext("2d");Fa.width=32;Fa.height=32;Ga.fillStyle="#ff0000";Ga.moveTo(0,16);Ga.lineTo(32,0);Ga.lineTo(24,16);Ga.lineTo(32,32);Ga.fill();var Ha=0,Ia=0,Ja=["enemies, approaching","we are under attack","enemy, in-bound","hostiles detected"];function Ka(){for(var a=100;a--;){var b=Math.random()*r;(new La(3E3*Math.cos(b),3E3*Math.sin(b))).direction=b}};var Ma=!0,Na=[],Oa=!0,Pa=[],Qa=ua,Ra=new Ea;Ra.s=new Audio;Ra.l=!0;Ra.m(Qa);Pa.push(Ra);ua=Ra.s;
Sa({F:[{b:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],c:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],a:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,13,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],a:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],a:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],a:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,,,
,,,,,111,,,,,,,,99],a:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],a:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],a:[]},{n:[],a:[]}]},{b:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],c:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],a:[]},{n:[147],a:[]}]},{b:[0,0,140,0,0,0,140,0,0,60,
4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],c:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,,147,
,147,,,147,,147,,147],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{b:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[111],a:[]},{n:[114],a:[]},{n:[111],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},
{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],a:[]},{n:[147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],a:[]}]},{b:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],c:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],a:[]},{n:[159,,147,
,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],a:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],a:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{b:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,2,3,,
4,5,,,,,3],c:[{n:[123,,,,,,,,,,,,,,,,130],a:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],a:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],a:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],a:[]}]},
{b:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],c:[{n:[147],a:[]}]}],v:5513,u:32,w:26,D:8});
Sa({F:[{b:[2,96,116,0,1,192,116,8,0,0,15,0,35,0,0,0,53,3,1,2,70,183,53,56,136,3,131,4],p:[6,6,2,7,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,4,,,5,1,1,2,3],c:[{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155,150,155,153,157,155,153,152,155],a:[]},{n:[145,150,148,152,150,148,147,150,145,
150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[]},{n:[135,,123,,135,,123],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,148,135,152],a:[]},{n:[147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152,147,152,150,154,152,150,149,152],a:[11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15,35]},{n:[145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150,145,150,148,152,150,148,147,150],a:[11,
,13,,11,,,,11,,,,11,,13,,11,,,,11,,13,,11,,,13,,,,13,13,,36,,12,,,,9,,,,5,,37,,3,,,,1,,39,,,,,40,,,,41]}]},{b:[3,192,116,0,3,192,128,2,0,0,118,40,155,0,0,2,70,5,1,2,11,168,17,51,107,3,131,7],p:[,,,,1,1,2,3,1,1,2,4,1,1,2,4,1,1,2,4,5,,6,,1,1,2,4,1,1],c:[{n:[123,135],a:[]},{n:[126,138],a:[]},{n:[121,133],a:[]},{n:[121,133,,,,,,,,,,,,,,,145,150],a:[]},{n:[135],a:[]},{n:[126],a:[]}]},{b:[2,96,140,0,2,96,128,4,0,20,7,7,60,0,0,0,84,6,1,3,21,186,7,76,199,4,97,4],p:[,,,,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,
2,3,1,1,2,3,1],c:[{n:[123,,,123,,,123,,,123,123,,135,,123],a:[]},{n:[126,,,126,,,126,,,126,126,,138,,126],a:[]},{n:[121,,,121,,,121,,,121,121,,133,,121,,,,,,,,,,133,,145,,157,,169],a:[]}]},{b:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,24,5,0,0],p:[,,,,,,,3,1,2,1,2,,,,3,1,2,1,2,1,2,1,2,1,2,1,2,1],c:[{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],a:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,147,,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,147,,,,147],a:[]}]},
{b:[0,0,92,0,0,0,92,0,0,60,4,7,29,0,0,0,0,0,0,1,232,203,0,32,108,5,7,4],p:[,,,,,,,,1,1,1,1,,,,2,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,147,147,,,147,,,,147,147,,,147,,,,147,147,,,147,,,,147,147,,147,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,147,147,,147,147],a:[]}]},{b:[3,61,116,0,3,132,128,2,0,0,13,6,107,0,0,0,0,0,0,2,12,0,8,81,109,6,96,6],p:[,,,,,,,,,,,,1,2,3,4,1,2,3,4,1,2,3,4,5],c:[{n:[159,,,,,,,,,,,,,,,,157,,,,,,,,156,,,,,,150,,171],a:[]},{n:[147],a:[]},{n:[162,,,,,,,,,,,,,,,,157,,,,,,,,153,,,,,,150],
a:[]},{n:[145,,,,,,,,,,,,,,,,,,,,,,,,157,,,,169],a:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],a:[]}]},{b:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,,,,3,1,1,1,2,1,1,1,2,1,1,1,2],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],a:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,159,159,,,147,,,147],a:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,159,159,,,147,,,147],a:[]}]},{b:[0,192,128,0,0,192,140,18,0,216,107,115,138,0,0,1,136,6,1,2,8,92,27,32,148,5,85,8],p:[,,,,,
,,,,,,,,,,,,,,,,,,,,,,,1,1,2],c:[{n:[111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130],a:[]},{n:[],a:[]}]}],v:6300,u:32,w:30,D:8});function Sa(a){var b=new Ea;b.s=new Audio;b.l=!0;b.m(a);Na.push(b)}var Ya=0;function Za(){for(var a=0;a<Na.length;a++){var b=Na[a];if(b.l){b.l=1<=b.J();Ya+=1;var d=b.I();d=URL.createObjectURL(new Blob([d],{type:"audio/wav"}));b.s.src=d}}Ya>=Na.length&&(Ma=!1)}var $a=0;
function ab(){for(var a=0;a<Pa.length;a++){var b=Pa[a];if(b.l){b.l=1<=b.J();$a+=1;var d=b.I();d=URL.createObjectURL(new Blob([d],{type:"audio/wav"}));b.s.src=d}}$a>=Pa.length&&(Oa=!1)};var sa=0,ta=0,z=0,A=0,bb=!1,ra=!1,la=!1,cb=!1,db=!1,na=null,eb;window.addEventListener("mousemove",function(a){var b=c.getBoundingClientRect();sa=a.clientX-b.left;ta=a.clientY-b.top;z=(sa+G-c.width/2)/H;A=(ta+L-c.height/2)*M/H;eb&&(ra=!0)},!1);window.addEventListener("mousedown",function(){eb=bb=!0},!1);window.addEventListener("mouseup",function(){eb=!1;ra||(la=!0);ra=!1},!1);window.addEventListener("wheel",function(a){cb=0<a.deltaY;db=0>a.deltaY},!1);var C={x:0,y:0,elements:[],G:"",selection:null,N:function(){var a=c.width/2,b=c.height;C.selection=fb();C.elements=[C.selection,gb(C,a-24-60,b-64,"Build Satellite",hb),gb(C,a-24,b-64,"Build Mining Station",ib),gb(C,a+36,b-64,"Build Defense Platform",jb)]},update:function(){C.G="";C.elements.forEach(function(a){a.update()})},g:function(){C.elements.forEach(function(a){a.g()});l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.font="small-caps 700 32px monospace";l.fillText("next wave in",
c.width/2,32);l.font="700 64px monospace";l.fillText(~~(Ia/60),c.width/2,96);l.font="small-caps 700 32px monospace";l.fillText("minerals",c.width/2+300,48);l.fillText(~~N.C,c.width/2+300,80);l.font="small-caps 700 32px monospace";l.fillText("energy",c.width/2+600,48);l.fillText(~~N.A,c.width/2+600,80);l.font="small-caps 700 32px monospace";l.fillText("survived",c.width/2-300,48);l.fillText(Ha+" waves",c.width/2-300,80);l.font="small-caps 700 32px monospace";l.fillText("base status",c.width/2-600,
48);l.fillText(~~N.j+"%",c.width/2-600,80);l.font="small-caps 700 24px monospace";l.fillText(C.G,c.width/2,c.height-96)}};function hb(){D("Select an area to build the satellite")}function ib(){D("Select an area to build the mining station")}function jb(){D("Select an area to build the defense platform")}C.N();
function fb(){var a=c.width/2-180,b=c.height-128-120,d=[],e={x:a,y:b,target:null,update:function(){d.forEach(function(a){a.update()})},g:function(){null!==e.target&&(l.fillStyle="rgba(0, 0, 0, 0.5)",l.strokeStyle="rgba(255, 255, 255, 0.5)",l.fillRect(a,b,360,120),l.strokeRect(a,b,360,120),l.fillStyle="#fff",l.textAlign="left",l.textBaseline="top",l.font="16px monospace",l.fillText((N.f===e.target?"Base":"")+e.target.name,a+120,b+16),l.drawImage(e.target.cache,a+8,b+8,104,104),d.forEach(function(a){a.g()}))},
R:function(d,f){e.x=a=d;e.y=b=f}};d.push(gb(e,128,60,"Build Satellite",hb),gb(e,188,60,"Build Mining Station",ib),gb(e,248,60,"Build Defense Platform",jb));return e};function gb(a,b,d,e,h){return{update:function(){var f=a.x+b,k=a.y+d,g=sa,y=ta;g>f&&g<f+48&&y>k&&y<k+48&&(C.G=e,bb&&h())},g:function(){l.fillStyle="rgba(0, 0, 0, 0.5)";l.strokeStyle="rgba(255, 255, 255, 0.5)";l.fillRect(a.x+b,a.y+d,48,48);l.strokeRect(a.x+b,a.y+d,48,48)}}};var G=0,L=0,kb=0,tb=0,ub=0,vb=0,wb=0,xb=0,H=1,yb=1,M=2;function zb(){if(db||cb)yb=ia(yb+(db?.1:-.1),.1,2);M=Math.min(1+(H-.1),2);bb&&(Ab=!0,ub=G,vb=L,wb=sa,xb=ta);ra&&Ab?(kb=ub+(wb-sa),tb=vb+(xb-ta)):la&&(Ab=!1);var a=H;H+=.001>Math.abs(H-yb)?0:(yb-H)/5;a=H-a;.001<Math.abs(a)&&(G+=z*a,L+=A*a,kb+=z*a,tb+=A*a);G+=.001>Math.abs(G-kb)?0:(kb-G)/5;L+=.001>Math.abs(L-tb)?0:(tb-L)/5}function Bb(){l.setTransform(1,0,0,1,0,0)}var Ab;Cb();window.addEventListener("resize",Cb,!1);function Cb(){c.width=window.innerWidth;c.height=window.innerHeight;l.clearRect(0,0,c.width,c.height);C.N()}function Db(){l.globalAlpha=1;for(var a=B.length;a--;){var b=B[a];b.h&&Eb(b);var d=Math.floor(4*H);b.o&&b.o[d]&&(d=b.o[d],l.save(),l.translate(b.x,b.y/M),l.scale(1,1/M),l.drawImage(d,0,0,d.width,d.height),l.scale(-1,1),l.drawImage(d,0,0),l.scale(1,-1),l.drawImage(d,0,0),l.scale(-1,1),l.drawImage(d,0,0),l.restore())}}
function Eb(a){var b=a.h;if(b){var d=b.f.o;d||(d=b.f.o=[]);var e=Math.floor(4*H);d=d[e];if(!d){d=document.createElement("CANVAS");var h=0;B.forEach(function(a){a.h&&a.h.f===b.f&&(h=Math.max(h,a.h.i+40))});d.width=h;d.height=h;b.f.o[e]=d;d.K=[]}if(!d.K[a.id]){e=.1+e/4;var f=d.getContext("2d");f.setLineDash([5/e,5/e]);f.beginPath();f.lineWidth=2/e;f.strokeStyle=a.color;f.globalAlpha=.6;f.arc(0,0,b.i,0,r/4,!1);f.stroke();f.setLineDash(Fb);d.K[a.id]=!0}}}var Fb=[];
function Gb(){l.globalAlpha=1;for(var a=B.length;a--;){var b=B[a];if(b.type===Hb){var d=w(b,B[0]);l.save();l.translate(b.x,b.y/M);l.rotate(d);l.scale(.2,.2);l.drawImage(E,-E.width/2,-E.height/2)}else{if(!b.cache){var e=b.type===Ib,h=e?"#FFF":b.color,f=e?50:10;d=b.size+f;var k=0,g=b.cache=document.createElement("CANVAS");g.width=2*d;g.height=2*d;g=b.cache.getContext("2d");e&&(k=1E3,g.shadowOffsetY=k);g.beginPath();g.fillStyle=h;g.shadowColor=b.color;g.shadowBlur=f;g.arc(d,d-k,b.size,0,r,!1);g.fill();
e&&(g.beginPath(),g.shadowColor="#FFF",g.shadowBlur=5,g.arc(d,d-k,b.size-5,0,r,!1),g.fill());if(!e)for(h=e=b.size,g.beginPath(),g.arc(d,d,b.size,0,2*Math.PI,!1),g.clip();e--;)g.beginPath(),g.globalAlpha=.05,g.fillStyle="#000",g.shadowColor="#000",g.shadowBlur=10,g.save(),g.transform(1,0,0,1,d-h/2+(b.size-h)/2,d),g.arc(0,0,2*h--,-r/4,r/4),g.fill(),g.restore()}d=w(b,B[0]);l.save();l.translate(b.x,b.y/M);l.rotate(d);b.L&&(d=1+.01*Math.sin(performance.now()/30),l.scale(d,d));l.drawImage(b.cache,-b.cache.width/
2,-b.cache.height/2)}l.restore()}}function Jb(a,b){b=b||[];b.push(a);for(var d=B.length;d--;){var e=B[d],h=0<=b.indexOf(e);a!==e&&!h&&(a===N.f||a.type===Hb)&&v(a,e)<=N.H&&Jb(e,b)}return b}
function Kb(){var a=Jb(N.f);l.beginPath();for(var b=75*(M-1),d=0;d<a.length;d++)for(var e=a[d],h=d;h<a.length;h++){var f=a[h];if(f!=e&&v(f,e)<=N.H&&(e===N.f||e.type===Hb)&&(f.type===Hb||f.type===Lb||f.type===Mb)){var k=e.y/M,g=f.y/M;l.moveTo(e.x,k);l.bezierCurveTo(e.x,k-b,f.x,g-b,f.x,g)}}l.globalAlpha=ia(.2/H,.2,.8);l.lineWidth=ia(1/H*2,1,4);l.strokeStyle="#0F0";l.stroke();l.globalAlpha=1};var Nb=document.createElement("CANVAS");Nb.width=512;Nb.height=512;var O=Nb.getContext("2d");O.shadowBlur=1;O.globalAlpha=.5;for(var Ob=300;Ob--;){var Pb=512*Math.random(),Qb=512*Math.random(),Rb=x(-1,100,90);O.fillStyle=Rb;O.shadowColor=Rb;O.beginPath();O.arc(Pb,Qb,.5,0,2*Math.PI);O.fill()}var Sb=l.createPattern(Nb,"repeat");
function jc(){var a=performance.now()/2E3;l.beginPath();l.rect(0,0,c.width,c.height);l.fillStyle=Sb;l.translate(.5*c.width,.5*c.height);l.scale(.5,.5);l.translate(-G/25,-L/25);l.rotate(a/200);l.fill();l.rotate(-a/200);l.scale(2,2);l.translate(-G/50,-L/50);l.fill()}var kc=document.createElement("CANVAS"),lc=kc.getContext("2d",{alpha:!1});kc.width=512;kc.height=512;lc.beginPath();var mc=lc.createRadialGradient(256,256,0,256,256,256);mc.addColorStop(0,"#141e28");mc.addColorStop(1,"#000000");
lc.fillStyle=mc;lc.fillRect(0,0,512,512);var B=[],nc=[],oc=[],Ib=0,Hb=2,Lb=3,Mb=4;
function pc(a,b,d,e,h,f){void 0===f&&(f=0);var k={name:"Some Shithole Planet"};k.type=Ib;k.x=0;k.y=0;k.color=a;k.size=b;k.L=!1;k.id=B.length.toString();k.j=100;d&&(k.h={f:d,i:e,speed:h,angle:f});k.update=function(){if(k.h){var a=k.h;a.angle+=a.speed;k.x=a.i*Math.cos(a.angle)+a.f.x;k.y=a.i*Math.sin(a.angle)+a.f.y}};k.g=function(){var a=k.h;if(a){l.beginPath();l.globalAlpha=.4;l.strokeStyle=k.color;l.lineWidth=4/H;l.save();var b=1/M;l.transform(1,0,0,b,a.f.x,a.f.y*b);l.arc(0,0,a.i,a.angle-a.speed*a.i/
2,a.angle,0>a.speed);l.restore();l.stroke()}};B.push(k);return k}function qc(a,b,d,e,h,f){void 0===f&&(f=0);a=pc(a,b,d,e+b/2,h,f);a.name="Planet";a.type=1;a.update=ba(a.update,function(){});return a}function rc(a){void 0!==ha(sc,a,nc)&&(a=pc(x(212,100,97),2,a,3*a.size,-.005,null),a.name="Mining Station",a.type=Lb,a.update=ba(a.update,function(){N.C+=N.P}))}var sc=4;
function T(a){var b=ha(tc,a,nc);void 0!==b&&(a=pc(x(160,100,50),2,a,5*a.size,.01,b),a.name="Satellite",a.type=Hb,a.index=nc.length,a.cache=E,a.update=ba(a.update,function(){N.A+=N.O}),nc.push(a))}var tc=3;function uc(a){var b=ha(vc,a,oc);void 0!==b&&(a=pc(x(33,100,50),2,a,7*a.size,.005,b),a.name="Defense Platform",a.type=Mb,a.index=oc.length,oc.push(a),a.M=wc(a),a.update=ba(a.update,a.M.update),a.g=ba(a.g,a.M.g))}var vc=2;
function wc(a){var b=null,d=null,e=null;return{update:function(){for(var h=null,f=0,k=U.length;k--;){var g=U[k],y=v(a,g);y>f&&1E3>y&&(h=g,f=y)}if(b=h)for(e=w(a,b),null==d&&(d=e),d+=.01*Math.sign(ca(e-d+n)-n),h=U.length;h--;)f=U[h],k=ca(d-w(a,f)+n)-n,1E3>v(f,a)&&.1>Math.abs(k)&&(f.j-=10.5)},g:function(){if(b){l.beginPath();l.lineWidth=6+3*Math.sin(performance.now()/5);var e=l.createRadialGradient(a.x,a.y/M,100,a.x,a.y/M,1E3);e.addColorStop(0,"#FF0");e.addColorStop(1,"rgba(0, 0, 0, 0)");l.strokeStyle=
e;l.moveTo(a.x,a.y/M);l.lineTo(a.x-1E3*Math.cos(d),(a.y-1E3*Math.sin(d))/M);l.stroke()}}}};var V={};function xc(){for(var a in V)for(var b=V[a].length;b--;){var d=V[a][b];d.B-=50;0>=d.B?V[a].splice(b,1):(d.x-=50*Math.cos(d.angle),d.y-=50*Math.sin(d.angle))}}function yc(){l.lineWidth=1;for(var a in V){l.strokeStyle=a;l.beginPath();for(var b=V[a].length;b--;){var d=V[a][b],e=d.x+10*Math.cos(d.angle),h=d.y/M+10*Math.sin(d.angle);l.moveTo(d.x,d.y/M);l.lineTo(e,h)}l.stroke()}};function La(a,b){this.x=a;this.y=b;this.z=Math.floor(20*Math.random());this.direction=0;this.j=10;this.target=N.f;this.m=10*Math.random();U.push(this)}
La.prototype={update:function(){for(var a={x:this.x,y:this.y},b=999999,d=B[0],e=B.length;e--;)if(1<B[e].type){var h=v(B[e],a);h<b&&(b=h,d=e)}this.target=B[d];this.direction+=.01*(ca(w(this,this.target)-this.direction+n)-n);this.x-=5*Math.cos(this.direction);this.y-=5*Math.sin(this.direction);0>=this.m--&&(this.m=10,e=v(this,this.target),500>e&&(a=this.x,b=this.y,d=w(this,this.target),e=.5<Math.random()?2E3:e,V["#F00"]||(V["#F00"]=[]),V["#F00"].push({x:a,y:b,angle:d,B:e-50})));0>=this.j&&U.splice(U.indexOf(this),
1)}};var U=[];function zc(){for(var a=U.length;a--;)for(var b=U[a],d=a;0<d--;){var e=U[d],h=b.x-e.x,f=b.y-e.y;200>h*h+f*f&&(h=.25*(b.x-e.x),f=.25*(b.y-e.y),b.x+=h,b.y+=f,e.x-=h,e.y-=f)}for(a=U.length;a--;)U[a].update()}function Ac(){for(var a=-Fa.width/2,b=-Fa.height/2,d=U.length;d--;){var e=U[d];l.save();l.translate(e.x,e.y/M-e.z*M);l.scale(.3,.3/M);l.rotate(e.direction);l.drawImage(Fa,a,b);l.restore()}};var Bc=!1,Cc=1;
function Dc(){var a=c.width/2,b=c.height/2;l.fillStyle="#FFF";l.textAlign="center";l.textBaseline="middle";l.shadowColor="#FFF";l.shadowBlur=50+2*Math.sin(performance.now()/100);l.font="small-caps 700 256px monospace";l.fillText("X",a,b-64);l.fillText("e o",a,b-90);l.shadowBlur=0;l.font="small-caps 700 32px monospace";Ma?l.fillText("Loading music...",a,b+64):Oa?l.fillText("Loading sounds...",a,b+64):l.fillText("Click to continue!",a,b+64);l.font="small-caps 700 16px monospace";l.fillText("Created by",a,
c.height-68);l.fillText("ai Doge & Jack Oatley",a,c.height-48);l.fillText("for #js13k",a,c.height-28)};var N=null,W=0,ma=64;window.addEventListener("contextmenu",function(a){a.preventDefault()},!1);document.addEventListener("keypress",function(a){console.log(a.key);" "===a.key&&(3===W?W=1:W=3)});var Ec=x(60,100,50),X=pc(Ec,50,null,null,null,null);X.name="The Sun";X.type=Ib;X.L=!0;var Y=qc(x(180,39,62),10,X,650,.003,p()*r);N={f:Y,j:100,P:.01,O:.02,S:300,T:0,U:0,H:500,C:0,A:0};qc(x(-1,60,70),5,Y,100,-.002,p()*r);var Z=qc(x(-1,60,70),20,X,1123,.0015,p()*r);qc(x(-1,60,70),5,Z,8*Z.size,.01,p()*r);
qc(x(-1,60,70),10,Z,9*Z.size,.005,null);qc(x(-1,60,70),30,X,2532,-.001,p()*r);rc(Y);rc(Z);T(Y);T(X);T(X);T(X);T(Z);T(Z);T(Z);uc(Y);uc(Y);uc(Y);uc(Z);var Fc=performance.now(),Gc=1E3/60,Hc=0,Ic=[];(function Jc(a){requestAnimationFrame(Jc);var d=Fc+Gc;Ic.push(1/((a-Hc)/1E3));Hc=a;60<Ic.length&&(Ic.shift(),Ic.forEach(function(){}));a>d&&(Kc(Math.min(Math.floor((a-Fc)/Gc),60)),Lc(),Fc=a)})(Fc);
function Kc(a){0===W?0<Cc--||(Ma?Za():Oa?ab():(Bc||(Bc=!0,D("Welcum to Exo")),bb&&(W=1))):(zb(),C.update(),1===W&&(B.forEach(function(a){a.update()}),Ia--||(Ka(),Ia=600,Ha++,D(Ja[~~(Math.random()*Ja.length)])),zc(),xc(),ka()));cb=db=la=bb=!1;--a&&Kc(a)}
function Lc(){Bb();l.clearRect(0,0,c.width,c.height);l.drawImage(kc,Math.floor(.5*c.width-G-2048),Math.floor(.5*c.height-L-2048),4096,4096);jc();if(0===W)Bb(),Dc();else{l.setTransform(H,0,0,H,-G+c.width/2,-L+c.height/2);B.forEach(function(a){a.g()});l.globalAlpha=1;Db();Gb();Ac();Kb();yc();var a=ja();v(a,{x:z,y:A})<ma&&(l.beginPath(),l.moveTo(a.x,a.y/M),l.lineTo(z,A/M),l.strokeStyle="#ffffff",l.stroke());l.setTransform(1,0,0,1,c.width/2,c.height/2);Bb();C.g()}};})();</script></body></html>

